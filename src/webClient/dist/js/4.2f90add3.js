(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"147e":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{attrs:{padding:""}},[s("comp-breadcrumb",{attrs:{list:[{label:"Пользователи",to:"/users",docType:"users"},{label:t.item?t.item.last_name+" "+t.item.first_name:"",docType:"edit"}]}}),t.item?s("div",{staticClass:"q-mt-sm"},[s("div",{staticClass:"row q-col-gutter-md q-mb-sm"},[s("div",{staticClass:"col-md-4 col-xs-6"},[s("q-input",{staticClass:"q-mb-sm col-md-4 col-xs-6",attrs:{outlined:"",type:"text",label:"фамилия"},model:{value:t.item.last_name,callback:function(e){t.$set(t.item,"last_name",e)},expression:"item.last_name"}})],1),s("div",{staticClass:"col-md-4 col-xs-6"},[s("q-input",{staticClass:"q-mb-sm col-md-4 col-xs-6",attrs:{outlined:"",type:"text",label:"имя"},model:{value:t.item.first_name,callback:function(e){t.$set(t.item,"first_name",e)},expression:"item.first_name"}})],1)]),s("div",{staticClass:"row q-col-gutter-md q-mb-sm"},[s("div",{staticClass:"col-md-4 col-xs-6"},[s("q-select",{attrs:{outlined:"",multiple:"",label:"роли",options:t.options},model:{value:t.item.role,callback:function(e){t.$set(t.item,"role",e)},expression:"item.role"}})],1),s("div",{staticClass:"col-md-4 col-xs-6"},[s("q-select",{attrs:{outlined:"",label:"статус",options:t.stateOptions},model:{value:t.item.state,callback:function(e){t.$set(t.item,"state",e)},expression:"item.state"}})],1)]),s("div",{staticClass:"row q-col-gutter-md q-mb-sm"},[s("div",{staticClass:"col-md-4 col-xs-6"},[s("q-input",{staticClass:"q-mb-sm col-md-4 col-xs-6",attrs:{outlined:"",type:"text",label:"должность"},model:{value:t.item.grade,callback:function(e){t.$set(t.item,"grade",e)},expression:"item.grade"}})],1),s("div",{staticClass:"col-md-4 col-xs-6"},[s("q-input",{staticClass:"q-mb-sm col-md-4 col-xs-6",attrs:{outlined:"",mask:"+# (###) ### - ####",label:"телефон",readonly:!1},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"phone"}})]},proxy:!0}],null,!1,2596585552),model:{value:t.item.phone,callback:function(e){t.$set(t.item,"phone",e)},expression:"item.phone"}})],1)]),s("div",{staticClass:"row q-col-gutter-md"},[s("div",{staticClass:"col-xs-12 col-sm-6 col-md-4"},[s("comp-fld-img",{attrs:{label:"фото",fld:t.item.avatar,ext:{fldName:"avatar",uploadUrl:"upload_profile_image",methodUpdate:"user_update",tableId:t.item.id}}})],1)]),s("comp-item-btn-save",{on:{save:t.save,cancel:function(e){return t.$router.push(t.docUrl)}}})],1):t._e()],1)},l=[],i=(s("7514"),s("2ef0")),o=s.n(i),n=s("6b18"),r={waiting_auth:"ожидает авторизации",working:"работает",fired:"уволен"},m={props:["id"],computed:{docUrl:function(){return"/users"},stateOptions:function(){return["waiting_auth","working","fired"].map((function(t){return{value:t,label:r[t]}}))}},data:function(){return{item:null,flds:[{name:"first_name",required:!0},{name:"last_name",required:!0},{name:"role"},{name:"state"},{name:"grade"},{name:"phone"}],options:n["a"],optionsFlds:["state"]}},methods:{resultModify:function(t){var e=this;return t.role=t.role.map((function(t){return o.a.find(e.options,{value:t})})).filter((function(t){return t})),t.state&&(t.state={value:t.state,label:r[t.state]}),t},save:function(){this.$utils.saveItem.call(this,{method:"user_update",itemForSaveMod:{role:this.item.role.map((function(t){var e=t.value;return e})).filter((function(t){return t})),state:this.item.state?this.item.state.value:void 0},resultModify:this.resultModify})}},mounted:function(){var t=this,e=function(e){t.item=t.resultModify(e)};this.$utils.getDocItemById.call(this,{method:"user_get_by_id",cb:e})}},c=m,u=s("2877"),d=Object(u["a"])(c,a,l,!1,null,null,null);e["default"]=d.exports},"6b18":function(t,e,s){"use strict";e["a"]=[{label:"админ",value:"admin"},{label:"сотрудник",value:"student"}]}}]);