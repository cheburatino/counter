"use strict";(self["webpackChunkElectron"]=self["webpackChunkElectron"]||[]).push([[690],{90690:(t,e,l)=>{l.r(e),l.d(e,{default:()=>S});var i=l(34182);const s={style:{display:"flex",width:"100%","justify-content":"space-between"}},a=(0,i._)("img",{src:"image/task.svg",alt:""},null,-1),d=(0,i.Uk)();function n(t,e,l,n,o,r){const u=(0,i.up)("comp-breadcrumb"),c=(0,i.up)("q-input"),m=(0,i.up)("q-avatar"),p=(0,i.up)("q-item-section"),g=(0,i.up)("router-link"),_=(0,i.up)("q-item-label"),h=(0,i.up)("q-badge"),w=(0,i.up)("comp-item-dropdown-btn"),f=(0,i.up)("comp-doc-list"),k=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(k,{padding:!l.isOpenInDialog},{default:(0,i.w5)((()=>[l.isOpenInDialog?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(u,{key:0,class:"text-capitalize",list:[{label:t.$t("task.name_plural"),docType:"task"}]},null,8,["list"])),(0,i.Wm)(f,{ref:"docList",listTitle:t.$t("task.name_plural"),listDeletedTitle:t.$t("task.name_plural_deleted"),"pg-method":"task_list","list-sort-data":o.listSortData,"list-filter-data":o.listFilterData,newDocUrl:r.currentUrl+"new",ext:l.ext,"search-fld-name":"search_text",readonly:!1},{addFilterSlot:(0,i.w5)((()=>[(0,i._)("div",s,[(0,i.Wm)(c,{id:"sqlInput",onKeydown:r.keydownHandler,style:{width:"100%"},filled:"",modelValue:o.sqlRest,"onUpdate:modelValue":e[0]||(e[0]=t=>o.sqlRest=t),label:"Условия фильтра","input-class":"text-left"},null,8,["onKeydown","modelValue"])])])),listItem:(0,i.w5)((({item:l})=>[(0,i.Wm)(g,{to:r.currentUrl+l.id,style:{cursor:"pointer"}},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{avatar:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{rounded:""},{default:(0,i.w5)((()=>[a])),_:1})])),_:1})])),_:2},1032,["to"]),(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)(_,{lines:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,i.zw)(l.title),1)])),_:2},1024),(0,i.Wm)(_,{caption:""},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{color:"orange"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,i.zw)(l.options.title.state_title),1)])),_:2},1024),d,(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,i.zw)(l.options.title.system_title),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,i.Wm)(p,{top:"",side:""},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{item:l,itemProp:"title","is-edit":!0,"is-delete":!0,fkProp:"","pg-method":"task_update",onEdit:e=>t.$router.push(`${r.currentUrl}${l.id}`),onReloadList:e[1]||(e[1]=e=>t.$refs.docList.reloadList())},null,8,["item","is-delete","onEdit"])])),_:2},1024)])),_:1},8,["listTitle","listDeletedTitle","list-sort-data","list-filter-data","newDocUrl","ext"])])),_:1},8,["padding"])}l(10071),l(66016);var o=l(43015);const r={props:["isOpenInDialog","ext"],mixins:[o.Z],computed:{currentUrl:()=>"/task/"},data(){return{listSortData:[{value:"created_at",title:"Дата"},{value:"title",title:"Название"}],listFilterData:[{value:{deleted:!1},title:"Активные"},{value:{deleted:!0},title:"Удаленные"}],filterCtlgTaskStateTitle:null,filterCtlgTaskStateId:null,filterSystemTitle:null,filterSystemId:null,filterDigitalSolutionTitle:null,filterDigitalSolutionId:null,sqlRest:"state_id != 4",sqlRestList:[],active:!0}},methods:{sqlRestBtnClickHandler(){this.$refs.docList.changeItemList({where_param:this.sqlRest?this.sqlRest:null})},keydownHandler(t){13==t.keyCode&&this.sqlRestBtnClickHandler()},routOnTask(t){console.log(window.location),console.log(t),window.location.href=`${window.location.origin}${window.location.pathname}/${t}`},updateFilterCtlgTaskState(t){this.$refs.docList.changeItemList({state:t?t.id:null}),t&&this.$utils.callPgMethod("ctlg_task_state_get_by_id",{id:t.id},(t=>{this.filterCtlgTaskStateTitle=t.title}))},updateFilterSystem(t){this.$refs.docList.changeItemList({system_id:t?t.id:null}),t&&this.$utils.callPgMethod("system_get_by_id",{id:t.id},(t=>{this.filterSystemTitle=t.title}))},updateFilterDigitalSolution(t){this.$refs.docList.changeItemList({digital_solution_id:t?t.id:null}),t&&this.$utils.callPgMethod("digital_solution_get_by_id",{id:t.id},(t=>{this.filterDigitalSolutionTitle=t.title}))}},mounted(){const t=new URLSearchParams(window.location.search);if(t.has("state")){let e=+t.get("state");e&&this.updateFilterCtlgTaskState({id:e})}if(t.has("system_id")){let e=+t.get("system_id");e&&this.updateFilterSystem({id:e})}if(t.has("digital_solution_id")){let e=+t.get("digital_solution_id");e&&this.updateFilterDigitalSolution({id:e})}this.sqlRestBtnClickHandler()}};var u=l(74260),c=l(24379),m=l(34842),p=l(2165),g=l(52035),_=l(75096),h=l(2350),w=l(69721),f=l(7518),k=l.n(f);const y=(0,u.Z)(r,[["render",n]]),S=y;k()(r,"components",{QPage:c.Z,QInput:m.Z,QBtn:p.Z,QItemSection:g.Z,QAvatar:_.Z,QItemLabel:h.Z,QBadge:w.Z})}}]);