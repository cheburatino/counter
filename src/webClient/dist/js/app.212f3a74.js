(()=>{var e={16497:(e,t,l)=>{"use strict";l(65363),l(10071);var a=l(34182),i=l(99592);const s={class:"q-gutter-sm row items-center no-wrap"};function o(e,t,l,i,o,n){const r=(0,a.up)("auth-comp"),d=(0,a.up)("waiting-auth-page"),c=(0,a.up)("fired-page"),u=(0,a.up)("q-btn"),m=(0,a.up)("q-toolbar-title"),p=(0,a.up)("q-space"),_=(0,a.up)("current-user-toolbar-menu"),h=(0,a.up)("q-toolbar"),g=(0,a.up)("q-header"),f=(0,a.up)("side-menu"),w=(0,a.up)("router-view"),b=(0,a.up)("q-page-container"),k=(0,a.up)("q-layout");return(0,a.wg)(),(0,a.iD)("div",null,[e.isLoggedIn||e.isInLogingProcess?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(r,{key:0})),e.isWaitingAuth?((0,a.wg)(),(0,a.j4)(d,{key:1})):(0,a.kq)("",!0),e.isFired?((0,a.wg)(),(0,a.j4)(c,{key:2})):(0,a.kq)("",!0),e.isLoggedIn&&e.isWorking?((0,a.wg)(),(0,a.j4)(k,{key:3,view:"hHh lpR fFf"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{elevated:"",class:"bg-white text-grey-8 q-py-xs"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{dense:"",flat:"",round:"",icon:"menu",onClick:t[0]||(t[0]=e=>o.leftSide=!o.leftSide)}),(0,a.Wm)(u,{flat:"","no-caps":"","no-wrap":"",class:"q-ml-xs",onClick:t[1]||(t[1]=t=>e.$router.push("/"))},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{shrink:"",class:"text-weight-bold"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$config.uiAppName),1)])),_:1})])),_:1}),(0,a.Wm)(p),(0,a._)("div",s,[(0,a.Wm)(_,{currentUser:e.currentUser,onLogout:e.logout},null,8,["currentUser","onLogout"])])])),_:1})])),_:1}),(0,a.Wm)(f,{leftSide:o.leftSide,currentUser:e.currentUser,onHide:t[2]||(t[2]=e=>o.leftSide=!1)},null,8,["leftSide","currentUser"]),(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w,{key:e.$route.fullPath,currentUser:e.currentUser},null,8,["currentUser"])])),_:1})])),_:1})):(0,a.kq)("",!0)])}var n=l(43015);const r={key:1,src:"https://www.svgrepo.com/show/95333/avatar.svg"};function d(e,t,l,i,s,o){const n=(0,a.up)("comp-stat-img-src"),d=(0,a.up)("q-avatar"),c=(0,a.up)("q-item-section"),u=(0,a.up)("q-item"),m=(0,a.up)("q-separator"),p=(0,a.up)("q-list"),_=(0,a.up)("q-menu"),h=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.j4)(h,{round:"",flat:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{rounded:"",size:"26px"},{default:(0,a.w5)((()=>[l.currentUser.avatar?((0,a.wg)(),(0,a.j4)(n,{key:0,src:l.currentUser.avatar},null,8,["src"])):((0,a.wg)(),(0,a.iD)("img",r))])),_:1}),(0,a.Wm)(_,{"transition-show":"flip-right","transition-hide":"flip-left","auto-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{dense:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"GL__menu-link-signed-in"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a._)("strong",null,(0,a.zw)(l.currentUser.fullname),1)])])),_:1})])),_:1}),(0,a.Wm)(m),(0,a.Wm)(u,{clickable:"",class:"GL__menu-link"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{onClick:t[0]||(t[0]=t=>e.$router.push("/profile"))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("message.edit")),1)])),_:1})])),_:1}),(0,a.Wm)(m),(0,a.Wm)(u,{clickable:"",class:"GL__menu-link"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{onClick:t[1]||(t[1]=t=>e.$emit("logout"))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("profile.exit")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}const c={props:["currentUser"],data(){return{}}};var u=l(74260),m=l(2165),p=l(75096),_=l(20811),h=l(27011),g=l(83414),f=l(52035),w=l(65869),b=l(7518),k=l.n(b);const y=(0,u.Z)(c,[["render",d]]),v=y;k()(c,"components",{QBtn:m.Z,QAvatar:p.Z,QMenu:_.Z,QList:h.Z,QItem:g.Z,QItemSection:f.Z,QSeparator:w.Z});const q={key:0},x=["src"],Z=["src"];function S(e,t,l,i,s,o){const n=(0,a.up)("q-avatar"),r=(0,a.up)("q-item-section"),d=(0,a.up)("q-item-label"),c=(0,a.up)("q-item"),u=(0,a.up)("q-expansion-item"),m=(0,a.up)("q-list"),p=(0,a.up)("q-drawer"),_=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.j4)(p,{modelValue:l.leftSide,side:"left",bordered:"","show-if-above":"","content-class":"bg-grey-2",width:240,onHide:t[0]||(t[0]=t=>e.$emit("hide"))},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{padding:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.menuLinks,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.text},[o.isRole(t.roles)?((0,a.wg)(),(0,a.iD)("span",q,[t.isFolder?((0,a.wg)(),(0,a.j4)(u,{key:1,"header-class":"text-grey",closed:""},{header:(0,a.w5)((()=>[(0,a.Wm)(r,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{rounded:""},{default:(0,a.w5)((()=>[(0,a._)("img",{src:t.icon},null,8,Z)])),_:2},1024)])),_:2},1024),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{innerHTML:t.text.includes("i18n_")?e.$t(t.text.replace("i18n_","")):t.text},null,8,["innerHTML"])])),_:2},1024)])),default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.linkList,(t=>((0,a.wg)(),(0,a.iD)("span",{key:t.text},[o.isRole(t.roles)?(0,a.wy)(((0,a.wg)(),(0,a.j4)(c,{key:0,"inset-level":1,clickable:"",to:t.url,exact:""},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{innerHTML:t.text.includes("i18n_")?e.$t(t.text.replace("i18n_","")):t.text},null,8,["innerHTML"])])),_:2},1024)])),_:2},1032,["to"])),[[_]]):(0,a.kq)("",!0)])))),128))])),_:2},1024)):(0,a.wy)(((0,a.wg)(),(0,a.j4)(c,{key:0,clickable:"",to:t.url,exact:""},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{rounded:""},{default:(0,a.w5)((()=>[(0,a._)("img",{src:t.icon},null,8,x)])),_:2},1024)])),_:2},1024),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{innerHTML:t.text.includes("i18n_")?e.$t(t.text.replace("i18n_","")):t.text},null,8,["innerHTML"])])),_:2},1024)])),_:2},1032,["to"])),[[_]])])):(0,a.kq)("",!0)])))),128))])),_:1})])),_:1},8,["modelValue"])}const D={props:["leftSide","currentUser"],computed:{isRole(){return e=>{if(!e||0===e.length)return!0;if(!this.currentUser.role)return!1;let t=!1;return this.currentUser.role.map((l=>{e.includes(l)&&(t=!0)})),t}}},data(){return{menuLinks:[{icon:"image/sprint.svg",text:"i18n_menu.sprint",url:"/sprint",roles:["admin","specialist","customer"]},{icon:"image/system.svg",text:"i18n_menu.system",url:"/system",roles:["admin","specialist","customer"]},{icon:"image/request.svg",text:"i18n_menu.request",url:"/request",roles:["admin","specialist","customer"]},{icon:"image/digital_solution.svg",text:"i18n_menu.digital_solution",url:"/digital_solution",roles:["admin","specialist","customer"]},{icon:"image/model.svg",text:"i18n_menu.model",url:"/model",roles:["admin","specialist","customer"]},{icon:"image/functional_requirement.svg",text:"i18n_menu.functional_requirement",url:"/functional_requirement",roles:["admin","specialist","customer"]},{icon:"image/task.svg",text:"i18n_menu.task",url:"/task",roles:["admin","specialist"]},{icon:"image/bug.png",text:"i18n_menu.bug",url:"/bug",roles:["admin","customer","specialist"]},{icon:"image/company.svg",text:"i18n_menu.company",url:"/company",roles:["admin"]},{icon:"image/counterparty.svg",text:"i18n_menu.counterparty",url:"/counterparty",roles:["admin"]},{icon:"image/contract.svg",text:"i18n_menu.contract",url:"/contract",roles:["admin"]},{icon:"image/technical_task.svg",text:"i18n_menu.technical_task",url:"/technical_task",roles:["admin"]},{icon:"image/completion_act.png",text:"i18n_menu.completion_act",url:"/completion_act",roles:["admin"]},{icon:"image/invoice.svg",text:"i18n_menu.invoice",url:"/invoice",roles:["admin"]},{icon:"image/payment.png",text:"i18n_menu.payment",url:"/payment",roles:["admin"]},{isFolder:!0,icon:"image/catalog.svg",text:"Справочники",roles:["admin"],linkList:[{icon:"image/user.svg",text:"Пользователи",url:"/users",roles:[]},{icon:"",text:"Статусы запросов",url:"/ctlg_request_state",roles:[]},{icon:"",text:"Статусы моделей",url:"/ctlg_model_state",roles:[]},{icon:"",text:"Типы моделей",url:"/ctlg_model_type",roles:[]},{icon:"",text:"Статусы функциональных требований",url:"/ctlg_functional_requirement_state",roles:[]},{icon:"",text:"Роли специалистов в функциональных требованиях",url:"/ctlg_functional_requirement_specialist_role",roles:[]},{icon:"",text:"Статусы цифровых решений",url:"/ctlg_digital_solution_state",roles:[]},{icon:"",text:"Роли специалистов в цифровых решениях",url:"/ctlg_digital_solution_specialist_role",roles:[]},{icon:"",text:"Типы задач",url:"/ctlg_task_type",roles:[]},{icon:"",text:"Статусы задач",url:"/ctlg_task_state",roles:[]},{icon:"",text:"Роли в задачах",url:"/ctlg_task_role",roles:[]},{icon:"",text:"Статусы дел",url:"/ctlg_work_state",roles:[]},{icon:"",text:"Роли специалистов в делах",url:"/ctlg_work_specialist_role",roles:[]},{icon:"",text:"Статусы багов",url:"/ctlg_bug_state",roles:[]},{icon:"",text:"Статусы договоров",url:"/ctlg_contract_state",roles:[]},{icon:"",text:"Статусы технических заданий",url:"/ctlg_technical_task_state",roles:[]},{icon:"",text:"Статусы работ по ТЗ",url:"/ctlg_technical_task_work_state",roles:[]},{icon:"",text:"Статусы актов",url:"/ctlg_completion_act_state",roles:[]},{icon:"",text:"Статусы счетов",url:"/ctlg_invoice_state",roles:[]},{icon:"",text:"Фильтры",url:"/ctlg_filter",roles:[]},{icon:"",text:"Сортировки",url:"/ctlg_order_by",roles:[]}]}]}}};var Q=l(52901),j=l(47704),W=l(2350),$=l(60429),C=l(46489);const U=(0,u.Z)(D,[["render",S]]),I=U;k()(D,"components",{QDrawer:Q.Z,QScrollArea:j.Z,QList:h.Z,QItem:g.Z,QItemSection:f.Z,QAvatar:p.Z,QItemLabel:W.Z,QExpansionItem:$.Z}),k()(D,"directives",{Ripple:C.Z});const F={key:1};function P(e,t,l,i,s,o){const n=(0,a.up)("login-page"),r=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",null,[o.isRedirectToLoginPage?((0,a.wg)(),(0,a.j4)(n,{key:0})):((0,a.wg)(),(0,a.iD)("div",F,[(0,a.Wm)(r)]))])}const V={class:"layout"},T=(0,a._)("div",{class:"row justify-center",style:{"margin-top":"20px","margin-bottom":"10px"}},[(0,a._)("img",{src:"image/electron_logo.png",alt:"",style:{width:"auto","max-height":"100px"}})],-1),N={class:"row justify-center q-mt-lg q-col-gutter-md"};function L(e,t,l,i,s,o){const n=(0,a.up)("email-btn");return(0,a.wg)(),(0,a.iD)("div",V,[(0,a._)("div",null,[T,(0,a._)("div",N,[(0,a.Wm)(n)])])])}const z={class:"text-weight-bold",style:{"text-transform":"capitalize","margin-left":"auto","padding-left":"45px","margin-right":"auto"}};function M(e,t,l,i,s,o){const n=(0,a.up)("q-icon"),r=(0,a.up)("q-btn"),d=(0,a.up)("q-toolbar-title"),c=(0,a.up)("q-toolbar"),u=(0,a.up)("comp-login-form"),m=(0,a.up)("comp-register-form"),p=(0,a.up)("comp-recover-password-form"),_=(0,a.up)("q-card-section"),h=(0,a.up)("q-card"),g=(0,a.up)("q-dialog"),f=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(r,{size:"md",outline:"",color:"primary",onClick:o.login,disabled:l.disabled},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{left:"",size:"3em",name:"perm_identity"}),(0,a._)("div",null,(0,a.zw)(e.$t("auth.login")),1)])),_:1},8,["onClick","disabled"]),(0,a.Wm)(g,{modelValue:s.modalIsOpened,"onUpdate:modelValue":t[0]||(t[0]=e=>s.modalIsOpened=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{style:{"min-width":"25%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{style:{display:"flex"}},{default:(0,a.w5)((()=>[(0,a._)("span",z,(0,a.zw)(o.dialogTitle),1)])),_:1}),(0,a.wy)((0,a.Wm)(r,{flat:"",round:"",dense:"",icon:"close"},null,512),[[f]])])),_:1}),(0,a.Wm)(_,{style:{"padding-top":"10px"}},{default:(0,a.w5)((()=>[s.emailRegister.isNewRegister||s.emailRegister.isPasswordRecover?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(u,{key:0,onRegister:o.showNewEmailUserRegister,onPasswordRecover:o.showPasswordRecover},null,8,["onRegister","onPasswordRecover"])),s.emailRegister.isNewRegister?((0,a.wg)(),(0,a.j4)(m,{key:1,onCancel:o.resetRegisterForm},null,8,["onCancel"])):(0,a.kq)("",!0),s.emailRegister.isPasswordRecover?((0,a.wg)(),(0,a.j4)(p,{key:2,onCancel:o.resetPasswordRecover},null,8,["onCancel"])):(0,a.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const A={class:"q-gutter-md"},O={class:"row wrap justify-center items-start content-start"};function R(e,t,l,i,s,o){const n=(0,a.up)("q-icon"),r=(0,a.up)("q-input"),d=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)("div",A,[(0,a.Wm)(r,{outlined:"",type:"email",label:"email",modelValue:s.email,"onUpdate:modelValue":t[0]||(t[0]=e=>s.email=e),autofocus:!0},{prepend:(0,a.w5)((()=>[(0,a.Wm)(n,{name:"email"})])),_:1},8,["modelValue"]),(0,a.Wm)(r,{outlined:"",type:"password",label:e.$t("auth.password"),modelValue:s.password,"onUpdate:modelValue":t[1]||(t[1]=e=>s.password=e),onKeydown:(0,a.D2)((0,a.iM)(o.login,["prevent"]),["enter"])},{prepend:(0,a.w5)((()=>[(0,a.Wm)(n,{name:"lock"})])),_:1},8,["label","modelValue","onKeydown"]),(0,a._)("div",null,[(0,a.Wm)(d,{color:"primary",class:"full-width",onClick:o.login,onKeyup:(0,a.D2)(o.login,["enter"])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("auth.login")),1)])),_:1},8,["onClick","onKeyup"])]),(0,a._)("div",O,[(0,a.Wm)(d,{class:"col",flat:"",color:"secondary",style:{"margin-bottom":"10px"},onClick:t[2]||(t[2]=t=>e.$emit("register"))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("auth.register")),1)])),_:1}),(0,a.Wm)(d,{class:"col",flat:"",color:"secondary",style:{"margin-bottom":"10px"},onClick:t[3]||(t[3]=t=>e.$emit("passwordRecover"))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("auth.forgot_password"))+"?",1)])),_:1})])])}const E={data(){return{email:null,password:null}},methods:{login(){B(this.email)?!this.password||this.password.length<7?this.$q.notify({message:this.$t("auth.invalid_password_must_be_more_7"),type:"negative",position:"top-right"}):this.$utils.postApiRequest({url:"/auth/email",params:{login:this.email,password:this.password},isShowError:!1}).subscribe((e=>{e.ok?this.$currentUser.login({user:e.result}):e.message.includes("user not found")?this.$q.notify({message:this.$t("auth.user_not_found"),type:"negative",position:"top-right"}):e.message.includes("wrong password")?this.$q.notify({message:this.$t("auth.wrong_password"),type:"negative",position:"top-right"}):this.$q.notify({message:e.message,type:"negative",position:"top-right"})})):this.$q.notify({message:this.$t("auth.invalid_email"),type:"negative",position:"top-right"})}}},B=e=>{let t=/\S+@\S+\.\S+/;return t.test(e)};var Y=l(34842),H=l(24554);const K=(0,u.Z)(E,[["render",R]]),G=K;k()(E,"components",{QInput:Y.Z,QIcon:H.Z,QBtn:m.Z});const J={key:0,class:"q-gutter-md"},X={class:"row wrap justify-center items-start content-start q-gutter-md",style:{"margin-left":"0"}},ee=(0,a.Uk)("ok"),te={key:1},le={style:{padding:"0"}};function ae(e,t,l,i,s,o){const n=(0,a.up)("q-icon"),r=(0,a.up)("q-input"),d=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)("div",null,[s.isRegisterSuccess?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",J,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.flds,((e,t)=>((0,a.wg)(),(0,a.j4)(r,{key:e.model,outlined:"",type:e.type,label:e.label,modelValue:s.regForm[e.model],"onUpdate:modelValue":t=>s.regForm[e.model]=t,autofocus:0===t},{prepend:(0,a.w5)((()=>[(0,a.Wm)(n,{name:e.icon},null,8,["name"])])),_:2},1032,["type","label","modelValue","onUpdate:modelValue","autofocus"])))),128)),(0,a._)("div",X,[(0,a.Wm)(d,{class:"col",outline:"",color:"secondary",onClick:t[0]||(t[0]=t=>e.$emit("cancel"))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("message.cancel")),1)])),_:1}),(0,a.Wm)(d,{class:"col",color:"primary",onClick:o.login},{default:(0,a.w5)((()=>[ee])),_:1},8,["onClick"])])])),s.isRegisterSuccess?((0,a.wg)(),(0,a.iD)("div",te,[(0,a._)("div",le,(0,a.zw)(e.$t("auth.register_message")),1)])):(0,a.kq)("",!0)])}const ie={data(){return{regForm:{},flds:[{model:"login",label:"email",type:"email",icon:"email"},{model:"password",label:this.$t("auth.password"),type:"password",icon:"lock"},{model:"passwordRepeat",label:this.$t("auth.password_repeat"),type:"password",icon:"lock"},{model:"last_name",label:this.$t("profile.last_name"),type:"text",icon:"person"},{model:"first_name",label:this.$t("profile.first_name"),type:"text",icon:"person_outline"}],isRegisterSuccess:!1}},methods:{login(){if(!se(this.regForm.login))return void this.$q.notify({message:this.$t("aith.invalid_email"),type:"negative",position:"top-right"});if(!this.regForm.password||this.regForm.password.length<7)return void this.$q.notify({message:this.$t("aith.invalid_password_must_be_more_7"),type:"negative",position:"top-right"});if(this.regForm.password!==this.regForm.passwordRepeat)return void this.$q.notify({message:this.$t("auth.invalid_password_wrong_repeat"),type:"negative",position:"top-right"});if(!this.regForm.first_name)return void this.$q.notify({message:this.$t("auth.invalid_first_name"),type:"negative",position:"top-right"});if(!this.regForm.last_name)return void this.$q.notify({message:this.$t("auth.invalid_last_name"),type:"negative",position:"top-right"});let e=Object.assign({is_register:!0},this.regForm);this.$utils.postApiRequest({url:"/auth/email",params:e,isShowError:!1}).subscribe((e=>{e.ok?this.isRegisterSuccess=!0:e.message.includes("email already exist")?this.$q.notify({message:this.$t("auth.invalid_user_already_exist"),type:"negative",position:"top-right"}):this.$q.notify({message:e.message,type:"negative",position:"top-right"})}))}},mounted(){this.flds.map((e=>this.regForm[e.model]=null))}},se=e=>{let t=/\S+@\S+\.\S+/;return t.test(e)},oe=(0,u.Z)(ie,[["render",ae]]),ne=oe;k()(ie,"components",{QInput:Y.Z,QIcon:H.Z,QBtn:m.Z});const re={key:0,class:"q-gutter-md"},de={class:"row wrap justify-center items-start content-start q-gutter-md",style:{"margin-left":"0"}},ce=(0,a.Uk)("ok"),ue={style:{padding:"20px"}};function me(e,t,l,i,s,o){const n=(0,a.up)("q-icon"),r=(0,a.up)("q-input"),d=(0,a.up)("q-btn"),c=(0,a.up)("q-banner");return(0,a.wg)(),(0,a.iD)("div",null,[s.isSuccess?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",re,[(0,a.Wm)(r,{outlined:"",type:"email",label:"email",modelValue:s.email,"onUpdate:modelValue":t[0]||(t[0]=e=>s.email=e),autofocus:!0},{prepend:(0,a.w5)((()=>[(0,a.Wm)(n,{name:"email"})])),_:1},8,["modelValue"]),(0,a._)("div",de,[(0,a.Wm)(d,{class:"col",outline:"",color:"secondary",onClick:t[1]||(t[1]=t=>e.$emit("cancel"))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("message.cancel")),1)])),_:1}),(0,a.Wm)(d,{class:"col",color:"primary",onClick:o.ok},{default:(0,a.w5)((()=>[ce])),_:1},8,["onClick"])])])),s.isSuccess?((0,a.wg)(),(0,a.j4)(c,{key:1,"inline-actions":"",class:"bg-grey-3 q-pa-md"},{default:(0,a.w5)((()=>[(0,a._)("div",ue,(0,a.zw)(e.$t("auth.password_recovery_message")),1)])),_:1})):(0,a.kq)("",!0)])}const pe={data(){return{email:null,isSuccess:!1}},methods:{ok(){_e(this.email)?this.$utils.postApiRequest({url:"/auth/email_auth_start_recover_password",params:{email:this.email},isShowError:!1}).subscribe((e=>{e.ok?this.isSuccess=!0:e.message.includes("user not found")?this.$q.notify({message:this.$t("auth.user_not_found"),type:"negative",position:"top-right"}):this.$q.notify({message:e.message,type:"negative",position:"top-right"})})):this.$q.notify({message:this.$t("invalid_email"),type:"negative",position:"top-right"})}}},_e=e=>{let t=/\S+@\S+\.\S+/;return t.test(e)};var he=l(15607);const ge=(0,u.Z)(pe,[["render",me]]),fe=ge;k()(pe,"components",{QInput:Y.Z,QIcon:H.Z,QBtn:m.Z,QBanner:he.Z});const we={props:["disabled"],components:{compLoginForm:G,compRegisterForm:ne,compRecoverPasswordForm:fe},computed:{dialogTitle(){return this.emailRegister.isNewRegister?this.$t("auth.registration"):this.emailRegister.isPasswordRecover?this.$t("auth.password_recovery"):this.$t("auth.authorization")}},data(){return{modalIsOpened:!1,emailRegister:{isNewRegister:!1,isNewRegisterSuccess:!1,isPasswordRecover:!1,isPasswordRecoverSuccess:!1}}},methods:{login(){this.modalIsOpened=!0},showNewEmailUserRegister(){this.emailRegister.isNewRegister=!0,this.emailRegister.isNewRegisterSuccess=!1},resetRegisterForm(){this.emailRegister.isNewRegister=!1},showPasswordRecover(){this.emailRegister.isPasswordRecover=!0},resetPasswordRecover(){this.emailRegister.isPasswordRecover=!1}}};var be=l(46778),ke=l(10151),ye=l(39570),ve=l(13747),qe=l(25589),xe=l(60677);const Ze=(0,u.Z)(we,[["render",M],["__scopeId","data-v-5ce8caa1"]]),Se=Ze;k()(we,"components",{QBtn:m.Z,QIcon:H.Z,QDialog:be.Z,QCard:ke.Z,QToolbar:ye.Z,QToolbarTitle:ve.Z,QCardSection:qe.Z}),k()(we,"directives",{ClosePopup:xe.Z});const De={components:{emailBtn:Se},data(){return{}}},Qe=(0,u.Z)(De,[["render",L]]),je=Qe,We={components:{loginPage:je},computed:{isRedirectToLoginPage:function(){return!["/check_user_email","/email_auth_recover_password"].includes(this.$route.path)}}},$e=(0,u.Z)(We,[["render",P]]),Ce=$e,Ue={class:"layout"},Ie=(0,a._)("div",{class:"row justify-center",style:{"margin-top":"20px","margin-bottom":"10px"}},[(0,a._)("img",{src:"[[appLogoSrc]]",alt:"",style:{width:"auto","max-height":"100px"}})],-1),Fe={class:"row justify-center q-mt-lg"},Pe=(0,a._)("img",{src:"image/waitingAuth.png"},null,-1),Ve=(0,a.Uk)(" Ожидаем подтверждения Вашей авторизации ");function Te(e,t,l,i,s,o){const n=(0,a.up)("q-avatar"),r=(0,a.up)("q-banner");return(0,a.wg)(),(0,a.iD)("div",Ue,[(0,a._)("div",null,[Ie,(0,a._)("div",Fe,[(0,a.Wm)(r,{class:"bg-grey-3"},{avatar:(0,a.w5)((()=>[(0,a.Wm)(n,{rounded:""},{default:(0,a.w5)((()=>[Pe])),_:1})])),default:(0,a.w5)((()=>[Ve])),_:1})])])])}var Ne=l(61764);const Le={data(){return{}},mounted(){localStorage.removeItem(Ne.Z.appName)}},ze=(0,u.Z)(Le,[["render",Te]]),Me=ze;k()(Le,"components",{QBanner:he.Z,QAvatar:p.Z});const Ae={class:"layout"},Oe=(0,a._)("div",{class:"row justify-center",style:{"margin-top":"20px","margin-bottom":"10px"}},[(0,a._)("img",{src:"[[appLogoSrc]]",alt:"",style:{width:"auto","max-height":"100px"}})],-1),Re={class:"row justify-center q-mt-lg"},Ee=(0,a._)("img",{src:"image/fired.png"},null,-1),Be=(0,a.Uk)(" Ваш аккаунт заблокирован. Обратитесь к администратору. ");function Ye(e,t,l,i,s,o){const n=(0,a.up)("q-avatar"),r=(0,a.up)("q-banner");return(0,a.wg)(),(0,a.iD)("div",Ae,[(0,a._)("div",null,[Oe,(0,a._)("div",Re,[(0,a.Wm)(r,{class:"bg-grey-3"},{avatar:(0,a.w5)((()=>[(0,a.Wm)(n,{rounded:""},{default:(0,a.w5)((()=>[Ee])),_:1})])),default:(0,a.w5)((()=>[Be])),_:1})])])])}const He={data(){return{}},mounted(){localStorage.removeItem(Ne.Z.appName)}},Ke=(0,u.Z)(He,[["render",Ye]]),Ge=Ke;k()(He,"components",{QBanner:he.Z,QAvatar:p.Z});const Je={mixins:[n.Z],components:{authComp:Ce,currentUserToolbarMenu:v,sideMenu:I,waitingAuthPage:Me,firedPage:Ge},data(){return{leftSide:!0,isShowMsgList:!1,isShowTaskList:!1,messageCounter:0,taskCounter:0}},methods:{toggleTaskList(){this.isShowTaskList?this.isShowTaskList=!1:this.isShowMsgList?(this.isShowMsgList=!1,this.$nextTick((()=>this.isShowTaskList=!0))):this.isShowTaskList=!0},toggleMsgList(){this.isShowMsgList?this.isShowMsgList=!1:this.isShowTaskList?(this.isShowTaskList=!1,this.$nextTick((()=>this.isShowMsgList=!0))):this.isShowMsgList=!0},hideRightSidebar(){this.isShowMsgList=!1,this.isShowTaskList=!1}},mounted(){this.$currentUser.login()}};var Xe=l(19214),et=l(53812),tt=l(62025),lt=l(72652);const at=(0,u.Z)(Je,[["render",o]]),it=at;k()(Je,"components",{QLayout:Xe.Z,QHeader:et.Z,QToolbar:ye.Z,QBtn:m.Z,QAvatar:p.Z,QToolbarTitle:ve.Z,QSpace:tt.Z,QPageContainer:lt.Z});var st=l(47083),ot=l(79582);const nt=[{path:"/",component:()=>l.e(1168).then(l.bind(l,31168))},{path:"/check_user_email",component:()=>l.e(2003).then(l.bind(l,92003))},{path:"/email_auth_recover_password",component:()=>l.e(2877).then(l.bind(l,72877))},{path:"/users",component:()=>l.e(1801).then(l.bind(l,21801))},{path:"/users/:id",component:()=>l.e(2476).then(l.bind(l,22476)),props:!0},{path:"/profile",component:()=>l.e(4764).then(l.bind(l,4764))},{path:"/ctlg_request_state",component:()=>l.e(3670).then(l.bind(l,53670)),props:!0},{path:"/ctlg_request_state/:id",component:()=>l.e(8620).then(l.bind(l,18620)),props:!0},{path:"/ctlg_model_state",component:()=>l.e(5538).then(l.bind(l,65538)),props:!0},{path:"/ctlg_model_state/:id",component:()=>l.e(9776).then(l.bind(l,79776)),props:!0},{path:"/ctlg_model_type",component:()=>l.e(2447).then(l.bind(l,32447)),props:!0},{path:"/ctlg_model_type/:id",component:()=>l.e(6870).then(l.bind(l,76870)),props:!0},{path:"/ctlg_request_priority",component:()=>l.e(579).then(l.bind(l,30579)),props:!0},{path:"/ctlg_request_priority/:id",component:()=>l.e(4618).then(l.bind(l,94618)),props:!0},{path:"/ctlg_time_type",component:()=>l.e(1006).then(l.bind(l,41006)),props:!0},{path:"/ctlg_time_type/:id",component:()=>l.e(7363).then(l.bind(l,27363)),props:!0},{path:"/ctlg_digital_solution_state",component:()=>l.e(8315).then(l.bind(l,8315)),props:!0},{path:"/ctlg_digital_solution_state/:id",component:()=>l.e(7250).then(l.bind(l,27250)),props:!0},{path:"/ctlg_digital_solution_specialist_role",component:()=>l.e(7692).then(l.bind(l,87692)),props:!0},{path:"/ctlg_digital_solution_specialist_role/:id",component:()=>l.e(8353).then(l.bind(l,48353)),props:!0},{path:"/ctlg_functional_requirement_state",component:()=>l.e(6676).then(l.bind(l,76676)),props:!0},{path:"/ctlg_functional_requirement_state/:id",component:()=>l.e(4196).then(l.bind(l,34196)),props:!0},{path:"/ctlg_functional_requirement_specialist_role",component:()=>l.e(42).then(l.bind(l,42)),props:!0},{path:"/ctlg_functional_requirement_specialist_role/:id",component:()=>l.e(4869).then(l.bind(l,34869)),props:!0},{path:"/ctlg_task_type",component:()=>l.e(421).then(l.bind(l,50421)),props:!0},{path:"/ctlg_task_type/:id",component:()=>l.e(4405).then(l.bind(l,54405)),props:!0},{path:"/ctlg_task_state",component:()=>l.e(7463).then(l.bind(l,67463)),props:!0},{path:"/ctlg_task_state/:id",component:()=>l.e(9813).then(l.bind(l,49813)),props:!0},{path:"/ctlg_task_role",component:()=>l.e(9631).then(l.bind(l,29631)),props:!0},{path:"/ctlg_task_role/:id",component:()=>l.e(4220).then(l.bind(l,94220)),props:!0},{path:"/ctlg_work_state",component:()=>l.e(5827).then(l.bind(l,75827)),props:!0},{path:"/ctlg_work_state/:id",component:()=>l.e(6030).then(l.bind(l,46030)),props:!0},{path:"/ctlg_work_specialist_role",component:()=>l.e(4477).then(l.bind(l,54477)),props:!0},{path:"/ctlg_work_specialist_role/:id",component:()=>l.e(7691).then(l.bind(l,37691)),props:!0},{path:"/ctlg_bug_state",component:()=>l.e(2680).then(l.bind(l,92680)),props:!0},{path:"/ctlg_bug_state/:id",component:()=>l.e(9208).then(l.bind(l,19208)),props:!0},{path:"/ctlg_contract_state",component:()=>l.e(3812).then(l.bind(l,1523)),props:!0},{path:"/ctlg_contract_state/:id",component:()=>l.e(9383).then(l.bind(l,79383)),props:!0},{path:"/ctlg_technical_task_state",component:()=>l.e(714).then(l.bind(l,10714)),props:!0},{path:"/ctlg_technical_task_state/:id",component:()=>l.e(2235).then(l.bind(l,62235)),props:!0},{path:"/ctlg_technical_task_work_state",component:()=>l.e(9889).then(l.bind(l,69889)),props:!0},{path:"/ctlg_technical_task_work_state/:id",component:()=>l.e(6095).then(l.bind(l,16095)),props:!0},{path:"/ctlg_completion_act_state",component:()=>l.e(7187).then(l.bind(l,67187)),props:!0},{path:"/ctlg_completion_act_state/:id",component:()=>l.e(8083).then(l.bind(l,88083)),props:!0},{path:"/ctlg_invoice_state",component:()=>l.e(8994).then(l.bind(l,68994)),props:!0},{path:"/ctlg_invoice_state/:id",component:()=>l.e(9586).then(l.bind(l,89586)),props:!0},{path:"/ctlg_filter",component:()=>l.e(6035).then(l.bind(l,66035)),props:!0},{path:"/ctlg_filter/:id",component:()=>l.e(6844).then(l.bind(l,46844)),props:!0},{path:"/ctlg_order_by",component:()=>l.e(2277).then(l.bind(l,32277)),props:!0},{path:"/ctlg_order_by/:id",component:()=>l.e(9878).then(l.bind(l,69878)),props:!0},{path:"/meeting",component:()=>l.e(6956).then(l.bind(l,75762)),props:!0},{path:"/meeting/:id",component:()=>l.e(4917).then(l.bind(l,4917)),props:!0},{path:"/contract",component:()=>l.e(5371).then(l.bind(l,45371)),props:!0},{path:"/contract/:id",component:()=>Promise.all([l.e(4736),l.e(4540)]).then(l.bind(l,24540)),props:!0},{path:"/technical_task",component:()=>l.e(7334).then(l.bind(l,77334)),props:!0},{path:"/technical_task/:id",component:()=>Promise.all([l.e(4736),l.e(9139)]).then(l.bind(l,29139)),props:!0},{path:"/counterparty",component:()=>l.e(2070).then(l.bind(l,72070)),props:!0},{path:"/counterparty/:id",component:()=>Promise.all([l.e(4736),l.e(3682)]).then(l.bind(l,13682)),props:!0},{path:"/company",component:()=>l.e(2940).then(l.bind(l,92940)),props:!0},{path:"/company/:id",component:()=>l.e(5762).then(l.bind(l,55762)),props:!0},{path:"/man",component:()=>l.e(3292).then(l.bind(l,23292)),props:!0},{path:"/man/:id",component:()=>l.e(2706).then(l.bind(l,92706)),props:!0},{path:"/system",component:()=>l.e(5471).then(l.bind(l,85471)),props:!0},{path:"/system/:id",component:()=>Promise.all([l.e(4736),l.e(3919)]).then(l.bind(l,23919)),props:!0},{path:"/request",component:()=>l.e(7775).then(l.bind(l,17775)),props:!0},{path:"/request/:id",component:()=>Promise.all([l.e(4736),l.e(8908)]).then(l.bind(l,58908)),props:!0},{path:"/digital_solution",component:()=>l.e(7763).then(l.bind(l,47763)),props:!0},{path:"/digital_solution/:id",component:()=>Promise.all([l.e(4736),l.e(1843)]).then(l.bind(l,1843)),props:!0},{path:"/model",component:()=>l.e(3583).then(l.bind(l,3583)),props:!0},{path:"/model/:id",component:()=>Promise.all([l.e(4736),l.e(2097)]).then(l.bind(l,82097)),props:!0},{path:"/functional_requirement",component:()=>l.e(1243).then(l.bind(l,31243)),props:!0},{path:"/functional_requirement/:id",component:()=>Promise.all([l.e(4736),l.e(2091)]).then(l.bind(l,52091)),props:!0},{path:"/invoice",component:()=>l.e(3366).then(l.bind(l,23366)),props:!0},{path:"/invoice/:id",component:()=>l.e(1e3).then(l.bind(l,31e3)),props:!0},{path:"/payment",component:()=>l.e(5166).then(l.bind(l,75166)),props:!0},{path:"/payment/:id",component:()=>Promise.all([l.e(4736),l.e(2761)]).then(l.bind(l,92761)),props:!0},{path:"/completion_act",component:()=>l.e(9365).then(l.bind(l,19365)),props:!0},{path:"/completion_act/:id",component:()=>l.e(3827).then(l.bind(l,53827)),props:!0},{path:"/sprint",component:()=>l.e(6659).then(l.bind(l,56659)),props:!0},{path:"/sprint/:id",component:()=>l.e(6003).then(l.bind(l,46003)),props:!0},{path:"/task",component:()=>l.e(9191).then(l.bind(l,39191)),props:!0},{path:"/task/:id",component:()=>Promise.all([l.e(4736),l.e(8731)]).then(l.bind(l,58731)),props:!0},{path:"/work",component:()=>l.e(181).then(l.bind(l,50181)),props:!0},{path:"/work/:id",component:()=>Promise.all([l.e(4736),l.e(8829)]).then(l.bind(l,78829)),props:!0},{path:"/customer_task",component:()=>l.e(5584).then(l.bind(l,55584)),props:!0},{path:"/customer_task/:id",component:()=>Promise.all([l.e(4736),l.e(9288)]).then(l.bind(l,19288)),props:!0},{path:"/bug",component:()=>l.e(5260).then(l.bind(l,5260)),props:!0},{path:"/bug/:id",component:()=>Promise.all([l.e(4736),l.e(8335)]).then(l.bind(l,68335)),props:!0},{path:"/task_specialist_link",component:()=>l.e(3854).then(l.bind(l,53854)),props:!0},{path:"/task_specialist_link/:id",component:()=>Promise.all([l.e(4736),l.e(7661)]).then(l.bind(l,37661)),props:!0},{path:"/system_customer_agent_link",component:()=>l.e(3853).then(l.bind(l,23853)),props:!0},{path:"/system_customer_agent_link/:id",component:()=>Promise.all([l.e(4736),l.e(1171)]).then(l.bind(l,91171)),props:!0},{path:"/request_customer_agent_link",component:()=>l.e(7371).then(l.bind(l,77371)),props:!0},{path:"/request_customer_agent_link/:id",component:()=>Promise.all([l.e(4736),l.e(4687)]).then(l.bind(l,4687)),props:!0},{path:"/functional_requirement_customer_agent_link",component:()=>l.e(7025).then(l.bind(l,57025)),props:!0},{path:"/functional_requirement_customer_agent_link/:id",component:()=>Promise.all([l.e(4736),l.e(4345)]).then(l.bind(l,34345)),props:!0},{path:"/digital_solution_specialist_link",component:()=>l.e(5302).then(l.bind(l,85302)),props:!0},{path:"/digital_solution_specialist_link/:id",component:()=>Promise.all([l.e(4736),l.e(8144)]).then(l.bind(l,88144)),props:!0},{path:"/functional_requirement_specialist_link",component:()=>l.e(3473).then(l.bind(l,73473)),props:!0},{path:"/functional_requirement_specialist_link/:id",component:()=>Promise.all([l.e(4736),l.e(4848)]).then(l.bind(l,84848)),props:!0},{path:"/digital_solution_customer_agent_link",component:()=>l.e(7936).then(l.bind(l,37936)),props:!0},{path:"/digital_solution_customer_agent_link/:id",component:()=>Promise.all([l.e(4736),l.e(9248)]).then(l.bind(l,69248)),props:!0},{path:"/bug_customer_agent_link",component:()=>l.e(8747).then(l.bind(l,38747)),props:!0},{path:"/bug_customer_agent_link/:id",component:()=>Promise.all([l.e(4736),l.e(7207)]).then(l.bind(l,67207)),props:!0},{path:"/work_specialist_link",component:()=>l.e(2352).then(l.bind(l,42352)),props:!0},{path:"/work_specialist_link/:id",component:()=>Promise.all([l.e(4736),l.e(9897)]).then(l.bind(l,9897)),props:!0},{path:"/work_task_link",component:()=>l.e(7354).then(l.bind(l,87354)),props:!0},{path:"/work_task_link/:id",component:()=>Promise.all([l.e(4736),l.e(9815)]).then(l.bind(l,19815)),props:!0},{path:"/company_man_link",component:()=>l.e(1447).then(l.bind(l,51447)),props:!0},{path:"/company_man_link/:id",component:()=>Promise.all([l.e(4736),l.e(5761)]).then(l.bind(l,75761)),props:!0},{path:"/time",component:()=>l.e(7490).then(l.bind(l,47490)),props:!0},{path:"/time/:id",component:()=>l.e(822).then(l.bind(l,50822)),props:!0},{path:"/comment",component:()=>l.e(3959).then(l.bind(l,43959)),props:!0},{path:"/comment/:id",component:()=>l.e(2230).then(l.bind(l,62230)),props:!0},{path:"/news_from_dima",component:()=>l.e(9070).then(l.bind(l,69070)),props:!0},{path:"/news_from_dima/:id",component:()=>Promise.all([l.e(4736),l.e(4619)]).then(l.bind(l,14619)),props:!0},{path:"/:catchAll(.*)*",component:()=>l.e(3031).then(l.bind(l,63031))}],rt=nt,dt=(0,st.BC)((function(){const e=ot.PO,t=(0,ot.p7)({scrollBehavior:()=>({left:0,top:0}),routes:rt,history:e("/")});return t}));async function ct(e,t){const l="function"===typeof dt?await dt({}):dt,a=e(it);return a.use(i.Z,t),{app:a,router:l}}var ut=l(29664),mt=l(10846),pt=l(69721),_t=l(67030),ht=l(85626),gt=l(42670),ft=l(31481),wt=l(85926),bt=l(99367),kt=l(65735),yt=l(40629),vt=l(90498),qt=l(86115),xt=l(39200),Zt=l(39975),St=l(24152),Dt=l(92729),Qt=l(66941),jt=l(96296),Wt=l(75682),$t=l(24379),Ct=l(21007),Ut=l(83944),It=l(61289),Ft=l(77991),Pt=l(42770),Vt=l(34765),Tt=l(72448),Nt=l(62064),Lt=l(82471),zt=l(96552),Mt=l(83518),At=l(90118),Ot=l(80218),Rt=l(31993),Et=l(92414),Bt=l(18186),Yt=l(57547),Ht=l(58408),Kt=l(5906),Gt=l(86602),Jt=l(35990),Xt=l(1432),el=l(23424),tl=l(28886),ll=l(5363),al=l(55078),il=l(83884),sl=l(90845),ol=l(1419),nl=l(64434),rl=l(11417);const dl={config:{},lang:ut.Z,components:{QAvatar:p.Z,QLayout:Xe.Z,QBar:mt.Z,QBadge:pt.Z,QChip:_t.Z,QHeader:et.Z,QDate:ht.Z,QDrawer:Q.Z,QDialog:be.Z,QBanner:he.Z,QBtn:m.Z,QBtnDropdown:gt.Z,QBreadcrumbs:ft.Z,QBreadcrumbsEl:wt.Z,QCard:ke.Z,QCardActions:bt.Z,QCardSection:qe.Z,QCheckbox:kt.Z,QChatMessage:yt.Z,QEditor:vt.Z,QField:qt.Z,QExpansionItem:$.Z,QFab:xt.Z,QFabAction:Zt.Z,QIcon:H.Z,QImg:St.Z,QInput:Y.Z,QInfiniteScroll:Dt.Z,QInnerLoading:Qt.Z,QList:h.Z,QKnob:jt.Z,QItem:g.Z,QItemSection:f.Z,QItemLabel:W.Z,QMenu:_.Z,QOptionGroup:Wt.Z,QPageContainer:lt.Z,QPage:$t.Z,QPageSticky:Ct.Z,QPopupProxy:Ut.Z,QPopupEdit:It.Z,QRadio:Ft.Z,QRouteTab:Pt.Z,QScrollArea:j.Z,QSeparator:w.Z,QSpace:tt.Z,QSpinnerDots:Vt.Z,QSelect:Tt.Z,QSlider:Nt.Z,QSlideTransition:Lt.Z,QStep:zt.Z,QStepper:Mt.Z,QStepperNavigation:At.Z,QSplitter:Ot.Z,QTable:Rt.Z,QTh:Et.Z,QTr:Bt.Z,QTabs:Yt.Z,QTab:Ht.Z,QTabPanels:Kt.Z,QTabPanel:Gt.Z,QTime:Jt.Z,QTimeline:Xt.Z,QTimelineEntry:el.Z,QToggle:tl.Z,QToolbar:ye.Z,QToolbarTitle:ve.Z,QTooltip:ll.Z,QTree:al.Z,QTd:il.Z,QUploader:sl.Z,QVideo:ol.Z},directives:{Ripple:C.Z,ClosePopup:xe.Z},plugins:{Notify:nl.Z,Dialog:rl.Z}},cl="/static/",ul=/\/\//,ml=e=>(cl+e).replace(ul,"/");async function pl({app:e,router:t},l){let a=!1;const i=e=>{try{return ml(t.resolve(e).href)}catch(l){}return Object(e)===e?null:e},s=e=>{if(a=!0,"string"===typeof e&&/^https?:\/\//.test(e))return void(window.location.href=e);const t=i(e);null!==t&&(window.location.href=t)},o=window.location.href.replace(window.location.origin,"");for(let r=0;!1===a&&r<l.length;r++)try{await l[r]({app:e,router:t,ssrContext:null,redirect:s,urlPath:o,publicPath:cl})}catch(n){return n&&n.url?void s(n.url):void console.error("[Quasar] boot error:",n)}!0!==a&&(e.use(t),e.mount("#q-app"))}ct(a.ri,dl).then((e=>Promise.all([Promise.resolve().then(l.bind(l,95769)),Promise.resolve().then(l.bind(l,5474)),Promise.resolve().then(l.bind(l,87452)),Promise.resolve().then(l.bind(l,44926)),Promise.resolve().then(l.bind(l,8739)),Promise.resolve().then(l.bind(l,38135))]).then((t=>{const l=t.map((e=>e.default)).filter((e=>"function"===typeof e));pl(e,l)}))))},43015:(e,t,l)=>{"use strict";l.d(t,{Z:()=>s});var a=l(62007),i=l(52802);const s={computed:{isLoggedIn(){return this.currentUser},isWorking(){return this.currentUser&&this.currentUser.options&&"working"===this.currentUser.options.state},isWaitingAuth(){return this.currentUser&&this.currentUser.options&&"waiting_auth"===this.currentUser.options.state},isFired(){return this.currentUser&&this.currentUser.options&&"fired"===this.currentUser.options.state},isAdmin(){var e,t;return null===(e=this.currentUser)||void 0===e||null===(t=e.role)||void 0===t?void 0:t.includes("admin")}},data(){return{currentUser:{},isInLogingProcess:!1,currentUserdestroy$:new a.x}},methods:{login(){this.$currentUser.login()},logout(){this.$currentUser.logout()}},mounted(){this.$currentUser.getUser$().pipe((0,i.R)(this.currentUserdestroy$)).subscribe((e=>{this.currentUser=e})),this.$currentUser.getIsInLogingProcess().pipe((0,i.R)(this.currentUserdestroy$)).subscribe((e=>{this.isInLogingProcess=e}))},destroyed(){this.currentUserdestroy$.next(!0),this.currentUserdestroy$.complete()}}},61764:(e,t,l)=>{"use strict";l.d(t,{Z:()=>a});const a={appName:"Electron",uiAppName:"Electron",apiUrl:()=>"https://system.i-electron.ru",wsUrl:()=>"wss://system.i-electron.ru",isEmailAuth:{firstName:!0,lastName:!0},logoSrc:"image/electron_logo.png",dadataToken:"1cf3a086e3dbe1306ed142d2b5fbc1b324b8eb60",breadcrumbIcons:{ctlg_request_state:"fas fa-list-ul",ctlg_model_state:"fas fa-list-ul",ctlg_model_type:"fas fa-list-ul",ctlg_request_priority:"fas fa-list-ul",ctlg_time_type:"fas fa-list-ul",ctlg_digital_solution_state:"fas fa-list-ul",ctlg_digital_solution_specialist_role:"fas fa-list-ul",ctlg_functional_requirement_state:"fas fa-list-ul",ctlg_functional_requirement_specialist_role:"fas fa-list-ul",ctlg_task_type:"fas fa-list-ul",ctlg_task_state:"fas fa-list-ul",ctlg_task_role:"fas fa-list-ul",ctlg_work_state:"fas fa-list-ul",ctlg_work_specialist_role:"fas fa-list-ul",ctlg_bug_state:"fas fa-list-ul",ctlg_contract_state:"fas fa-list-ul",ctlg_technical_task_state:"fas fa-list-ul",ctlg_technical_task_work_state:"fas fa-list-ul",ctlg_completion_act_state:"fas fa-list-ul",ctlg_invoice_state:"fas fa-list-ul",ctlg_filter:"fas fa-list-ul",ctlg_order_by:"fas fa-list-ul",meeting:"fas fa-users",contract:"fas fa-file-signature",technical_task:"fas fa-list-ul",counterparty:"far fa-handshake",company:"fas fa-building",man:"fas fa-male",system:"fas fa-project-diagram",request:"far fa-lightbulb",digital_solution:"fas fa-rocket",model:"fas fa-list-ul",functional_requirement:"fas fa-square-root-alt",invoice:"fas fa-file-invoice-dollar",payment:"fas fa-list-ul",completion_act:"fas fa-list-ul",sprint:"fas fa-list-ul",task:"fas fa-clipboard-check",work:"fas fa-laptop-code",customer_task:"fas fa-clipboard-check",bug:"fas fa-exclamation-triangle",task_specialist_link:"fas fa-list-ul",system_customer_agent_link:"fas fa-list-ul",request_customer_agent_link:"fas fa-list-ul",functional_requirement_customer_agent_link:"fas fa-list-ul",digital_solution_specialist_link:"fas fa-list-ul",functional_requirement_specialist_link:"fas fa-list-ul",digital_solution_customer_agent_link:"fas fa-list-ul",bug_customer_agent_link:"fas fa-list-ul",work_specialist_link:"fas fa-list-ul",work_task_link:"fas fa-list-ul",company_man_link:"fas fa-list-ul",time:"fas fa-building",comment:"far fa-comment-dots",news_from_dima:"far fa-newspaper"},tablesForTask:{}}},91589:(e,t,l)=>{"use strict";l.d(t,{Z:()=>$});l(10071),l(66016);var a=l(92073),i=l(15894),s=l(90319),o=l(42087),n=l(6720),r=l(64434),d=l(61764),c=l(88603),u=l.n(c),m=l(50947),p=l.n(m),_=l(11488),h=l.n(_);const g=({url:e,params:t,isShowError:l=!0})=>(0,n.h)({url:`${d.Z.apiUrl()}${e}`,method:"POST",headers:C(),body:{params:t}}).pipe((0,i.q)(1),(0,s.U)(U()),(0,o.K)(I(l))),f=({method:e,params:t,isShowError:l=!0,successMsg:a=null})=>(0,n.h)({url:`${d.Z.apiUrl()}/api/call_pg_func`,method:"POST",headers:C(),body:{method:e,params:t}}).pipe((0,i.q)(1),(0,s.U)(U({successMsg:a})),(0,o.K)(I(l))),w=({method:e,params:t,cb:l,successMsg:a})=>f({method:e,params:t,successMsg:a}).subscribe((e=>l?l(e.ok?e.result:null):null)),b=function({method:e,cb:t}){if("new"===this.id)this.item={id:-1},u().flattenDeep(this.flds).map((e=>{this.item[e.name]=e.default||null}));else{t=t||(e=>{this.item=e});const l=e=>p().compose(t,v(this))(e);w({method:e,params:{id:this.id},cb:l})}},k=function({method:e,itemForSaveMod:t={},resultModify:l,cb:a}){let i=Object.assign({},this.item);const s=u().flattenDeep(this.flds).map((({name:e})=>e));i.options||(i.options={}),i=Object.assign(i,t),this.optionsFlds&&this.optionsFlds.map((e=>i.options[e]=i[e]));const o=Object.assign({},u().pick(i,["id",...s,"options"]));let n=u().flattenDeep(this.flds).filter((e=>e.required&&!o[e.name]));n.length>0?n.map((e=>{this.$q.notify({color:"negative",position:"bottom",message:`не заполнено поле '${e.label}'`})})):f({method:e,params:o,successMsg:"изменения сохранены"}).subscribe((e=>{e.ok&&(-1===this.item.id&&this.$router.push(`${this.docUrl}/${e.result.id}`),l=l||(e=>e),this.item=p().compose(l,v(this))(e.result),this.$emit("updated",this.item),a&&a())}))},y=(e,t,l)=>{f({method:e,params:t}).subscribe((e=>{e.ok&&l&&l(e.result)}))},v=e=>t=>(e.optionsFlds&&e.optionsFlds.map((e=>t[e]=t.options[e])),t),q=(e={},t=!0)=>{let l=new URLSearchParams(window.location.search);Object.keys(e).forEach((function(a){t&&null!==e[a]?l.set(a,e[a]):l.delete(a)}));let a=window.location.protocol+"//"+window.location.host+window.location.pathname;l.toString().length>0&&(a=a+"?"+l.toString()),window.history.pushState({path:a},"",a)},x=e=>e?h()(e,"YYYY-MM-DDTHH:mm:ss").format("DD-MM-YYYY HH:mm"):null,Z=(e,t)=>e?h()(e,"YYYY-MM-DDTHH:mm:ss").locale("ru").format(t||"DD-MM-YYYY"):null,S=(e,t)=>(void 0===t&&(t=2),new Intl.NumberFormat("ru-RU",{maximumFractionDigits:t}).format(e)),D=e=>{r.Z.create({color:"positive",position:"bottom-right",message:e})},Q=e=>{r.Z.create({color:"negative",position:"top-right",message:e})},j=e=>{const t={task:"задачи",functional_requirement:"функциональные требования"};return Array.isArray(e)?e.map((e=>t[e])):t[e]},W=e=>{const t={task:"задачи",functional_requirement:"функциональные требования"};return Array.isArray(e)?e.map((e=>t[e])):t[e]},$={postApiRequest:g,postCallPgMethod:f,callPgMethod:y,pgCall:w,getDocItemById:b,saveItem:k,updateUrlQuery:q,formatPgDateTime:x,formatPgDate:Z,formatNumber:S,notifySuccess:D,notifyError:Q,_:u(),i18n_ctlg_filter_index:j,i18n_ctlg_order_by_index:W},C=()=>{let e={"Content-Type":"application/json"},t=localStorage.getItem(d.Z.appName);return t&&(e["Auth-token"]=t),e},U=({successMsg:e}={})=>t=>{if(t.response&&!t.response.ok)throw new Error(t.response.message);return t.response&&t.response.ok&&e&&r.Z.create({color:"positive",position:"bottom-right",message:e}),t.response},I=e=>t=>{const l=t.response?t.response.message:t.message;return e&&r.Z.create({color:"negative",position:"top-right",message:l}),(0,a.of)({ok:!1,message:l})}},5474:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>s});var a=l(30052),i=l.n(a);const s=async({app:e})=>{e.config.globalProperties.$axios=i()}},95769:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>i});var a=l(61764);const i=async({app:e})=>{e.config.globalProperties.$config=a.Z}},87452:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>_});var a=l(25429),i=l.n(a),s=l(72905),o=l(61764),n=l(91589),r=l(16249);let d=new s.X(null),c=new s.X(!1);const u=class{constructor(){i()(this,"getUser$",(()=>d)),i()(this,"login",(({user:e,auth_token:t}={})=>{e?(d.next(e),localStorage.setItem(o.Z.appName,e.auth_token)):(t||(t=localStorage.getItem(o.Z.appName)),localStorage.setItem(o.Z.appName,t),m(!0),n.Z.postApiRequest({url:"/api/current_user",params:{auth_token:t},isShowError:!1}).subscribe((e=>{e.ok?(d.next(e.result),localStorage.setItem(o.Z.appName,e.result.auth_token),m(!1)):(this.logout(),m(!1))})))})),i()(this,"logout",(()=>{d.next(null),localStorage.removeItem(o.Z.appName)})),i()(this,"getIsInLogingProcess",(()=>c))}},m=e=>{e?(r.Z.show({message:"авторизация"}),c.next(!0)):(r.Z.hide(),c.next(!1))},p=u,_=async({app:e})=>{e.config.globalProperties.$currentUser=new p}},38135:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>ct,i18n:()=>dt});var a=l(9262);const i={name:"ctlg request state",name_plural:"ctlg request state",name_plural_deleted:"deleted ctlg request state",title:"title"},s={name:"ctlg model state",name_plural:"ctlg model state",name_plural_deleted:"deleted ctlg model state",title:"title"},o={name:"ctlg model type",name_plural:"ctlg model type",name_plural_deleted:"deleted ctlg model type",title:"title"},n={name:"ctlg request priority",name_plural:"ctlg request priority",name_plural_deleted:"deleted ctlg request priority",title:"title"},r={name:"ctlg time type",name_plural:"ctlg time type",name_plural_deleted:"deleted ctlg time type",title:"title"},d={name_plural:"ctlg digital solution state",name_plural_deleted:"deleted ctlg digital solution state",title:"title",name:"ctlg digital solution state"},c={name_plural:"ctlg digital solution specialist role",name_plural_deleted:"deleted ctlg digital solution specialist role",title:"title",name:"ctlg digital solution specialist role"},u={name:"ctlg functional requirement state",name_plural:"ctlg functional requirement state",name_plural_deleted:"deleted ctlg functional requirement state",title:"title"},m={name_plural:"ctlg functional requirement specialist role",name_plural_deleted:"deleted ctlg functional requirement specialist role",title:"title",name:"ctlg functional requirement specialist role"},p={name_plural_deleted:"deleted ctlg task type",title:"title",name:"ctlg task type",name_plural:"ctlg task type"},_={name:"ctlg task state",name_plural:"ctlg task state",name_plural_deleted:"deleted ctlg task state",title:"title"},h={name:"ctlg task role",name_plural:"ctlg task role",name_plural_deleted:"deleted ctlg task role",title:"title"},g={name:"ctlg work state",name_plural:"ctlg work state",name_plural_deleted:"deleted ctlg work state",title:"title"},f={name:"ctlg work specialist role",name_plural:"ctlg work specialist role",name_plural_deleted:"deleted ctlg work specialist role",title:"title"},w={name:"ctlg bug state",name_plural:"ctlg bug state",name_plural_deleted:"deleted ctlg bug state",title:"title"},b={name:"ctlg contract state",name_plural:"ctlg contract state",name_plural_deleted:"deleted ctlg contract state",title:"title"},k={name:"ctlg technical task state",name_plural:"ctlg technical task state",name_plural_deleted:"deleted ctlg technical task state",title:"title"},y={name:"ctlg technical task work state",name_plural:"ctlg technical task work state",name_plural_deleted:"deleted ctlg technical task work state",title:"title"},v={name_plural:"ctlg completion act state",name_plural_deleted:"deleted ctlg completion act state",title:"title",name:"ctlg completion act state"},q={name:"ctlg invoice state",name_plural:"ctlg invoice state",name_plural_deleted:"deleted ctlg invoice state",title:"title"},x={where_str:"where str",name:"ctlg filter",name_plural:"ctlg filter",name_plural_deleted:"deleted ctlg filter",title:"title",user_table_id:"user table ",index:"index",is_default:"is default"},Z={title:"title",user_table_id:"user table ",index:"index",is_default:"is default",order_by_str:"order by str",name:"ctlg order by",name_plural:"ctlg order by",name_plural_deleted:"deleted ctlg order by"},S={name:"meeting",name_plural:"meeting",name_plural_deleted:"deleted meeting",title:"title"},D={name:"contract",name_plural:"contract",date:"date",description:"description",draft:"draft",signed:"signed",name_plural_deleted:"deleted contract",title:"title",state_id:"state ",counterparty_id:"counterparty "},Q={name_plural:"technical task",name_plural_deleted:"deleted technical task",title:"title",state_id:"state ",number:"number",amount:"amount",date:"date",name:"technical task",contract_id:"contract ",description:"description",draft:"draft",signed:"signed",work_state_id:"work state "},j={name:"counterparty",name_plural:"counterparty",name_plural_deleted:"deleted counterparty",title:"title",company_id:"company ",description:"description",requisites:"requisites"},W={name:"company",name_plural:"company",name_plural_deleted:"deleted company",title:"title"},$={name_plural_deleted:"deleted man",title:"title",last_name:"last name",company_id:"company ",position:"position",user_table_id:"user table ",name:"man",name_plural:"man",first_name:"first name",middle_name:"mdle name"},C={title:"title",files:"files",images:"images",name_plural:"system",name_plural_deleted:"deleted system",state:"state",description:"description",customer_id:"customer ",name:"system"},U={title:"title",state_id:"state ",customer_id:"customer ",system_id:"system ",time_estimate:"time estimate",result:"result",name_plural:"request",name_plural_deleted:"deleted request",priority_id:"priority ",images:"images",how_request_received:"how request received",name:"request",description:"description",files:"files",datetime_reciept:"datetime reciept",cost_estimate:"cost estimate"},I={name:"digital solution",name_plural:"digital solution",system_id:"system ",state_id:"state ",description_files:"description files",result_images:"result images",name_plural_deleted:"deleted digital solution",title:"title",description:"description",description_images:"description images",plan_date_end:"plan date end",fact_date_end:"fact date end",result:"result",result_files:"result files"},F={name_plural:"model",type_id:"type ",description_files:"description files",description_images:"description images",result:"result",name_plural_deleted:"deleted model",state_id:"state ",system_id:"system ",digital_solution_id:"digital solution ",name:"model",title:"title",result_images:"result images",plan_end_date:"plan end date",fact_end_date:"fact end date",description:"description",result_files:"result files"},P={title:"title",files_for_dev:"files for dev",result_files:"result files",system_id:"system ",digital_solution_id:"digital solution ",fact_end_date:"fact end date",description_images:"description images",images_for_dev:"images for dev",result:"result",description_for_dev:"description for dev",result_images:"result images",description_files:"description files",name:"functional requirement",name_plural:"functional requirement",name_plural_deleted:"deleted functional requirement",state_id:"state ",plan_end_date:"plan end date",description:"description"},V={state_id:"state ",date_transfer:"date transfer",date_plan_paid:"date plan pa",date_paid:"date pa",invoice_file:"invoice file",name_plural:"invoice",amount:"amount",title:"title",technical_task_id:"technical task ",name:"invoice",name_plural_deleted:"deleted invoice"},T={name:"payment",name_plural_deleted:"deleted payment",amount:"amount",payment_order:"payment order",description:"description",name_plural:"payment",title:"title",payment_date:"payment date",payment_receipt_date:"payment receipt date",invoice_id:"invoice "},N={name_plural:"completion act",name_plural_deleted:"deleted completion act",signed:"signed",name:"completion act",date:"date",state_id:"state ",technical_task_id:"technical task ",draft:"draft",title:"title"},L={name_plural_deleted:"deleted sprint",title:"title",start_date:"start date",end_date:"end date",target:"target",name:"sprint",name_plural:"sprint"},z={digital_solution_id:"digital solution ",plan_end_date:"plan end date",name_plural_deleted:"deleted task",system_id:"system ",process:"process",functional_requirement_id:"functional requirement ",title:"title",fact_end_date:"fact end date",name_plural:"task",estimate:"estimate",model_id:"model ",process_files:"process files",process_images:"process images",result_files:"result files",files:"files",name:"task",state_id:"state ",executor_id:"executor ",description:"description",type_id:"type ",needs_discusion:"needs discusion",worked_time:"worked time",images:"images",result:"result",result_images:"result images",bug_id:"bug ",sprint_id:"sprint "},M={name:"work",name_plural:"work",name_plural_deleted:"deleted work",title:"title",state_id:"state ",description:"description"},A={customer_id:"customer ",plan_start_date:"plan start date",plan_end_date:"plan end date",state_id:"state ",description:"description",request_id:"request ",name_plural:"customer task",name_plural_deleted:"deleted customer task",digital_solution_id:"digital solution ",name:"customer task",files:"files",images:"images",system_id:"system ",functional_requirement_id:"functional requirement ",bug_id:"bug ",result:"result",title:"title"},O={system_id:"system ",description:"description",result_images:"result images",name_plural:"bug",state_id:"state ",fact_end_date:"fact end date",images:"images",result_files:"result files",name_plural_deleted:"deleted bug",title:"title",paused:"paused",files:"files",name:"bug",functional_requirement_id:"functional requirement ",plan_end_date:"plan end date",result:"result"},R={task_id:"task ",specialist_id:"specialist ",role_id:"role ",description:"description",author_id:"author ",name:"task specialist link",name_plural:"task specialist link",name_plural_deleted:"deleted task specialist link"},E={name:"system customer agent link",name_plural:"system customer agent link",name_plural_deleted:"deleted system customer agent link",system_id:"system ",customer_agent_id:"customer agent ",description:"description",author_id:"author "},B={request_id:"request ",customer_agent_id:"customer agent ",description:"description",author_id:"author ",name:"request customer agent link",name_plural:"request customer agent link",name_plural_deleted:"deleted request customer agent link"},Y={author_id:"author ",name:"functional requirement customer agent link",name_plural:"functional requirement customer agent link",name_plural_deleted:"deleted functional requirement customer agent link",functional_requirement_id:"functional requirement ",customer_agent_id:"customer agent ",description:"description"},H={name:"digital solution specialist link",name_plural:"digital solution specialist link",name_plural_deleted:"deleted digital solution specialist link",digital_solution_id:"digital solution ",specialist_id:"specialist ",role_id:"role ",description:"description",author_id:"author "},K={specialist_id:"specialist ",role_id:"role ",description:"description",author_id:"author ",name:"functional requirement specialist link",name_plural:"functional requirement specialist link",name_plural_deleted:"deleted functional requirement specialist link",functional_requirement_id:"functional requirement "},G={name_plural_deleted:"deleted digital solution customer agent link",digital_solution_id:"digital solution ",customer_agent_id:"customer agent ",description:"description",author_id:"author ",name:"digital solution customer agent link",name_plural:"digital solution customer agent link"},J={bug_id:"bug ",customer_agent_id:"customer agent ",description:"description",author_id:"author ",name:"bug customer agent link",name_plural:"bug customer agent link",name_plural_deleted:"deleted bug customer agent link"},X={name_plural_deleted:"deleted work specialist link",work_id:"work ",specialist_id:"specialist ",description:"description",author_id:"author ",role_id:"role ",name:"work specialist link",name_plural:"work specialist link"},ee={name:"work task link",name_plural:"work task link",name_plural_deleted:"deleted work task link",work_id:"work ",task_id:"task ",description:"description"},te={author_id:"author ",name:"company man link",name_plural:"company man link",name_plural_deleted:"deleted company man link",company_id:"company ",man_id:"man ",description:"description"},le={name:"time",title:"title",minute:"minute",specialist_id:"specialist ",type_id:"type ",digital_solution_id:"digital solution ",name_plural:"time",name_plural_deleted:"deleted time",task_id:"task "},ae={name:"comment",name_plural:"comment",name_plural_deleted:"deleted comment",title:"title"},ie={file:"file",name_plural:"news from dima",name_plural_deleted:"deleted news from dima",title:"title",familiarized:"familiarized",description:"description",image:"image",conclusion:"conclusion",name:"news from dima"},se={message:{files:"files",ok:"ok",save:"save",cancel:"cancel",delete:"delete",edit:"edit",send:"send",file:"file",photo:"photo"},auth:{check_user_email_message:"The link is no longer active. Possible reasons: <br/> <br/> - Your email has already been successfully confirmed - try to enter the system with your username and password <br/> - The email address has expired. Need to register again",registration:"registration",password_recovery_message:"Check the email specified in the registration. A letter should come with a link for password recovery.",authorization:"authorization",password_recovery:"password recovery",password_recovery_go_to_login:"go to authorization",forgot_password:"forgot password",invalid_email:'"email" field is filled incorrectly',password:"password",password_repeat:"repeat password",register_message:"Check the email specified in the registration. A letter should come to confirm the mailing address.",invalid_password_must_be_more_7:"password must be more than 7 characters",user_not_found:"user not found",wrong_password:"wrong password",login:"login",password_recovery_success_message:"password changed successfully",invalid_first_name:'you must fill in the "first name" field',invalid_last_name:'you must fill in the "last name" field',invalid_user_already_exist:"user with this email is already registered",register:"register",invalid_password_wrong_repeat:"re-entered password does not match the first option"},profile:{first_name:"first name",phone:"phone",avatar:"photo",exit:"exit",breadcrumb_label:"Profile edit",last_name:"last name"},user:{name_plural:"users",roles:"roles",state:"state",grade:"grade",role_admin:"admin",role_student:"user",name_plural_deleted:"deleted users",first_name:"first name",phone:"phone",photo:"photo",state_waiting_auth:"waiting auth",last_name:"last name",email:"email",state_working:"working",state_fired:"fired"},menu:{contract:"contract",bug:"bug",ctlg_functional_requirement_specialist_role:"ctlg functional requirement specialist role",ctlg_technical_task_work_state:"ctlg technical task work state",ctlg_order_by:"ctlg order by",technical_task:"technical task",customer_task:"customer task",ctlg_work_state:"ctlg work state",functional_requirement_specialist_link:"functional requirement specialist link",user:"users",ctlg_task_type:"ctlg task type",news_from_dima:"news from dima",ctlg_digital_solution_state:"ctlg digital solution state",ctlg_functional_requirement_state:"ctlg functional requirement state",ctlg_filter:"ctlg filter",digital_solution_specialist_link:"digital solution specialist link",ctlg_work_specialist_role:"ctlg work specialist role",system:"system",sprint:"sprint",task:"task",bug_customer_agent_link:"bug customer agent link",ctlg_technical_task_state:"ctlg technical task state",digital_solution:"digital solution",company_man_link:"company man link",work_task_link:"work task link",ctlg_model_state:"ctlg model state",ctlg_model_type:"ctlg model type",ctlg_bug_state:"ctlg bug state",ctlg_invoice_state:"ctlg invoice state",functional_requirement_customer_agent_link:"functional requirement customer agent link",completion_act:"completion act",work:"work",digital_solution_customer_agent_link:"digital solution customer agent link",ctlg_time_type:"ctlg time type",ctlg_task_state:"ctlg task state",company:"company",functional_requirement:"functional requirement",payment:"payment",comment:"comment",ctlg_request_state:"ctlg request state",model:"model",system_customer_agent_link:"system customer agent link",ctlg_digital_solution_specialist_role:"ctlg digital solution specialist role",ctlg_contract_state:"ctlg contract state",request:"request",work_specialist_link:"work specialist link",ctlg_request_priority:"ctlg request priority",ctlg_task_role:"ctlg task role",meeting:"meeting",task_specialist_link:"task specialist link",ctlg_completion_act_state:"ctlg completion act state",counterparty:"counterparty",request_customer_agent_link:"request customer agent link",time:"time",man:"man",invoice:"invoice"},ctlg_request_state:i,ctlg_model_state:s,ctlg_model_type:o,ctlg_request_priority:n,ctlg_time_type:r,ctlg_digital_solution_state:d,ctlg_digital_solution_specialist_role:c,ctlg_functional_requirement_state:u,ctlg_functional_requirement_specialist_role:m,ctlg_task_type:p,ctlg_task_state:_,ctlg_task_role:h,ctlg_work_state:g,ctlg_work_specialist_role:f,ctlg_bug_state:w,ctlg_contract_state:b,ctlg_technical_task_state:k,ctlg_technical_task_work_state:y,ctlg_completion_act_state:v,ctlg_invoice_state:q,ctlg_filter:x,ctlg_order_by:Z,meeting:S,contract:D,technical_task:Q,counterparty:j,company:W,man:$,system:C,request:U,digital_solution:I,model:F,functional_requirement:P,invoice:V,payment:T,completion_act:N,sprint:L,task:z,work:M,customer_task:A,bug:O,task_specialist_link:R,system_customer_agent_link:E,request_customer_agent_link:B,functional_requirement_customer_agent_link:Y,digital_solution_specialist_link:H,functional_requirement_specialist_link:K,digital_solution_customer_agent_link:G,bug_customer_agent_link:J,work_specialist_link:X,work_task_link:ee,company_man_link:te,time:le,comment:ae,news_from_dima:ie},oe={name:"статус запроса",name_plural:"Статусы запроса",name_plural_deleted:"удаленные Статусы запроса",title:"название"},ne={name:"статус модели",name_plural:"Статусы моделей",name_plural_deleted:"удаленные Статусы моделей",title:"название"},re={name_plural:"Типы моделей",name_plural_deleted:"удаленные Типы моделей",title:"название",name:"тип модели"},de={name:"приоритет запроса",name_plural:"Приоритеты запросов",name_plural_deleted:"удаленные Приоритеты запросов",title:"название"},ce={name:"тип времени",name_plural:"Типы времени",name_plural_deleted:"удаленные Типы времени",title:"название"},ue={name:"статус цифрового решения",name_plural:"Статусы цифровых решений",name_plural_deleted:"удаленные Статусы цифровых решений",title:"название"},me={name:"роль специалиста в цифровом решении",name_plural:"Роли специалистов в цифровых решениях",name_plural_deleted:"удаленные Роли специалистов в цифровых решениях",title:"название"},pe={name:"статус функционального требования",name_plural:"Статусы функциональных требований",name_plural_deleted:"удаленные Статусы функциональных требований",title:"название"},_e={name_plural_deleted:"удаленные Роли специалистов в функциональных требованиях",title:"название",name:"роль специалиста в функциональном требовании",name_plural:"Роли специалистов в функциональных требованиях"},he={name_plural_deleted:"удаленные Типы задач",title:"название",name:"тип задачи",name_plural:"Типы задач"},ge={name_plural:"Статусы задач",name_plural_deleted:"удаленные Статусы задач",title:"название",name:"статус задачи"},fe={name:"роль в задаче",name_plural:"Роли в задачах",name_plural_deleted:"удаленные Роли в задачах",title:"название"},we={name_plural_deleted:"удаленные Статусы дел",title:"название",name:"статус дела",name_plural:"Статусы дел"},be={name:"роль специалиста в деле",name_plural:"Роли специалистов в делах",name_plural_deleted:"удаленные Роли специалистов в делах",title:"название"},ke={name_plural:"Статусы багов",name_plural_deleted:"удаленные Статусы багов",title:"название",name:"статус бага"},ye={title:"название",name:"статус договора",name_plural:"Статусы договоров",name_plural_deleted:"удаленные Статусы договоров"},ve={name:"статус технического задания",name_plural:"Статусы технических заданий",name_plural_deleted:"удаленные Статусы технических заданий",title:"название"},qe={name:"статус работ по ТЗ",name_plural:"Статусы работ по ТЗ",name_plural_deleted:"удаленные Статусы работ по ТЗ",title:"название"},xe={name:"статус акта",name_plural:"Статусы актов",name_plural_deleted:"удаленные Статусы актов",title:"название"},Ze={name:"статус счёта",name_plural:"Статусы счетов",name_plural_deleted:"удаленные Статусы счетов",title:"название"},Se={name_plural:"Фильтры",name_plural_deleted:"удаленные Фильтры",title:"название",user_table_id:"пользователь",index:"список",is_default:"по умолчанию",where_str:"условия фильтра",name:"фильтр"},De={user_table_id:"пользователь",index:"список",is_default:"по умолчанию",order_by_str:"условия сортировки",name:"сортировка",name_plural:"Сортировки",name_plural_deleted:"удаленные Сортировки",title:"название"},Qe={name:"встреча",name_plural:"Встречи",name_plural_deleted:"удаленные Встречи",title:"название"},je={name:"договор",name_plural_deleted:"удаленные Договоры",date:"дата",description:"описание",signed:"подписанный",name_plural:"Договоры",title:"название",state_id:"статус",counterparty_id:"контрагент",draft:"черновик"},We={work_state_id:"статус работ по ТЗ",draft:"черновик",name:"техническое задание",name_plural_deleted:"удаленные Технические задания",title:"название",state_id:"статус",contract_id:"договор",description:"описание",signed:"подписанное",name_plural:"Технические задания",number:"номер",amount:"сумма",date:"дата подписания ТЗ"},$e={name:"контрагент",name_plural:"Контрагенты",name_plural_deleted:"удаленные Контрагенты",title:"название",company_id:"компания",description:"описание",requisites:"реквизиты"},Ce={name_plural:"Компании",name_plural_deleted:"удаленные Компании",title:"название",name:"компания"},Ue={last_name:"фамилия",first_name:"имя",middle_name:"отчество",company_id:"компания",position:"должность",name:"контакт",name_plural_deleted:"удаленные Контакты",title:"название",user_table_id:"пользователь",name_plural:"Контакты"},Ie={files:"файлы",customer_id:"заказчик",name_plural_deleted:"удаленные Системы",state:"статус",title:"название",description:"описание",images:"изображения",name:"система",name_plural:"Системы"},Fe={title:"название",state_id:"статус",images:"изображения",datetime_reciept:"дата и время получения запроса",customer_id:"заказчик",result:"результат",name_plural:"Запросы",system_id:"система",time_estimate:"оценка времени",cost_estimate:"оценка стоимости",priority_id:"приоритет",name_plural_deleted:"удаленные Запросы",description:"описание",name:"запрос",how_request_received:"как получен запрос",files:"файлы"},Pe={title:"название",system_id:"система",description_files:"файлы описания",fact_date_end:"фактическая дата завершения",name:"цифровое решение",result_files:"файлы результата",state_id:"статус",description:"описание",result_images:"изображения результата",name_plural:"Цифровые решения",name_plural_deleted:"удаленные Цифровые решения",description_images:"изображения описания",plan_date_end:"планируемая дата завершения",result:"результат"},Ve={name_plural_deleted:"удаленные Модели",system_id:"система",digital_solution_id:"цифровое решение",plan_end_date:"планируемая дата завершения",result:"результат",name_plural:"Модели",type_id:"тип",description:"описание",description_files:"файлы описания",result_files:"файлы результата",title:"название",fact_end_date:"фактическая дата завершения",result_images:"изображения результата",name:"модель",state_id:"статус",description_images:"изображения описания"},Te={name_plural_deleted:"удаленные Функциональные требования",title:"название",system_id:"система",digital_solution_id:"цифровое решение",description:"описание",files_for_dev:"файлы для разработки",result_images:"изображения результата",name:"функциональное требование",name_plural:"Функциональные требования",state_id:"статус",plan_end_date:"плановая дата завершения",description_images:"изображения описания",fact_end_date:"фактическая дата завершения",description_files:"файлы описания",images_for_dev:"изображения для разработки",result:"результат",description_for_dev:"описание для разработки",result_files:"файлы результата"},Ne={name_plural_deleted:"удаленные Счета",title:"название",date_paid:"дата получения оплаты",invoice_file:"счёт",name:"счёт",amount:"сумма",state_id:"статус",technical_task_id:"техническое задание",date_transfer:"дата выставления",date_plan_paid:"планируемая дата оплаты",name_plural:"Счета"},Le={name_plural:"Платежи",amount:"размер платежа",payment_date:"дата платежа",payment_receipt_date:"дата поступления платежа",invoice_id:"счёт",name:"платёж",name_plural_deleted:"удаленные Платежи",title:"название",payment_order:"платёжное поручение",description:"описание"},ze={state_id:"статус",name:"акт выполненных работ",name_plural:"Акты выполненных работ",name_plural_deleted:"удаленные Акты выполненных работ",title:"название",date:"дата подписи",technical_task_id:"техническое задание",draft:"черновик",signed:"подписанный"},Me={title:"название",start_date:"дата начала",end_date:"дата завершения",target:"цель спринта",name:"спринт",name_plural:"Спринты",name_plural_deleted:"удаленные Спринты"},Ae={needs_discusion:"требует обсуждения",sprint_id:"спринт",fact_end_date:"фактическая дата завершения",name_plural:"Задачи",title:"название",state_id:"статус",bug_id:"баг",type_id:"тип задачи",result_images:"изображения результата",model_id:"модель",result_files:"файлы результата",worked_time:"затрачено",description:"описание",name:"задача",executor_id:"исполнитель",process_images:"изображения результата",plan_end_date:"плановая дата завершения",process:"процесс",name_plural_deleted:"удаленные Задачи",functional_requirement_id:"функциональное требование",files:"файлы",process_files:"файлы результата",system_id:"система",digital_solution_id:"цифровое решение",result:"результат",estimate:"оценка",images:"изображения"},Oe={name:"дело",name_plural:"Дела",name_plural_deleted:"удаленные Дела",title:"название",state_id:"статус",description:"описание"},Re={title:"название",description:"описание",images:"изображения",request_id:"запрос",functional_requirement_id:"функциональное требование",plan_start_date:"плановая дата начала",digital_solution_id:"цифровое решение",result:"результат",name:"задача заказчика",name_plural:"Задачи заказчиков",files:"файлы",customer_id:"заказчик",system_id:"система",plan_end_date:"плановая дата завершения",name_plural_deleted:"удаленные Задачи заказчиков",state_id:"статус",bug_id:"баг"},Ee={images:"изображения",result_images:"изображения результата",name:"баг",paused:"на паузе",fact_end_date:"фактическая дата завершения",plan_end_date:"плановая дата завершения",description:"описание",result_files:"файлы результата",system_id:"система",result:"результат",state_id:"статус",functional_requirement_id:"функциональное требование",files:"файлы",name_plural:"Баги",name_plural_deleted:"удаленные Баги",title:"название"},Be={name_plural:"Участники задач",name_plural_deleted:"удаленные Участники задач",task_id:"id задачи",specialist_id:"специалист",role_id:"роль",description:"описание",author_id:"автор",name:"участник задачи"},Ye={author_id:"автор",name:"связь системы и представителя заказчика",name_plural:"Связи систем и представителей заказчиков",name_plural_deleted:"удаленные Связи систем и представителей заказчиков",system_id:"система",customer_agent_id:"представитель заказчика",description:"описание"},He={description:"описание",author_id:"автор",name:"связь запроса и представителя заказчика",name_plural:"Связи запросов и представителей заказчиков",name_plural_deleted:"удаленные Связи запросов и представителей заказчиков",request_id:"запрос",customer_agent_id:"представитель заказчика"},Ke={description:"описание",author_id:"автор",name:"связь функционального требования и представителя заказчика",name_plural:"Связи функциональных требований и представителей заказчиков",name_plural_deleted:"удаленные Связи функциональных требований и представителей заказчиков",functional_requirement_id:"функциональное требование",customer_agent_id:"представитель заказчика"},Ge={name:"связь цифрового решения и специалиста",name_plural:"Связи цифровых решений и специалиста",name_plural_deleted:"удаленные Связи цифровых решений и специалиста",digital_solution_id:"id цифрового решения",specialist_id:"специалист",role_id:"роль",description:"описание",author_id:"автор"},Je={name_plural:"Связи цифровых решений и специалистов",name_plural_deleted:"удаленные Связи цифровых решений и специалистов",functional_requirement_id:"id функционального требования",specialist_id:"специалист",role_id:"роль",description:"описание",author_id:"автор",name:"связь функционального требования и специалиста"},Xe={author_id:"автор",name:"связь цифрового решения и заказчика",name_plural:"Связи цифровых решений и заказчиков",name_plural_deleted:"удаленные Связи цифровых решений и заказчиков",digital_solution_id:"id цифрового решения",customer_agent_id:"представитель заказчика",description:"описание"},et={bug_id:"баг",customer_agent_id:"представитель заказчика",description:"описание",author_id:"автор",name:"связь бага и представителя заказчика",name_plural:"Связи багов и представителей заказчиков",name_plural_deleted:"удаленные Связи багов и представителей заказчиков"},tt={work_id:"дело",specialist_id:"специалист",description:"описание",author_id:"автор",role_id:"роль",name:"участник дела",name_plural:"Участники дел",name_plural_deleted:"удаленные Участники дел"},lt={work_id:"дело",task_id:"задача",description:"описание",name:"связь дела и задачи",name_plural:"Связи дел и цифровых решений",name_plural_deleted:"удаленные Связи дел и цифровых решений"},at={name_plural_deleted:"удаленные Связи компаний и людей",company_id:"компания",man_id:"человек",description:"описание",author_id:"автор",name:"связь компании и человека",name_plural:"Связи компаний и людей"},it={title:"название",minute:"кол-во минут",specialist_id:"специалист",type_id:"тип времени",task_id:"задача",name:"время",name_plural:"Время",name_plural_deleted:"удаленные Время",digital_solution_id:"цифровое решение"},st={name:"комментарий",name_plural:"Комментарии",name_plural_deleted:"удаленные Комментарии",title:"название"},ot={conclusion:"выводы",name_plural_deleted:"удаленные Новости от Димы",title:"название",familiarized:"ознакомился",description:"описание",file:"файлы",name:"новость от Димы",name_plural:"Новости от Димы",image:"картинки"},nt={message:{send:"отправить",file:"файл",files:"файлы",ok:"ok",save:"сохранить",cancel:"отмена",delete:"удалить",edit:"редактировать",photo:"фото"},auth:{invalid_password_must_be_more_7:"пароль должен быть больше 7 знаков",login:"войти",password_recovery_message:"Проверьте указанный в регистрации email. Должно прийти письмо с ссылкой для восстановления пароля.",password_recovery_success_message:"пароль успешно изменен",invalid_email:'поле "email" заполнено неверно',wrong_password:"неверный пароль",password:"пароль",password_recovery_go_to_login:"перейти к авторизации",register:"зарегистрироваться",invalid_last_name:'необходимо заполнить поле "фамилия"',check_user_email_message:"Ссылка уже неактивна. Возможные причины: <br/><br/>- Ваш email уже успешно подтвержден - попробуйте войти в систему с логином и паролем <br/>- Истекло время подтверждения почтового адреса. Нужно регистрироваться снова",password_repeat:"повторите пароль",register_message:"Проверьте указанный в регистрации email. Должно прийти письмо для подтверждения почтового адреса.",invalid_first_name:'необходимо заполнить поле "имя"',invalid_user_already_exist:"пользователь с таким email уже зарегестрирован",invalid_password_wrong_repeat:"повторно введенный пароль не совпадает с первым вариантом",user_not_found:"пользователь с таким email не найден",registration:"регистрация",authorization:"авторизация",password_recovery:"восстановление пароля",forgot_password:"забыли пароль"},profile:{breadcrumb_label:"Редактирование профиля",last_name:"фамилия",first_name:"имя",phone:"телефон",avatar:"фото",exit:"выйти"},user:{state_fired:"уволен",name_plural:"пользователи",first_name:"имя",roles:"роли",state:"статус",photo:"фото",grade:"должность",role_admin:"админ",state_working:"работает",role_specialist:"специалист",name_plural_deleted:"удаленные пользователи",last_name:"фамилия",email:"email",role_student:"сотрудник",state_waiting_auth:"ожидает авторизации",phone:"телефон",role_customer:"заказчик"},menu:{ctlg_model_type:"Типы моделей",ctlg_functional_requirement_specialist_role:"Роли специалистов в функциональных требованиях",ctlg_technical_task_work_state:"Статусы работ по ТЗ",man:"Контакты",digital_solution:"Цифровые решения",news_from_dima:"Новости от Димы",ctlg_bug_state:"Статусы багов",ctlg_invoice_state:"Статусы счетов",task:"Задачи",work:"Дела",customer_task:"Задачи заказчиков",request_customer_agent_link:"Связи запросов и представителей заказчиков",user:"пользователи",ctlg_model_state:"Статусы моделей",meeting:"Встречи",contract:"Договоры",company_man_link:"Связи компаний и людей",functional_requirement_customer_agent_link:"Связи функциональных требований и представителей заказчиков",digital_solution_specialist_link:"Связи цифровых решений и специалиста",work_task_link:"Связи дел и цифровых решений",comment:"Комментарии",model:"Модели",functional_requirement:"Функциональные требования",ctlg_request_state:"Статусы запроса",ctlg_time_type:"Типы времени",ctlg_work_state:"Статусы дел",ctlg_completion_act_state:"Статусы актов",ctlg_order_by:"Сортировки",system:"Системы",ctlg_digital_solution_specialist_role:"Роли специалистов в цифровых решениях",company:"Компании",invoice:"Счета",bug:"Баги",system_customer_agent_link:"Связи систем и представителей заказчиков",payment:"Платежи",ctlg_work_specialist_role:"Роли специалистов в делах",completion_act:"Акты выполненных работ",ctlg_request_priority:"Приоритеты запросов",technical_task:"Технические задания",time:"Время",ctlg_technical_task_state:"Статусы технических заданий",ctlg_filter:"Фильтры",counterparty:"Контрагенты",sprint:"Спринты",functional_requirement_specialist_link:"Связи цифровых решений и специалистов",digital_solution_customer_agent_link:"Связи цифровых решений и заказчиков",ctlg_digital_solution_state:"Статусы цифровых решений",ctlg_task_type:"Типы задач",bug_customer_agent_link:"Связи багов и представителей заказчиков",ctlg_task_state:"Статусы задач",ctlg_functional_requirement_state:"Статусы функциональных требований",work_specialist_link:"Участники дел",request:"Запросы",ctlg_task_role:"Роли в задачах",ctlg_contract_state:"Статусы договоров",task_specialist_link:"Участники задач"},ctlg_request_state:oe,ctlg_model_state:ne,ctlg_model_type:re,ctlg_request_priority:de,ctlg_time_type:ce,ctlg_digital_solution_state:ue,ctlg_digital_solution_specialist_role:me,ctlg_functional_requirement_state:pe,ctlg_functional_requirement_specialist_role:_e,ctlg_task_type:he,ctlg_task_state:ge,ctlg_task_role:fe,ctlg_work_state:we,ctlg_work_specialist_role:be,ctlg_bug_state:ke,ctlg_contract_state:ye,ctlg_technical_task_state:ve,ctlg_technical_task_work_state:qe,ctlg_completion_act_state:xe,ctlg_invoice_state:Ze,ctlg_filter:Se,ctlg_order_by:De,meeting:Qe,contract:je,technical_task:We,counterparty:$e,company:Ce,man:Ue,system:Ie,request:Fe,digital_solution:Pe,model:Ve,functional_requirement:Te,invoice:Ne,payment:Le,completion_act:ze,sprint:Me,task:Ae,work:Oe,customer_task:Re,bug:Ee,task_specialist_link:Be,system_customer_agent_link:Ye,request_customer_agent_link:He,functional_requirement_customer_agent_link:Ke,digital_solution_specialist_link:Ge,functional_requirement_specialist_link:Je,digital_solution_customer_agent_link:Xe,bug_customer_agent_link:et,work_specialist_link:tt,work_task_link:lt,company_man_link:at,time:it,comment:st,news_from_dima:ot},rt={"en-US":se,"ru-RU":nt},dt=(0,a.o)({locale:"ru-RU",messages:rt}),ct=({app:e})=>{e.use(dt)}},8739:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>Ea});var a=l(34182);const i={class:"row"},s={class:"text-grey-8 q-gutter-xs"},o={class:"text-grey-8 q-gutter-xs"},n={class:"row justify-center q-my-md"};function r(e,t,l,r,d,c){const u=(0,a.up)("q-item-label"),m=(0,a.up)("q-item-section"),p=(0,a.up)("q-btn"),_=(0,a.up)("q-item"),h=(0,a.up)("q-list"),g=(0,a.up)("q-menu"),f=(0,a.up)("q-icon"),w=(0,a.up)("q-input"),b=(0,a.up)("q-spinner-dots"),k=(0,a.up)("q-infinite-scroll"),y=(0,a.up)("q-page-sticky");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",{class:(0,a.C_)(c.colClassComputed)},[(0,a.Wm)(k,{onLoad:c.itemListLoad,offset:250,ref:"infiniteScroll"},{loading:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a.Wm)(b,{color:"primary",size:"40px"})])])),default:(0,a.w5)((()=>[(0,a.Wm)(h,{bordered:"",class:"rounded-borders",separator:""},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{caption:"",class:"text-capitalize"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(c.computedListTitle),1)])),_:1})])),_:1}),(0,a.Wm)(m,{top:"",side:""},{default:(0,a.w5)((()=>[(0,a._)("div",s,[l.readonly||!l.newDocUrl&&!l.newDocEventOnly?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[l.newDocEventOnly?((0,a.wg)(),(0,a.j4)(p,{key:1,size:"12px",flat:"",dense:"",round:"",icon:"add",onClick:t[0]||(t[0]=t=>e.$emit("clickAddBtn"))})):((0,a.wg)(),(0,a.j4)(p,{key:0,size:"12px",flat:"",dense:"",round:"",icon:"add",onClick:c.openNewDoc},null,8,["onClick"]))],64)),(0,a.WI)(e.$slots,"addBtnsSlot"),l.searchFldName?((0,a.wg)(),(0,a.j4)(p,{key:1,size:"12px",flat:"",dense:"",round:"",icon:"search",onClick:c.toggleSearchFld},null,8,["onClick"])):(0,a.kq)("",!0),l.listSortData?((0,a.wg)(),(0,a.j4)(p,{key:2,size:"12px",flat:"",dense:"",round:"",icon:"expand_less"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{"auto-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{dense:"",style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.listSortData,(e=>((0,a.wg)(),(0,a.j4)(_,{clickable:"",key:e.value},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{onClick:t=>c.changeItemList({order_by:`${e.value}`})},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.title),1)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})):(0,a.kq)("",!0),l.listSortData?((0,a.wg)(),(0,a.j4)(p,{key:3,size:"12px",flat:"",dense:"",round:"",icon:"expand_more"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{"auto-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{dense:"",style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.listSortData,(e=>((0,a.wg)(),(0,a.j4)(_,{clickable:"",key:e.value},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{onClick:t=>c.changeItemList({order_by:`${e.value} desc`})},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.title),1)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})):(0,a.kq)("",!0),l.listFilterData?((0,a.wg)(),(0,a.j4)(p,{key:4,size:"12px",flat:"",dense:"",round:"",icon:"filter_list"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{"auto-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{dense:"",style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.listFilterData,(e=>((0,a.wg)(),(0,a.j4)(_,{clickable:"",key:e.title},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{onClick:t=>c.changeItemList(e.value)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.title),1)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})):(0,a.kq)("",!0)])])),_:3})])),_:3}),d.isShowSearchfld&&l.searchFldName?((0,a.wg)(),(0,a.j4)(_,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{top:""},{default:(0,a.w5)((()=>[(0,a._)("div",o,[(0,a.Wm)(w,{ref:"searchInput",dense:"",filled:"",modelValue:d.searchTxt,"onUpdate:modelValue":t[2]||(t[2]=e=>d.searchTxt=e),class:"q-ml-md"},{append:(0,a.w5)((()=>[""===d.searchTxt?((0,a.wg)(),(0,a.j4)(f,{key:0,name:"search"})):((0,a.wg)(),(0,a.j4)(f,{key:1,name:"clear",class:"cursor-pointer",onClick:t[1]||(t[1]=e=>d.searchTxt="")}))])),_:1},8,["modelValue"])])])),_:1})])),_:1})):(0,a.kq)("",!0),(0,a.WI)(e.$slots,"addFilterSlot"),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.itemList,(t=>((0,a.wg)(),(0,a.j4)(_,{key:t.id},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"listItem",{item:t})])),_:2},1024)))),128))])),_:3})])),_:3},8,["onLoad"])],2),l.readonly||!l.newDocUrl&&!l.newDocEventOnly?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(y,{key:0,position:"bottom-right",offset:[18,18]},{default:(0,a.w5)((()=>[l.newDocEventOnly?((0,a.wg)(),(0,a.j4)(p,{key:1,fab:"",icon:"add",color:"accent",onClick:t[3]||(t[3]=t=>e.$emit("clickAddBtn"))})):((0,a.wg)(),(0,a.j4)(p,{key:0,fab:"",icon:"add",color:"accent",onClick:c.openNewDoc},null,8,["onClick"]))])),_:1}))])}l(10071),l(66016);var d=l(49405),c=l(88603),u=l.n(c);const m={props:["listTitle","listDeletedTitle","pgMethod","listSortData","listFilterData","searchFldName","newDocEventOnly","newDocUrl","isOpenNewInTab","urlQueryParams","ext","readonly","colClass","startFilter"],computed:{computedListTitle(){return this.listParams.deleted?this.listDeletedTitle:this.listTitle},colClassComputed(){return this.colClass||"col-xs-12 col-sm-12 col-md-6 q-gutter-md q-pt-md"}},data(){return{searchTxt:"",isShowSearchfld:!1,itemList:[],listParams:{page:0,per_page:10,deleted:!1,order_by:"created_at desc"},isUrlQueryProcessed:!1}},methods:{toggleSearchFld(){this.isShowSearchfld=!this.isShowSearchfld,this.isShowSearchfld||(this.listParams[this.searchFldName]=""),this.isShowSearchfld&&this.$nextTick((()=>{this.$refs.searchInput.focus()}))},itemListLoad(e,t){if(!this.isUrlQueryProcessed&&(this.isUrlQueryProcessed=!0,this.urlQueryParams)){const e=new URLSearchParams(window.location.search);this.urlQueryParams.map((t=>{"string"===typeof t&&e.has(t)&&(this.listParams[t]=e.get(t))}))}this.loadList({list:this.itemList,params:this.listParams,done:t})},loadList({list:e=[],params:t={},done:l}){this.listParams.page++,this.$utils.updateUrlQuery(u().omit(t,["per_page","page"])),this.$utils.postCallPgMethod({method:this.pgMethod,params:Object.assign(t,this.ext?this.ext:{})}).subscribe((t=>{t.ok&&t.result&&t.result.length>0?(t.result.map((t=>e.push(t))),this.$emit("updateCount",e.length),l&&l()):l&&l(!0)}))},reloadList(){this.itemList=[],this.listParams.page=0,this.$refs.infiniteScroll.poll(),this.$refs.infiniteScroll.resume(),this.loadList({list:this.itemList,params:this.listParams}),this.$forceUpdate()},reloadListDebounce(){this.reloadList()},changeItemList(e){this.listParams=Object.assign(this.listParams,e),this.reloadList()},openNewDoc(){this.isOpenNewInTab?window.open("/"+this.newDocUrl,"_blank"):this.$router.push(this.newDocUrl)}},watch:{searchTxt(e){this.searchFldName&&(0===e.length||e.length>3)&&(this.listParams[this.searchFldName]=e,this.reloadListDebounce())}},mounted(){this.startFilter&&(this.listParams=Object.assign(this.listParams,this.startFilter)),this.loadList({list:this.itemList,params:this.listParams}),this.reloadListDebounce=(0,d.Z)(this.reloadListDebounce,300)}};var p=l(74260),_=l(92729),h=l(27011),g=l(83414),f=l(52035),w=l(2350),b=l(2165),k=l(20811),y=l(34842),v=l(24554),q=l(34765),x=l(21007),Z=l(7518),S=l.n(Z);const D=(0,p.Z)(m,[["render",r]]),Q=D;S()(m,"components",{QInfiniteScroll:_.Z,QList:h.Z,QItem:g.Z,QItemSection:f.Z,QItemLabel:w.Z,QBtn:b.Z,QMenu:k.Z,QInput:y.Z,QIcon:v.Z,QSpinnerDots:q.Z,QPageSticky:x.Z});const j={class:"text-grey-8 q-gutter-xs"},W=(0,a.Uk)("восстановить");function $(e,t,l,i,s,o){const n=(0,a.up)("q-item-section"),r=(0,a.up)("q-item"),d=(0,a.up)("q-list"),c=(0,a.up)("q-menu"),u=(0,a.up)("q-btn"),m=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",j,[(0,a.Wm)(u,{size:"12px",flat:"",dense:"",round:"",icon:"more_vert"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{dense:"",style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[l.isEdit?(0,a.wy)(((0,a.wg)(),(0,a.j4)(r,{key:0,clickable:"",onClick:t[0]||(t[0]=t=>e.$emit("edit"))},{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("message.edit")),1)])),_:1})])),_:1},512)),[[m]]):(0,a.kq)("",!0),l.isDelete?(0,a.wy)(((0,a.wg)(),(0,a.j4)(r,{key:1,clickable:"",onClick:t[1]||(t[1]=e=>o.confirmItemDeleteRecover(l.item))},{default:(0,a.w5)((()=>[l.item.deleted?((0,a.wg)(),(0,a.j4)(n,{key:1},{default:(0,a.w5)((()=>[W])),_:1})):((0,a.wg)(),(0,a.j4)(n,{key:0},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("message.delete")),1)])),_:1}))])),_:1},512)),[[m]]):(0,a.kq)("",!0)])),_:1})])),_:1})])),_:1})])}const C={props:["item","itemProp","isDelete","isEdit","pgMethod"],methods:{confirmItemDeleteRecover(e){const t=e[this.itemProp]?e[this.itemProp]:"";this.$q.dialog({title:"Подтвердите",message:`${e.deleted?"восстановить":"удалить"} : <strong>${t}</strong>`,ok:"ok",cancel:"отмена",html:!0}).onOk((()=>{this.$utils.postCallPgMethod({method:this.pgMethod,params:{id:e.id,deleted:!e.deleted}}).subscribe((e=>{this.$emit("reload-list")}))}))}}};var U=l(60677);const I=(0,p.Z)(C,[["render",$]]),F=I;S()(C,"components",{QBtn:b.Z,QMenu:k.Z,QList:h.Z,QItem:g.Z,QItemSection:f.Z}),S()(C,"directives",{ClosePopup:U.Z});const P={key:0,class:"text-weight-bold form-separator-header"},V={key:10,class:"q-gutter-sm"},T={key:11};function N(e,t,l,i,s,o){const n=(0,a.up)("q-input"),r=(0,a.up)("q-icon"),d=(0,a.up)("q-select"),c=(0,a.up)("comp-fld-user-search"),u=(0,a.up)("comp-fld-ref-search"),m=(0,a.up)("comp-fld-date"),p=(0,a.up)("comp-fld-date-time"),_=(0,a.up)("q-checkbox");return(0,a.wg)(),(0,a.iD)("div",{class:(0,a.C_)(l.columnClass)},["separator"==l.type&&l.vif?((0,a.wg)(),(0,a.iD)("div",P,(0,a.zw)(l.label),1)):(0,a.kq)("",!0),"string"==l.type&&l.vif?((0,a.wg)(),(0,a.j4)(n,{key:1,outlined:"",type:l.type,label:l.label,modelValue:l.fld,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update",t)),readonly:l.readonly,autogrow:""},null,8,["type","label","modelValue","readonly"])):(0,a.kq)("",!0),"number"==l.type&&l.vif?((0,a.wg)(),(0,a.j4)(n,{key:2,outlined:"",type:l.type,label:l.label,modelValue:l.fld,"onUpdate:modelValue":t[1]||(t[1]=t=>e.$emit("update",t)),readonly:l.readonly},null,8,["type","label","modelValue","readonly"])):(0,a.kq)("",!0),"phone"==l.type&&l.vif?((0,a.wg)(),(0,a.j4)(n,{key:3,outlined:"",label:l.label,modelValue:l.fld,"onUpdate:modelValue":t[2]||(t[2]=t=>e.$emit("update",t)),mask:"+# (###) ### - ####",readonly:l.readonly},{prepend:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"phone"})])),_:1},8,["label","modelValue","readonly"])):(0,a.kq)("",!0),"select"==l.type&&l.vif?((0,a.wg)(),(0,a.j4)(d,{key:4,outlined:"",label:l.label,modelValue:l.fld,options:l.selectOptions,"onUpdate:modelValue":t[3]||(t[3]=t=>e.$emit("update",t)),readonly:l.readonly},(0,a.Nv)({_:2},[l.icon?{name:"prepend",fn:(0,a.w5)((()=>[(0,a.Wm)(r,{name:l.icon},null,8,["name"])]))}:void 0]),1032,["label","modelValue","options","readonly"])):(0,a.kq)("",!0),"selectMultiple"==l.type&&l.vif?((0,a.wg)(),(0,a.j4)(d,{key:5,outlined:"",label:l.label,modelValue:l.fld,multiple:"",options:l.selectOptions,"onUpdate:modelValue":t[4]||(t[4]=t=>e.$emit("update",t)),readonly:l.readonly},null,8,["label","modelValue","options","readonly"])):(0,a.kq)("",!0),"userId"==l.type&&l.vif?((0,a.wg)(),(0,a.j4)(c,{key:6,label:l.label,user:l.ajaxSelectTitle,ext:l.ext,onUpdate:t[5]||(t[5]=t=>e.$emit("update",t.id)),readonly:l.readonly},null,8,["label","user","ext","readonly"])):(0,a.kq)("",!0),"refSearch"==l.type&&l.vif?((0,a.wg)(),(0,a.j4)(u,{key:7,label:l.label,pgMethod:l.pgMethod,itemTitleFldName:l.itemTitleFldName,onUpdate:t[6]||(t[6]=t=>e.$emit("update",t.id)),readonly:l.readonly,ext:l.ext},null,8,["label","pgMethod","itemTitleFldName","readonly","ext"])):(0,a.kq)("",!0),"date"==l.type&&l.vif?((0,a.wg)(),(0,a.j4)(m,{key:8,label:l.label,"date-string":o.formatDateForSelector(l.fld),onUpdate:t[7]||(t[7]=t=>e.$emit("update",t)),readonly:l.readonly},null,8,["label","date-string","readonly"])):(0,a.kq)("",!0),"datetime"==l.type&&l.vif?((0,a.wg)(),(0,a.j4)(p,{key:9,label:l.label,"date-string":o.formatDateTimeForSelector(l.fld),onUpdate:t[8]||(t[8]=t=>e.$emit("update",t)),onClear:t[9]||(t[9]=t=>e.$emit("clear")),readonly:l.readonly},null,8,["label","date-string","readonly"])):(0,a.kq)("",!0),"checkbox"==l.type&&l.vif?((0,a.wg)(),(0,a.iD)("div",V,[(0,a.Wm)(_,{modelValue:s.localFld,"onUpdate:modelValue":[t[10]||(t[10]=e=>s.localFld=e),t[11]||(t[11]=t=>e.$emit("update",t))],label:l.label},null,8,["modelValue","label"])])):(0,a.kq)("",!0),l.compName&&l.vif?((0,a.wg)(),(0,a.iD)("div",T,[((0,a.wg)(),(0,a.j4)((0,a.LL)(l.compName),{label:l.label,fld:l.fld,type:l.type,item:l.item,ajaxSelectTitle:l.ajaxSelectTitle,selectOptions:l.selectOptions,columnClass:l.columnClass,ext:l.ext,onUpdate:t[12]||(t[12]=t=>e.$emit("update",t)),readonly:l.readonly},null,8,["label","fld","type","item","ajaxSelectTitle","selectOptions","columnClass","ext","readonly"]))])):(0,a.kq)("",!0)],2)}var L=l(11488),z=l.n(L);const M={props:{item:{},type:{},label:{},fld:{},selectOptions:null,ajaxSelectTitle:null,ext:null,readonly:null,columnClass:{default:"col-xs-12 col-sm-6 col-md-4"},icon:null,vif:{default:!0},compName:null,pgMethod:null,itemTitleFldName:null,href:null},data(){return{localFld:null}},methods:{formatDateForSelector(e){return e?z()(e,"YYYY-MM-DDTHH:mm:ss").format("DD-MM-YYYY"):null},formatDateTimeForSelector(e){return e?z()(e,"YYYY-MM-DDTHH:mm:ss").format("DD-MM-YYYY HH:mm"):null}},mounted(){this.localFld=this.fld}};var A=l(72448),O=l(65735);const R=(0,p.Z)(M,[["render",N]]),E=R;S()(M,"components",{QInput:y.Z,QIcon:v.Z,QSelect:A.Z,QCheckbox:O.Z});const B=(0,a.Uk)(" No results ");function Y(e,t,l,i,s,o){const n=(0,a.up)("q-item-section"),r=(0,a.up)("q-item"),d=(0,a.up)("q-select");return(0,a.wg)(),(0,a.j4)(d,{outlined:"",modelValue:s.localUser,"onUpdate:modelValue":t[0]||(t[0]=e=>s.localUser=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"300",label:l.label,options:s.options,onFilter:o.filterFn,readonly:l.readonly},{"no-option":(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,{class:"text-grey"},{default:(0,a.w5)((()=>[B])),_:1})])),_:1})])),_:1},8,["modelValue","label","options","onFilter","readonly"])}const H={props:{user:{type:String},label:{type:String},ext:{type:Object},readonly:{type:Boolean,default:!1}},data(){return{localUser:{},options:[]}},created(){const e=this.user?this.user:null;this.localUser={label:e,value:e}},watch:{localUser:function(e){e&&e.user&&this.$emit("update",{id:e.user.id,fullname:e.user.fullname})}},methods:{filterFn(e,t,l){t((()=>{this.$utils.postCallPgMethod({method:"user_list",params:Object.assign({search_fullname:e,per_page:20},this.ext?this.ext:{})}).subscribe((e=>{e.ok&&(e.result||(e.result=[]),this.options=e.result.map((e=>({label:e.fullname,value:e.fullname,user:e,avatar:e.avatar}))))}))}))}}},K=(0,p.Z)(H,[["render",Y]]),G=K;function J(e,t,l,i,s,o){const n=(0,a.up)("q-breadcrumbs-el"),r=(0,a.up)("q-breadcrumbs"),d=(0,a.up)("q-separator");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(r,{gutter:"sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{label:e.$config.uiAppName,to:"/"},null,8,["label"]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)([].concat(...l.list),(e=>((0,a.wg)(),(0,a.j4)(n,{key:e.label,label:e.label,to:e.to,icon:o.icon(e)},null,8,["label","to","icon"])))),128))])),_:1}),(0,a.Wm)(d,{class:"q-mt-sm"})])}S()(H,"components",{QSelect:A.Z,QItem:g.Z,QItemSection:f.Z});const X={props:["list"],methods:{icon(e){return"edit"===e.docType?"edit":e.icon||this.$config.breadcrumbIcons[e.docType]||"label"}}};var ee=l(31481),te=l(85926),le=l(65869);const ae=(0,p.Z)(X,[["render",J]]),ie=ae;S()(X,"components",{QBreadcrumbs:ee.Z,QBreadcrumbsEl:te.Z,QSeparator:le.Z});const se=(0,a.Uk)("Восстановить"),oe={class:"q-ml-sm"};function ne(e,t,l,i,s,o){const n=(0,a.up)("q-tooltip"),r=(0,a.up)("q-btn"),d=(0,a.up)("q-item-section"),c=(0,a.up)("q-avatar"),u=(0,a.up)("q-card-section"),m=(0,a.up)("q-card-actions"),p=(0,a.up)("q-card"),_=(0,a.up)("q-dialog"),h=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(d,{side:""},{default:(0,a.w5)((()=>[l.item.deleted?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(r,{key:0,flat:"",round:"",icon:"delete_forever",onClick:t[0]||(t[0]=e=>s.isShowDeleteDialog=!0)},{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("message.delete")),1)])),_:1})])),_:1})),l.item.deleted?((0,a.wg)(),(0,a.j4)(r,{key:1,flat:"",round:"",icon:"check_circle_outline",onClick:o.update},{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[se])),_:1})])),_:1},8,["onClick"])):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(_,{modelValue:s.isShowDeleteDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>s.isShowDeleteDialog=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"row items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{rounded:"",icon:"warning",color:"warning","text-color":"white"}),(0,a._)("span",oe,(0,a.zw)(e.$t("message.delete"))+"?",1)])),_:1}),(0,a.Wm)(m,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(r,{flat:"",label:e.$t("message.cancel")},null,8,["label"]),[[h]]),(0,a.wy)((0,a.Wm)(r,{flat:"",label:e.$t("message.delete"),onClick:o.update},null,8,["label","onClick"]),[[h]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const re={props:["item","updateMethod"],data(){return{list:[],isShowDeleteDialog:!1}},methods:{update(){this.updateMethod?this.$utils.postCallPgMethod({method:this.updateMethod,params:{id:this.item.id,deleted:!this.item.deleted}}).subscribe((e=>{e.ok&&this.$emit("success")})):this.$emit("success")}}};var de=l(5363),ce=l(46778),ue=l(10151),me=l(25589),pe=l(75096),_e=l(99367);const he=(0,p.Z)(re,[["render",ne]]),ge=he;S()(re,"components",{QItemSection:f.Z,QBtn:b.Z,QTooltip:de.Z,QDialog:ce.Z,QCard:ue.Z,QCardSection:me.Z,QAvatar:pe.Z,QCardActions:_e.Z}),S()(re,"directives",{ClosePopup:U.Z});const fe={class:"row items-center justify-end"};function we(e,t,l,i,s,o){const n=(0,a.up)("q-icon"),r=(0,a.up)("q-btn"),d=(0,a.up)("q-date"),c=(0,a.up)("q-popup-proxy"),u=(0,a.up)("q-input"),m=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(u,{dense:l.dense,outlined:"",label:l.label,modelValue:s.date,"onUpdate:modelValue":t[1]||(t[1]=e=>s.date=e),readonly:l.readonly,mask:"##-##-####"},(0,a.Nv)({_:2},[!l.readonly&&s.date?{name:"append",fn:(0,a.w5)((()=>[(0,a.Wm)(n,{name:"close",onClick:o.clear,class:"cursor-pointer q-ml-sm"},null,8,["onClick"])]))}:void 0,l.readonly?void 0:{name:"prepend",fn:(0,a.w5)((()=>[(0,a.Wm)(n,{name:"event",class:"cursor-pointer"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:s.date,"onUpdate:modelValue":t[0]||(t[0]=e=>s.date=e),mask:"DD-MM-YYYY",readonly:l.readonly},{default:(0,a.w5)((()=>[(0,a._)("div",fe,[(0,a.wy)((0,a.Wm)(r,{label:"Ok",color:"primary",flat:""},null,512),[[m]])])])),_:1},8,["modelValue","readonly"])])),_:1},512)])),_:1})]))}]),1032,["dense","label","modelValue","readonly"])}var be=l(25616);const ke={props:["dateString","label","dense","is_remove","readonly"],data(){return{date:null}},watch:{dateString:function(e,t){e&&(this.date=e)},date:function(e,t){if(e&&e!==t){let t=be.ZP.extractDate(e,"DD-MM-YYYY");if(be.ZP.isBetweenDates(t,new Date(1900,1,1),new Date(2050,1,1))){let e=be.ZP.formatDate(t,"YYYY-MM-DDTHH:mm:ss");this.$emit("update",e)}}}},methods:{changeDate(e){e&&(this.date=e)},clear(){this.$emit("clear"),this.date=null}},mounted(){this.dateString&&(this.date=this.dateString)}};var ye=l(83944),ve=l(85626);const qe=(0,p.Z)(ke,[["render",we]]),xe=qe;S()(ke,"components",{QInput:y.Z,QIcon:v.Z,QPopupProxy:ye.Z,QDate:ve.Z,QBtn:b.Z}),S()(ke,"directives",{ClosePopup:U.Z});const Ze={class:"row items-center justify-end"},Se={class:"row items-center justify-end"};function De(e,t,l,i,s,o){const n=(0,a.up)("q-btn"),r=(0,a.up)("q-date"),d=(0,a.up)("q-popup-proxy"),c=(0,a.up)("q-icon"),u=(0,a.up)("q-time"),m=(0,a.up)("q-input"),p=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(m,{outlined:"",label:l.label,modelValue:s.date,"onUpdate:modelValue":t[2]||(t[2]=e=>s.date=e),readonly:l.readonly,mask:"##-##-#### ##:##"},(0,a.Nv)({_:2},[l.readonly?void 0:{name:"prepend",fn:(0,a.w5)((()=>[(0,a.Wm)(c,{name:"event",class:"cursor-pointer"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:s.date,"onUpdate:modelValue":t[0]||(t[0]=e=>s.date=e),mask:"DD-MM-YYYY HH:mm",readonly:l.readonly},{default:(0,a.w5)((()=>[(0,a._)("div",Ze,[(0,a.wy)((0,a.Wm)(n,{label:"Ok",color:"primary",flat:""},null,512),[[p]])])])),_:1},8,["modelValue","readonly"])])),_:1},512)])),_:1})]))},l.readonly?void 0:{name:"append",fn:(0,a.w5)((()=>[(0,a.Wm)(c,{name:"access_time",class:"cursor-pointer"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:s.date,"onUpdate:modelValue":t[1]||(t[1]=e=>s.date=e),mask:"DD-MM-YYYY HH:mm",format24h:""},{default:(0,a.w5)((()=>[(0,a._)("div",Se,[(0,a.wy)((0,a.Wm)(n,{label:"Ok",color:"primary",flat:""},null,512),[[p]])])])),_:1},8,["modelValue"])])),_:1})])),_:1}),s.date?((0,a.wg)(),(0,a.j4)(c,{key:0,name:"close",onClick:o.clear,class:"cursor-pointer q-ml-sm"},null,8,["onClick"])):(0,a.kq)("",!0)]))}]),1032,["label","modelValue","readonly"])}l(56801);const Qe={props:["dateString","label","readonly"],data(){return{date:null}},watch:{date:function(e,t){var l,a;if(e=null===(l=e)||void 0===l?void 0:l.trim(),t=null===(a=t)||void 0===a?void 0:a.trim(),e!==t){let t=be.ZP.extractDate(e,"DD-MM-YYYY HH:mm");if(be.ZP.isBetweenDates(t,new Date(1900,1,1),new Date(2050,1,1))){let e=be.ZP.formatDate(t,"YYYY-MM-DDTHH:mm:ss");this.$emit("update",e)}}}},methods:{clear(){this.date=null,this.$emit("clear")}},mounted(){this.dateString&&(this.date=this.dateString)}};var je=l(35990);const We=(0,p.Z)(Qe,[["render",De]]),$e=We;S()(Qe,"components",{QInput:y.Z,QIcon:v.Z,QPopupProxy:ye.Z,QDate:ve.Z,QBtn:b.Z,QTime:je.Z}),S()(Qe,"directives",{ClosePopup:U.Z});const Ce={class:"q-py-md"};function Ue(e,t,l,i,s,o){const n=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)("div",Ce,[l.readonly?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(n,{key:0,color:"secondary",label:e.$t("message.save"),class:"q-mr-sm",onClick:t[0]||(t[0]=t=>e.$emit("save"))},null,8,["label"])),(0,a.Wm)(n,{outline:"",color:"secondary",label:e.$t("message.cancel"),onClick:t[1]||(t[1]=t=>e.$emit("cancel"))},null,8,["label"])])}const Ie={props:["readonly"]},Fe=(0,p.Z)(Ie,[["render",Ue]]),Pe=Fe;S()(Ie,"components",{QBtn:b.Z});const Ve=(0,a.Uk)(" No results ");function Te(e,t,l,i,s,o){const n=(0,a.up)("q-item-section"),r=(0,a.up)("q-item"),d=(0,a.up)("q-select");return(0,a.wg)(),(0,a.j4)(d,{outlined:"",modelValue:s.localUser,"onUpdate:modelValue":t[0]||(t[0]=e=>s.localUser=e),"use-input":"","fill-input":"","emit-value":"","map-options":"",multiple:"","use-chips":"",label:l.label,options:s.options},{"no-option":(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,{class:"text-grey"},{default:(0,a.w5)((()=>[Ve])),_:1})])),_:1})])),_:1},8,["modelValue","label","options"])}const Ne={props:{userIds:{type:Array},label:{type:String}},data(){return{localUser:[],options:[],filterOptions:[]}},watch:{localUser:function(e){e&&this.$emit("update",e)}},methods:{filterFn(e,t){t((()=>{if(""===e)this.filterOptions=this.options;else{const t=e.toLowerCase();this.filterOptions=this.options.filter((e=>e.label.toLowerCase().indexOf(t)>-1))}}))}},mounted(){this.$utils.postCallPgMethod({method:"user_list",params:Object.assign({per_page:1e3,order_by:"fullname asc"})}).subscribe((e=>{e.ok&&(e.result||(e.result=[]),this.options=e.result.map((e=>({label:`${e.fullname}`,value:e.id}))),this.userIds&&(this.localUser=this.userIds),this.$forceUpdate())}))}},Le=(0,p.Z)(Ne,[["render",Te]]),ze=Le;S()(Ne,"components",{QSelect:A.Z,QItem:g.Z,QItemSection:f.Z});const Me=["src"],Ae=["src"],Oe=(0,a.Uk)(" Ничего не найдено ");function Re(e,t,l,i,s,o){const n=(0,a.up)("q-avatar"),r=(0,a.up)("router-link"),d=(0,a.up)("q-btn"),c=(0,a.up)("q-icon"),u=(0,a.up)("q-item-section"),m=(0,a.up)("q-item-label"),p=(0,a.up)("q-item"),_=(0,a.up)("q-select");return(0,a.wg)(),(0,a.j4)(_,{outlined:"",modelValue:s.localItem,"onUpdate:modelValue":t[1]||(t[1]=e=>s.localItem=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"300",label:l.label,options:s.options,onFilter:o.filterFn,readonly:l.readonly,dense:l.dense},(0,a.Nv)({append:(0,a.w5)((()=>[l.ext&&l.ext.addNewUrl&&!l.readonly?((0,a.wg)(),(0,a.j4)(d,{key:0,round:"",dense:"",flat:"",icon:"add",onClick:o.openNewTab},null,8,["onClick"])):(0,a.kq)("",!0),l.ext&&l.ext.isClearable&&s.localItem.label&&!l.readonly?((0,a.wg)(),(0,a.j4)(c,{key:1,name:"cancel",onClick:(0,a.iM)(o.clear,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):(0,a.kq)("",!0)])),option:(0,a.w5)((e=>[(0,a.Wm)(p,(0,a.vs)((0,a.F4)(e.itemProps)),{default:(0,a.w5)((()=>[e.opt.icon?((0,a.wg)(),(0,a.j4)(u,{key:0,avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{name:e.opt.icon},null,8,["name"])])),_:2},1024)):(0,a.kq)("",!0),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,{innerHTML:e.opt.label},null,8,["innerHTML"]),l.ext&&l.ext.descriptionFunc?((0,a.wg)(),(0,a.j4)(m,{key:0,caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(l.ext.descriptionFunc(e.opt.item)),1)])),_:2},1024)):(0,a.kq)("",!0)])),_:2},1024)])),_:2},1040)])),"no-option":(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"text-grey"},{default:(0,a.w5)((()=>[Oe])),_:1})])),_:1})])),_:2},[l.ext&&l.ext.pathUrl?{name:"before",fn:(0,a.w5)((()=>[s.localItem&&s.localItem.id||l.itemId?((0,a.wg)(),(0,a.j4)(r,{key:0,to:l.ext.pathUrl+"/"+(s.localItem&&s.localItem.id||l.itemId),style:{cursor:"pointer"}},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{rounded:""},{default:(0,a.w5)((()=>[(0,a._)("img",{src:l.ext.avatar},null,8,Me)])),_:1})])),_:1},8,["to"])):((0,a.wg)(),(0,a.j4)(n,{key:1,rounded:"",style:{opacity:"0.7"}},{default:(0,a.w5)((()=>[(0,a._)("img",{src:l.ext.avatar},null,8,Ae)])),_:1}))]))}:void 0,l.ext&&l.ext.isSaveBtn&&s.localItem.label&&!l.readonly?{name:"after",fn:(0,a.w5)((()=>[(0,a.Wm)(c,{name:"save",onClick:t[0]||(t[0]=t=>e.$emit("save")),class:"cursor-pointer",color:"primary"})]))}:void 0]),1032,["modelValue","label","options","onFilter","readonly","dense"])}const Ee={props:{itemId:{type:Number},item:{type:String},label:{type:String},ext:{type:Object},readonly:{type:Boolean,default:!1},dense:{type:Boolean,default:!1},itemTitleFldName:{type:String,default:"title"},pgMethod:{type:String}},data(){return{localItem:{},options:[]}},created(){var e;const t=this.item?this.item:null;this.localItem={label:t,value:(null===(e=this.ext)||void 0===e?void 0:e.value)||t}},watch:{localItem:function(e){e&&e.id&&this.$emit("update",{id:e.id,item:e})},item:function(e){this.localItem={label:e,value:e}}},methods:{clear(){this.localItem={label:null,value:null},this.$emit("clear")},filterFn(e,t,l){t((()=>{this.$utils.postCallPgMethod({method:this.pgMethod,params:Object.assign({search_text:e,per_page:20},this.ext?this.ext:{})}).subscribe((e=>{e.ok&&(e.result||(e.result=[]),this.options=e.result.map((e=>{var t,l;let a=e[this.itemTitleFldName];return null!==(t=this.ext)&&void 0!==t&&t.itemTitleFunc&&(a=this.ext.itemTitleFunc(e)),{label:a,value:`${e[null!==(l=this.ext)&&void 0!==l&&l.itemValueFldName?this.ext.itemValueFldName:this.itemTitleFldName]}`,id:e.id,item:e}})))}))}))},openNewTab(){window.open(this.ext.addNewUrl,"_blank")}},mounted(){this.$utils.postCallPgMethod({method:this.pgMethod,params:Object.assign({search_text:"",per_page:20},this.ext?this.ext:{})}).subscribe((e=>{e.ok&&(e.result||(e.result=[]),this.options=e.result.map((e=>{var t;let l=e[this.itemTitleFldName];return null!==(t=this.ext)&&void 0!==t&&t.itemTitleFunc&&(l=this.ext.itemTitleFunc(e)),this.itemId&&!this.item&&e.id===this.itemId&&(this.localItem={label:l,value:e[this.itemTitleFldName],id:e.id,item:e}),{label:l,value:e[this.itemTitleFldName],id:e.id,item:e}})))}))}},Be=(0,p.Z)(Ee,[["render",Re]]),Ye=Be;S()(Ee,"components",{QSelect:A.Z,QAvatar:pe.Z,QBtn:b.Z,QIcon:v.Z,QItem:g.Z,QItemSection:f.Z,QItemLabel:w.Z});const He=(0,a.Uk)(" Ничего не найдено ");function Ke(e,t,l,i,s,o){const n=(0,a.up)("q-btn"),r=(0,a.up)("q-item-section"),d=(0,a.up)("q-item"),c=(0,a.up)("q-select"),u=(0,a.up)("q-input"),m=(0,a.up)("q-card-section"),p=(0,a.up)("q-card-actions"),_=(0,a.up)("q-card"),h=(0,a.up)("q-dialog"),g=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(c,{outlined:"",modelValue:s.localItem,"onUpdate:modelValue":t[1]||(t[1]=e=>s.localItem=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"300",label:l.label,options:s.options,onFilter:o.filterFn,readonly:l.readonly},(0,a.Nv)({"no-option":(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"text-grey"},{default:(0,a.w5)((()=>[He])),_:1})])),_:1})])),_:2},[l.ext&&l.ext.isHideAddBtn?void 0:{name:"append",fn:(0,a.w5)((()=>[(0,a.Wm)(n,{round:"",dense:"",flat:"",icon:"add",onClick:t[0]||(t[0]=e=>s.isShowDialog=!0)})]))}]),1032,["modelValue","label","options","onFilter","readonly"]),(0,a.Wm)(h,{modelValue:s.isShowDialog,"onUpdate:modelValue":t[3]||(t[3]=e=>s.isShowDialog=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{style:{"min-width":"350px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{outlined:"",label:"Название города",modelValue:s.newCityName,"onUpdate:modelValue":t[2]||(t[2]=e=>s.newCityName=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(m),(0,a.Wm)(p,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(n,{flat:"",label:e.$t("message.cancel")},null,8,["label"]),[[g]]),(0,a.wy)((0,a.Wm)(n,{flat:"",label:"Добавить",onClick:o.add},null,8,["onClick"]),[[g]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const Ge={props:{item:{type:String},ajaxSelectTitle:{type:String},label:{type:String},ext:{type:Object},readonly:{type:Boolean,default:!1}},data(){return{localItem:{},options:[],isShowDialog:!1,newCityName:null}},created(){const e=this.ajaxSelectTitle?this.ajaxSelectTitle:null;this.localItem={label:e,value:e}},watch:{localItem:function(e){e&&e.id&&this.$emit("update",e.id)}},methods:{filterFn(e,t,l){t((()=>{this.$utils.postCallPgMethod({method:"city_list",params:Object.assign({search_text:e,per_page:20},this.ext?this.ext:{})}).subscribe((e=>{e.ok&&(e.result||(e.result=[]),this.options=e.result.map((e=>({label:e.title,value:e.title,id:e.id}))))}))}))},add(){this.$utils.postCallPgMethod({method:"city_update",params:{id:-1,title:this.newCityName},isShowError:!1}).subscribe((e=>{if(e.ok){const t=e.result;this.localItem={label:t.title,value:t.id},this.newCityName=null}else e.message.includes("city_already_exist")&&(e.message="Город с таким назваанием уже существует"),this.$q.notify({color:"negative",position:"bottom",message:e.message})}))}}},Je=(0,p.Z)(Ge,[["render",Ke]]),Xe=Je;function et(e,t,l,i,s,o){const n=(0,a.up)("q-input");return(0,a.wg)(),(0,a.j4)(n,{outlined:"",label:l.label,modelValue:s.localItem,"onUpdate:modelValue":t[0]||(t[0]=e=>s.localItem=e),autogrow:""},null,8,["label","modelValue"])}S()(Ge,"components",{QSelect:A.Z,QBtn:b.Z,QItem:g.Z,QItemSection:f.Z,QDialog:ce.Z,QCard:ue.Z,QCardSection:me.Z,QInput:y.Z,QCardActions:_e.Z}),S()(Ge,"directives",{ClosePopup:U.Z});const tt={props:{label:{},fld:{},ext:null,readonly:null,columnClass:{default:"col-xs-12 col-sm-6 col-md-4"},icon:null,vif:{default:!0}},data(){return{localItem:null}},watch:{localItem:function(){this.update()}},methods:{update(){this.$emit("update",{text:this.localItem})}},mounted(){this.fld&&(this.localItem=this.fld.text)}},lt=(0,p.Z)(tt,[["render",et]]),at=lt;S()(tt,"components",{QInput:y.Z});const it=(0,a._)("img",{src:"image/file.svg"},null,-1),st={class:"q-ml-sm"};function ot(e,t,l,i,s,o){const n=(0,a.up)("q-space"),r=(0,a.up)("q-btn"),d=(0,a.up)("q-bar"),c=(0,a.up)("q-avatar"),u=(0,a.up)("q-item-section"),m=(0,a.up)("q-item-label"),p=(0,a.up)("q-tooltip"),_=(0,a.up)("q-item"),h=(0,a.up)("q-list"),g=(0,a.up)("q-uploader"),f=(0,a.up)("q-dialog"),w=(0,a.up)("q-card-section"),b=(0,a.up)("q-card-actions"),k=(0,a.up)("q-card"),y=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(d,{class:"bg-secondary text-white shadow-2"},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,a.zw)(l.label),1),(0,a.Wm)(n),s.isShowList&&s.list.length>0?((0,a.wg)(),(0,a.j4)(r,{key:0,dense:"",flat:"",icon:"expand_less",onClick:t[0]||(t[0]=e=>s.isShowList=!1)})):(0,a.kq)("",!0),!s.isShowList&&s.list.length>0?((0,a.wg)(),(0,a.j4)(r,{key:1,dense:"",flat:"",icon:"expand_more",onClick:t[1]||(t[1]=e=>s.isShowList=!0)})):(0,a.kq)("",!0),l.readonly?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(r,{key:2,dense:"",flat:"",icon:"add",onClick:t[2]||(t[2]=e=>s.isShowDialog=!0)}))])),_:1}),s.isShowList?((0,a.wg)(),(0,a.j4)(h,{key:0,bordered:"",separator:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.filteredList,(t=>((0,a.wg)(),(0,a.j4)(_,{key:t.filename},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{avatar:"",onClick:e=>o.downloadFile(t),class:"cursor-pointer"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{size:"md"},{default:(0,a.w5)((()=>[it])),_:1})])),_:2},1032,["onClick"]),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(t.filename),1)])),_:2},1024)])),_:2},1024),l.readonly?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(u,{key:0,side:""},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{flat:"",round:"",icon:"delete",size:"sm",onClick:e=>o.showDeleteDialog(t.filename)},{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("message.delete")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024))])),_:2},1024)))),128))])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(f,{modelValue:s.isShowDialog,"onUpdate:modelValue":t[3]||(t[3]=e=>s.isShowDialog=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{ref:"uploader",label:"Выберите файл для загрузки","auto-upload":"",url:o.uploadUrl,headers:o.headers,accept:l.ext&&l.ext.accept?l.ext.accept:"","max-file-size":l.ext&&l.ext.maxFileSize?l.ext.maxFileSize:1e7,onRejected:o.rejected,onUploaded:o.uploaded,onFailed:o.failed,"form-fields":[{name:"tableName",value:l.ext.tableName},{name:"tableId",value:l.ext.tableId}]},null,8,["url","headers","accept","max-file-size","onRejected","onUploaded","onFailed","form-fields"])])),_:1},8,["modelValue"]),(0,a.Wm)(f,{modelValue:s.isShowDeleteDialog,"onUpdate:modelValue":t[4]||(t[4]=e=>s.isShowDeleteDialog=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w,{class:"row items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{rounded:"",icon:"warning",color:"warning","text-color":"white"}),(0,a._)("span",st,(0,a.zw)(e.$t("message.delete"))+"?",1)])),_:1}),(0,a.Wm)(b,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(r,{flat:"",label:e.$t("message.cancel")},null,8,["label"]),[[y]]),(0,a.wy)((0,a.Wm)(r,{flat:"",label:e.$t("message.delete"),onClick:o.remove},null,8,["label","onClick"]),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}l(17965);var nt=l(30052),rt=l.n(nt);const dt={props:{fld:{},fldName:{default:"files"},label:{},readonly:null,icon:null,vif:{default:!0},ext:null},computed:{uploadUrl(){return`${this.$config.apiUrl()}/api/upload_file`},headers:function(){const e=localStorage.getItem(this.$config.appName);return[{name:"Auth-token",value:e}]},filteredList:function(){return this.list.filter((e=>!e.deleted))}},data(){return{isShowDialog:!1,isShowList:!0,list:[],isShowDeleteDialog:!1,selectedForDeleteFilename:null}},methods:{uploaded({xhr:{response:e}}){const t=JSON.parse(e);t.ok?(this.$refs.uploader.reset(),this.isShowDialog=!1,this.list.find((e=>e.filename===t.result.filename&&!e.deleted))||(this.list.push(t.result),this.$utils.postCallPgMethod({method:`${this.ext.tableName}_update`,params:{id:this.ext.tableId,[this.fldName]:this.list}}).subscribe((e=>{this.$emit("update",this.list)})))):this.$q.notify({color:"negative",position:"bottom",message:t.message})},failed(e){let t="ошибка загрузки";if(e.xhr&&e.xhr.responseText){let l=JSON.parse(e.xhr.responseText);l.message&&(t=l.message)}this.$q.notify({color:"negative",position:"bottom",message:t})},rejected(e){const t=e=>{const t=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];let l=0,a=parseInt(e,10)||0;while(a>=1024&&++l)a/=1024;return a.toFixed(a<10&&l>0?1:0)+" "+t[l]};let l="данный файл не соответствует ограничениям";if(e.length>0&&"accept"===e[0].failedPropValidation&&(l=`Допустимы только файлы с раширением: ${this.ext.accept} `),e.length>0&&"max-file-size"===e[0].failedPropValidation){let e=t(this.ext.maxFileSize||1e7);l=`Допустимы только файлы не больше: ${e}`}this.$q.notify({color:"negative",position:"bottom",message:l})},downloadFile(e){rt()({url:`${this.$config.apiUrl()}${e.url}`,method:"GET",headers:{"Auth-token":localStorage.getItem(this.$config.appName)},responseType:"blob"}).then((t=>{const l=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=l,a.setAttribute("download",e.filename),document.body.appendChild(a),a.click()})).catch((e=>{let t=e.response.data;e.response.data&&(t=e.response.data.message,"not found"===t&&(t="файл с такой ссылкой не найден")),this.$q.notify({message:t,type:"negative",position:"top-right"})}))},showDeleteDialog(e){this.selectedForDeleteFilename=e,this.isShowDeleteDialog=!0},remove(){let e=this.list.findIndex((e=>e.filename===this.selectedForDeleteFilename&&!e.deleted));this.list[e].deleted=!0;const t=this.list[e].url.split("/",-1).slice(-1);let l=this.list.splice(e,1);this.list.push(l[0]),this.$utils.postApiRequest({url:`/api/remove_file/${t}`}).subscribe((e=>{e.ok&&(this.selectedForDeleteFilename=null)})),this.$utils.postCallPgMethod({method:`${this.ext.tableName}_update`,params:{id:this.ext.tableId,[this.fldName]:this.list}}).subscribe((e=>{this.$emit("update",this.list)}))}},mounted(){if(!this.ext)throw new Error('compFldFiles missed param: "ext"');if(!this.ext.tableName)throw new Error('compFldFiles missed param: "ext.tableName"');if(!this.ext.tableId)throw new Error('compFldFiles missed param: "ext.tableId"');this.list=this.fld||[],rt().interceptors.response.use((e=>e),(e=>"blob"===e.request.responseType&&e.response.data instanceof Blob&&e.response.data.type&&-1!==e.response.data.type.toLowerCase().indexOf("json")?new Promise(((t,l)=>{let a=new FileReader;a.onload=()=>{e.response.data=JSON.parse(a.result),t(Promise.reject(e))},a.onerror=()=>{l(e)},a.readAsText(e.response.data)})):Promise.reject(e)))}};var ct=l(10846),ut=l(62025),mt=l(90845);const pt=(0,p.Z)(dt,[["render",ot]]),_t=pt;S()(dt,"components",{QBar:ct.Z,QSpace:ut.Z,QBtn:b.Z,QList:h.Z,QItem:g.Z,QItemSection:f.Z,QAvatar:pe.Z,QItemLabel:w.Z,QTooltip:de.Z,QDialog:ce.Z,QUploader:mt.Z,QCard:ue.Z,QCardSection:me.Z,QCardActions:_e.Z}),S()(dt,"directives",{ClosePopup:U.Z});const ht={class:"q-gutter-md row items-start",style:{position:"relative"}},gt={key:0,class:"absolute-top-left text-subtitle2"},ft=(0,a.Uk)("Загрузить фото"),wt={class:"q-ml-sm"};function bt(e,t,l,i,s,o){const n=(0,a.up)("comp-stat-img-src"),r=(0,a.up)("q-tooltip"),d=(0,a.up)("q-btn"),c=(0,a.up)("q-uploader"),u=(0,a.up)("q-dialog"),m=(0,a.up)("q-avatar"),p=(0,a.up)("q-card-section"),_=(0,a.up)("q-card-actions"),h=(0,a.up)("q-card"),g=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",ht,[(0,a.Wm)(n,{src:s.localSrc},{default:(0,a.w5)((()=>[l.label?((0,a.wg)(),(0,a.iD)("div",gt,(0,a.zw)(l.label),1)):(0,a.kq)("",!0)])),_:1},8,["src"]),(0,a.Wm)(d,{outline:"",round:"",icon:"add",color:"grey",onClick:t[0]||(t[0]=e=>s.isShowDialog=!0),class:"absolute-top-right all-pointer-events"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[ft])),_:1})])),_:1}),(0,a.Wm)(d,{outline:"",round:"",size:"sm",icon:"delete",color:"grey",onClick:t[1]||(t[1]=e=>s.isShowDeleteDialog=!0),class:"absolute-bottom-right all-pointer-events"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("message.delete"))+" фото",1)])),_:1})])),_:1})]),(0,a.Wm)(u,{modelValue:s.isShowDialog,"onUpdate:modelValue":t[2]||(t[2]=e=>s.isShowDialog=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{ref:"uploader",label:"Выберите файл для загрузки","auto-upload":"",url:o.uploadUrl,headers:o.headers,accept:l.ext&&l.ext.accept?l.ext.accept:"","max-file-size":l.ext&&l.ext.maxFileSize?l.ext.maxFileSize:1e7,onRejected:o.rejected,onUploaded:o.uploaded,onFailed:o.failed,"form-fields":o.formField},null,8,["url","headers","accept","max-file-size","onRejected","onUploaded","onFailed","form-fields"])])),_:1},8,["modelValue"]),(0,a.Wm)(u,{modelValue:s.isShowDeleteDialog,"onUpdate:modelValue":t[3]||(t[3]=e=>s.isShowDeleteDialog=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"row items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{rounded:"",icon:"warning",color:"warning","text-color":"white"}),(0,a._)("span",wt,(0,a.zw)(e.$t("message.delete"))+"?",1)])),_:1}),(0,a.Wm)(_,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(d,{flat:"",label:e.$t("message.cancel")},null,8,["label"]),[[g]]),(0,a.wy)((0,a.Wm)(d,{flat:"",label:e.$t("message.delete"),onClick:o.remove},null,8,["label","onClick"]),[[g]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const kt={props:{fld:{},label:{},readonly:null,icon:null,vif:{default:!0},ext:{}},computed:{uploadUrl:function(){return`${this.$config.apiUrl()}/api/${this.ext.uploadUrl||"upload_image"}`},headers:function(){const e=localStorage.getItem(this.$config.appName);return[{name:"Auth-token",value:e}]},formField:function(){let e=[{name:"tableName",value:this.ext.tableName},{name:"tableId",value:this.ext.tableId}];return this.ext.width&&e.push({name:"width",value:this.ext.width}),this.ext.crop&&e.push({name:"crop",value:this.ext.crop}),e}},data(){return{isShowDialog:!1,isShowDeleteDialog:!1,localSrc:null}},watch:{fld(e){e&&(this.localSrc=e)}},methods:{uploaded({xhr:{response:e}}){const t=JSON.parse(e);t.ok?(this.localSrc=t.result.file,this.$refs.uploader.reset(),this.isShowDialog=!1,this.$emit("update",this.localSrc),this.ext.fldName&&this.$utils.postCallPgMethod({method:`${this.ext.methodUpdate||this.ext.tableName+"_update"}`,params:{id:this.ext.tableId,[this.ext.fldName]:this.localSrc}}).subscribe((e=>{}))):this.$q.notify({color:"negative",position:"bottom",message:t.message})},failed(e){let t="ошибка загрузки";if(e.xhr&&e.xhr.responseText){let l=JSON.parse(e.xhr.responseText);l.message&&(t=l.message)}this.$q.notify({color:"negative",position:"bottom",message:t})},rejected(e){const t=e=>{const t=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];let l=0,a=parseInt(e,10)||0;while(a>=1024&&++l)a/=1024;return a.toFixed(a<10&&l>0?1:0)+" "+t[l]};let l="данный файл не соответствует ограничениям";if(e.length>0&&"accept"===e[0].failedPropValidation&&(l=`Допустимы только файлы с раширением: ${this.ext.accept} `),e.length>0&&"max-file-size"===e[0].failedPropValidation){let e=t(this.ext.maxFileSize||1e7);l=`Допустимы только файлы не больше: ${e}`}this.$q.notify({color:"negative",position:"bottom",message:l})},remove(){this.ext.fldName?this.$utils.postCallPgMethod({method:`${this.ext.methodUpdate||this.ext.tableName+"_update"}`,params:{id:this.ext.tableId,[this.ext.fldName]:null}}).subscribe((e=>{this.localSrc=null,this.$emit("update",null)})):(this.localSrc=null,this.$emit("update",null))}},mounted(){if(!this.ext)throw new Error('compFldFiles missed param: "ext"');if(!this.ext.methodUpdate&&(!this.ext.tableId||!this.ext.tableName))throw new Error('compFldFiles missed param: "ext.methodUpdate" OR "ext.tableId" AND "ext.tableName"');this.localSrc=this.fld||null}},yt=(0,p.Z)(kt,[["render",bt]]),vt=yt;S()(kt,"components",{QBtn:b.Z,QTooltip:de.Z,QDialog:ce.Z,QUploader:mt.Z,QCard:ue.Z,QCardSection:me.Z,QAvatar:pe.Z,QCardActions:_e.Z}),S()(kt,"directives",{ClosePopup:U.Z});const qt={class:"text-caption"},xt={class:"q-gutter-md row items-start"},Zt=["href"],St=(0,a.Uk)("Поменять местами"),Dt=(0,a.Uk)("Добавить фото"),Qt=(0,a.Uk)("Добавить ссылку"),jt={class:"q-ml-sm"};function Wt(e,t,l,i,s,o){const n=(0,a.up)("q-btn"),r=(0,a.up)("q-tooltip"),d=(0,a.up)("comp-stat-img-src"),c=(0,a.up)("q-uploader"),u=(0,a.up)("q-dialog"),m=(0,a.up)("q-img"),p=(0,a.up)("q-input"),_=(0,a.up)("q-card-section"),h=(0,a.up)("q-card-actions"),g=(0,a.up)("q-card"),f=(0,a.up)("q-avatar"),w=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("p",qt,(0,a.zw)(l.label),1),(0,a._)("div",xt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.list,((t,i)=>((0,a.wg)(),(0,a.j4)(d,{key:t.file,src:t.file,onError:e=>o.imgSrcError(t.file,e),style:{width:"150px"}},{default:(0,a.w5)((()=>[(0,a._)("a",{href:o.imgUrl(t.file),target:"_blank"},[(0,a.Wm)(n,{flat:"",round:"",size:"sm",icon:"link",color:"white",class:"absolute-top-right all-pointer-events"})],8,Zt),l.readonly?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(n,{key:0,flat:"",round:"",size:"sm",icon:"delete",color:"white",onClick:e=>o.showDeleteDialog(t.file),class:"absolute-bottom-right all-pointer-events"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("message.delete"))+" фото",1)])),_:1})])),_:2},1032,["onClick"])),!l.readonly&&i>0?((0,a.wg)(),(0,a.j4)(n,{key:1,flat:"",round:"",size:"sm",icon:"keyboard_backspace",color:"white",onClick:e=>o.moveLeft(t.file,i),class:"absolute-bottom-left all-pointer-events"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[St])),_:1})])),_:2},1032,["onClick"])):(0,a.kq)("",!0)])),_:2},1032,["src","onError"])))),128)),l.readonly?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(n,{key:0,flat:"",round:"",icon:"add",size:"sm",onClick:t[0]||(t[0]=e=>s.isShowDialog=!0)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[Dt])),_:1})])),_:1})),!l.readonly&&l.ext&&l.ext.canAddUrls?((0,a.wg)(),(0,a.j4)(n,{key:1,size:"sm",flat:"",round:"",icon:"add",onClick:t[1]||(t[1]=e=>s.isShowDialogAddUrl=!0)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[Qt])),_:1})])),_:1})):(0,a.kq)("",!0)]),(0,a.Wm)(u,{modelValue:s.isShowDialog,"onUpdate:modelValue":t[2]||(t[2]=e=>s.isShowDialog=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{ref:"uploader",label:"Выберите файл для загрузки",multiple:"",url:o.uploadUrl,headers:o.headers,accept:l.ext&&l.ext.accept?l.ext.accept:"","max-file-size":l.ext&&l.ext.maxFileSize?l.ext.maxFileSize:1e7,onRejected:o.rejected,onUploaded:o.uploaded,onFailed:o.failed,onFinish:o.finish,"form-fields":o.formField},null,8,["url","headers","accept","max-file-size","onRejected","onUploaded","onFailed","onFinish","form-fields"])])),_:1},8,["modelValue"]),(0,a.Wm)(u,{modelValue:s.isShowDialogAddUrl,"onUpdate:modelValue":t[4]||(t[4]=e=>s.isShowDialogAddUrl=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{style:{width:"300px"},class:"q-px-sm q-pb-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{src:s.newImgUrl?s.newImgUrl:"https://www.cowgirlcontractcleaning.com/wp-content/uploads/sites/360/2018/05/placeholder-img-4.jpg"},null,8,["src"]),(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:s.newImgUrl,"onUpdate:modelValue":t[3]||(t[3]=e=>s.newImgUrl=e),label:"ссылка на фото"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(n,{flat:"",label:e.$t("message.cancel")},null,8,["label"]),[[w]]),(0,a.wy)((0,a.Wm)(n,{flat:"",label:"Ок",onClick:o.addImgUrl},null,8,["onClick"]),[[w]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(u,{modelValue:s.isShowDeleteDialog,"onUpdate:modelValue":t[5]||(t[5]=e=>s.isShowDeleteDialog=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(_,{class:"row items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{rounded:"",icon:"warning",color:"warning","text-color":"white"}),(0,a._)("span",jt,(0,a.zw)(e.$t("message.delete"))+"?",1)])),_:1}),(0,a.Wm)(h,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(n,{flat:"",label:e.$t("message.cancel")},null,8,["label"]),[[w]]),(0,a.wy)((0,a.Wm)(n,{flat:"",label:e.$t("message.delete"),onClick:o.remove},null,8,["label","onClick"]),[[w]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const $t={props:{fld:{},label:{},readonly:null,icon:null,vif:{default:!0},ext:{}},computed:{uploadUrl:function(){return`${this.$config.apiUrl()}/api/${this.ext.uploadUrl||"upload_image"}`},headers:function(){const e=localStorage.getItem(this.$config.appName);return[{name:"Auth-token",value:e}]},formField:function(){let e=[{name:"tableName",value:this.ext.tableName},{name:"tableId",value:this.ext.tableId}];return this.ext.width&&e.push({name:"width",value:this.ext.width}),this.ext.crop&&e.push({name:"crop",value:this.ext.crop}),e},imgUrl:function(){return e=>e.includes("http")?e:`${this.$config.apiUrl()}${e}`}},data(){return{isShowDialog:!1,list:[],isShowDeleteDialog:!1,isShowDialogAddUrl:!1,selectedForDeleteFilename:null,newImgUrl:null}},methods:{uploaded({xhr:{response:e}}){const t=JSON.parse(e);t.ok?this.list.push(t.result):this.$q.notify({color:"negative",position:"bottom",message:t.message})},failed(e){let t="ошибка загрузки";if(e.xhr&&e.xhr.responseText){let l=JSON.parse(e.xhr.responseText);l.message&&(t=l.message)}this.$q.notify({color:"negative",position:"bottom",message:t})},rejected(e){const t=e=>{const t=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];let l=0,a=parseInt(e,10)||0;while(a>=1024&&++l)a/=1024;return a.toFixed(a<10&&l>0?1:0)+" "+t[l]};let l="данный файл не соответствует ограничениям";if(e.length>0&&"accept"===e[0].failedPropValidation&&(l=`Допустимы только файлы с раширением: ${this.ext.accept} `),e.length>0&&"max-file-size"===e[0].failedPropValidation){let e=t(this.ext.maxFileSize||1e7);l=`Допустимы только файлы не больше: ${e}`}this.$q.notify({color:"negative",position:"bottom",message:l})},showDeleteDialog(e){this.selectedForDeleteFilename=e,this.isShowDeleteDialog=!0},imgSrcError(e,t){this.$q.notify({color:"negative",position:"bottom",message:`ошибка: url "${e}" не является ссылкой на фото `}),this.selectedForDeleteFilename=e,this.remove()},moveLeft(e,t){let l=this.list[t];this.list[t]=this.list[t-1],this.$set(this.list,t-1,l),this.$emit("update",this.list)},remove(){let e=this.list.findIndex((e=>e.file===this.selectedForDeleteFilename&&!e.deleted));this.list[e].deleted=!0;let t=this.list.splice(e,1);this.list.push(t[0]),this.$utils.postCallPgMethod({method:`${this.ext.methodUpdate||this.ext.tableName+"_update"}`,params:{id:this.ext.tableId,[this.ext.fldName]:this.list}}).subscribe((e=>{this.$emit("update",this.list)}))},addImgUrl:function(){this.isShowDialog=!1,this.list.push({file:this.newImgUrl}),this.$utils.postCallPgMethod({method:`${this.ext.methodUpdate||this.ext.tableName+"_update"}`,params:{id:this.ext.tableId,[this.ext.fldName]:this.list}}).subscribe((e=>{e.ok&&(this.newImgUrl=null)}))},finish(){this.$refs.uploader.reset(),this.isShowDialog=!1,this.$emit("update",this.list),this.$utils.postCallPgMethod({method:`${this.ext.methodUpdate||this.ext.tableName+"_update"}`,params:{id:this.ext.tableId,[this.ext.fldName]:this.list}}).subscribe((e=>{}))}},mounted(){if(!this.readonly){if(!this.ext)throw new Error('compFldFiles missed param: "ext"');if(!this.ext.fldName)throw new Error('compFldFiles missed param: "ext.fldName"');if(!this.ext.methodUpdate&&(!this.ext.tableId||!this.ext.tableName))throw new Error('compFldFiles missed param: "ext.methodUpdate" OR "ext.tableId" AND "ext.tableName"')}this.fld?this.list=this.fld.filter((e=>!e.deleted)):this.list=[]}};var Ct=l(24152);const Ut=(0,p.Z)($t,[["render",Wt]]),It=Ut;S()($t,"components",{QBtn:b.Z,QTooltip:de.Z,QDialog:ce.Z,QUploader:mt.Z,QCard:ue.Z,QImg:Ct.Z,QCardSection:me.Z,QInput:y.Z,QCardActions:_e.Z,QAvatar:pe.Z}),S()($t,"directives",{ClosePopup:U.Z});const Ft={key:0},Pt={class:"row q-col-gutter-md q-mb-sm"},Vt={class:"col-12"},Tt=(0,a.Uk)("показать на карте");function Nt(e,t,l,i,s,o){const n=(0,a.up)("comp-dadata-address-dialog"),r=(0,a.up)("q-tooltip"),d=(0,a.up)("q-icon"),c=(0,a.up)("q-input");return(0,a.wg)(),(0,a.iD)("div",null,[s.item?((0,a.wg)(),(0,a.iD)("div",Ft,[(0,a.Wm)(n,{ref:"addressDialog",onUpdate:o.updateAddress},null,8,["onUpdate"]),(0,a._)("div",Pt,[(0,a._)("div",Vt,[(0,a.Wm)(c,{outlined:"",label:"Адрес",modelValue:s.item.full,"onUpdate:modelValue":t[1]||(t[1]=e=>s.item.full=e)},(0,a.Nv)({append:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"search",onClick:t[0]||(t[0]=t=>e.$refs.addressDialog.open())})])),_:2},[s.item.geo_lat?{name:"prepend",fn:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"place",onClick:o.openOnMap},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[Tt])),_:1})])),_:1},8,["onClick"])]))}:void 0]),1032,["modelValue"])])])])):(0,a.kq)("",!0)])}const Lt={props:{fld:{},label:{},readonly:null},data(){return{item:null}},watch:{item:{handler(e){this.$emit("update",e)},deep:!0}},methods:{updateAddress(e){let t,l;if(Array.isArray(e)){if(!e[0])return;t=e[0].value,l=e[0].data}else t=e.value,l=e.data;const a=t,{city:i,region:s,area:o,street:n,postal_code:r,house:d,place:c,geo_lat:u,geo_lon:m}=l;this.item.full=a,this.item.geo_lat=u,this.item.geo_lon=m,this.item.source={city:i,region:s,area:o,street:n,postal_code:r,house:d,place:c}},openOnMap(){let e=window.open(`http://maps.yandex.ru/?text=${this.item.geo_lat},${this.item.geo_lon}`,"_blank");e.focus()}},mounted(){this.item=this.fld||{full:null}}},zt=(0,p.Z)(Lt,[["render",Nt]]),Mt=zt;S()(Lt,"components",{QInput:y.Z,QIcon:v.Z,QTooltip:de.Z});const At={key:0,class:"text-caption"},Ot={class:"text-h6"},Rt={class:"row q-col-gutter-md q-mb-sm"};function Et(e,t,l,i,s,o){const n=(0,a.up)("q-icon"),r=(0,a.up)("q-input"),d=(0,a.up)("q-btn"),c=(0,a.up)("q-item-label"),u=(0,a.up)("q-item-section"),m=(0,a.up)("q-item"),p=(0,a.up)("q-list"),_=(0,a.up)("q-card-section"),h=(0,a.up)("q-separator"),g=(0,a.up)("q-card-actions"),f=(0,a.up)("q-card"),w=(0,a.up)("q-dialog"),b=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(r,{label:l.label,modelValue:s.search,"onUpdate:modelValue":t[0]||(t[0]=e=>s.search=e),outlined:"",debounce:"500"},{append:(0,a.w5)((()=>[(0,a.Wm)(n,{name:"search"})])),_:1},8,["label","modelValue"]),(0,a.Wm)(p,{bordered:"",separator:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.resultList,((t,l)=>((0,a.wg)(),(0,a.j4)(m,{key:t.data.hid},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{side:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(l+1)+" ",1),(0,a.Wm)(d,{flat:"",round:"",size:"sm",icon:"add",onClick:l=>e.$emit("add",t)},null,8,["onClick"]),(0,a.Wm)(d,{flat:"",round:"",size:"sm",icon:"help_outline",onClick:e=>o.openDialogWithDetails(t)},null,8,["onClick"])])),_:2},1024)])),_:2},1024),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(t.value),1)])),_:2},1024),(0,a.Wm)(c,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(t.data.inn)+" "+(0,a.zw)(t.data.address.value),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),0==s.resultList.length?((0,a.wg)(),(0,a.iD)("p",At,"не найдено")):(0,a.kq)("",!0),s.selectedItem?((0,a.wg)(),(0,a.j4)(w,{key:1,modelValue:s.isShowDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>s.isShowDialog=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{style:{width:"700px","max-width":"80vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a._)("div",Ot,(0,a.zw)(s.selectedItem.value),1)])),_:1}),(0,a.Wm)(h),(0,a.Wm)(_,{style:{"max-height":"50vh"},class:"scroll"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.flds,(e=>((0,a.wg)(),(0,a.iD)("div",Rt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e,(e=>((0,a.wg)(),(0,a.j4)(r,{outlined:"",key:e.name,label:e.label,value:e.value(s.selectedItem.data),readonly:"",class:(0,a.C_)(e.class)},null,8,["label","value","class"])))),128))])))),256))])),_:1}),(0,a.Wm)(h),(0,a.Wm)(g,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(d,{flat:"",label:"ok",color:"primary"},null,512),[[b]])])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,a.kq)("",!0)])}var Bt=l(61764),Yt=l(6720),Ht=l(15894),Kt=l(90319),Gt=l(42087),Jt=l(64434),Xt=l(92073);const el={props:{label:{type:String}},data(){return{search:"7707083893",resultList:[],selectedItem:null,isShowDialog:!1,flds:[[{value:e=>e.inn,label:"ИНН",class:"col-xs-12 col-sm-6"},{value:e=>e.kpp,label:"КПП",class:"col-xs-12 col-sm-6"}],[{value:e=>e.opf.full,label:"ОПФ",class:"col-xs-12 col-sm-6"},{value:e=>this.$t(`onecContragent.status_${e.state.status}`),label:"Статус",class:"col-xs-12 col-sm-6"}]]}},watch:{search(e){e&&e.length>0&&this.getList()}},methods:{getList(){tl({query:this.search}).subscribe((e=>{e&&(e||(e=[]),this.resultList=e)}))},openDialogWithDetails(e){this.selectedItem=e,this.isShowDialog=!0}}},tl=({query:e})=>(0,Yt.h)({url:"https://suggestions.dadata.ru/suggestions/api/4_1/rs/findById/party",method:"POST",headers:ll(),body:{query:e}}).pipe((0,Ht.q)(1),(0,Kt.U)(al()),(0,Gt.K)(il())),ll=()=>{let e={"Content-Type":"application/json",Accept:"application/json",Authorization:`Token ${Bt.Z.dadataToken}`};return e},al=({successMsg:e}={})=>e=>{if(!e.response)throw new Error(e.response.message);return e.response.suggestions},il=e=>t=>{const l=t.response?t.response.message:t.message;return e&&Jt.Z.create({color:"negative",position:"top-right",message:l}),(0,Xt.of)({ok:!1,message:l})},sl=(0,p.Z)(el,[["render",Et]]),ol=sl;S()(el,"components",{QInput:y.Z,QIcon:v.Z,QList:h.Z,QItem:g.Z,QItemSection:f.Z,QItemLabel:w.Z,QBtn:b.Z,QDialog:ce.Z,QCard:ue.Z,QCardSection:me.Z,QSeparator:le.Z,QCardActions:_e.Z}),S()(el,"directives",{ClosePopup:U.Z});const nl={key:0,class:"text-caption q-mb-none"},rl={key:1,class:"text-caption q-mb-none"};function dl(e,t,l,i,s,o){const n=(0,a.up)("q-icon"),r=(0,a.up)("q-input"),d=(0,a.up)("q-item-label"),c=(0,a.up)("q-item-section"),u=(0,a.up)("q-item"),m=(0,a.up)("q-list"),p=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(r,{dense:"",label:l.label,modelValue:s.search,"onUpdate:modelValue":t[0]||(t[0]=e=>s.search=e),filled:"",debounce:"300"},(0,a.Nv)({append:(0,a.w5)((()=>[(0,a.Wm)(n,{name:"search"})])),_:2},[s.isFirstSelected?{name:"prepend",fn:(0,a.w5)((()=>[(0,a.Wm)(n,{name:"add",onClick:o.add},null,8,["onClick"])]))}:void 0]),1032,["label","modelValue"]),s.notFound?((0,a.wg)(),(0,a.iD)("p",nl,"не найдено")):(0,a.kq)("",!0),s.resultList.length>1?((0,a.wg)(),(0,a.iD)("p",rl,"выберите вариант из списка или продолжите ввод")):(0,a.kq)("",!0),s.resultList.length>0?((0,a.wg)(),(0,a.j4)(m,{key:2,bordered:"",separator:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.resultList,(e=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(u,{key:e.data.hid,clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{onClick:t=>o.selectAddress(e)},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.value),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1536)),[[p]]))),128))])),_:1})):(0,a.kq)("",!0)])}const cl={props:{label:{type:String}},data(){return{search:"",resultList:[],selectedItem:null,notFound:!1,isFirstSelected:!1}},watch:{search(e){e&&e.length>0&&this.getList()}},methods:{getList(){ul({query:this.search}).subscribe((e=>{e&&(e||(e=[]),this.resultList=e,this.notFound=0===e.length,0===e.length&&(this.isFirstSelected=!1))}))},selectAddress(e){this.search=e.value,this.isFirstSelected=!0,this.$nextTick((()=>{1===this.resultList.length&&(this.resultList=[])}))},add(){ul({query:this.search,count:1}).subscribe((e=>{e&&(this.resultList=[],this.search="",this.$emit("update",e))}))}}},ul=({query:e,count:t=10})=>(0,Yt.h)({url:"https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address",method:"POST",headers:ml(),body:{query:e,count:t}}).pipe((0,Ht.q)(1),(0,Kt.U)(pl()),(0,Gt.K)(_l())),ml=()=>{let e={"Content-Type":"application/json",Accept:"application/json",Authorization:`Token ${Bt.Z.dadataToken}`};return e},pl=({successMsg:e}={})=>e=>{if(!e.response)throw new Error(e.response.message);return e.response.suggestions},_l=e=>t=>{const l=t.response?t.response.message:t.message;return e&&Jt.Z.create({color:"negative",position:"top-right",message:l}),(0,Xt.of)({ok:!1,message:l})};var hl=l(46489);const gl=(0,p.Z)(cl,[["render",dl]]),fl=gl;function wl(e,t,l,i,s,o){const n=(0,a.up)("comp-dadata-address"),r=(0,a.up)("q-card-section"),d=(0,a.up)("q-card"),c=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(c,{modelValue:s.isShowDialog,"onUpdate:modelValue":t[0]||(t[0]=e=>s.isShowDialog=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{style:{width:"700px","max-width":"80vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,{label:"Поиск адреса",onUpdate:o.update,class:"q-mb-md"},null,8,["onUpdate"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}S()(cl,"components",{QInput:y.Z,QIcon:v.Z,QList:h.Z,QItem:g.Z,QItemSection:f.Z,QItemLabel:w.Z}),S()(cl,"directives",{Ripple:hl.Z});const bl={props:{label:{type:String}},data(){return{isShowDialog:!1}},methods:{open(){this.isShowDialog=!0},update(e){this.$emit("update",e),this.isShowDialog=!1}}},kl=(0,p.Z)(bl,[["render",wl]]),yl=kl;S()(bl,"components",{QDialog:ce.Z,QCard:ue.Z,QCardSection:me.Z,QCardActions:_e.Z,QBtn:b.Z}),S()(bl,"directives",{ClosePopup:U.Z});const vl={key:1,class:"text-caption"},ql={class:"text-h6"},xl={class:"row q-col-gutter-md q-mb-sm"};function Zl(e,t,l,i,s,o){const n=(0,a.up)("q-icon"),r=(0,a.up)("q-input"),d=(0,a.up)("q-btn"),c=(0,a.up)("q-item-label"),u=(0,a.up)("q-item-section"),m=(0,a.up)("q-item"),p=(0,a.up)("q-list"),_=(0,a.up)("q-card-section"),h=(0,a.up)("q-separator"),g=(0,a.up)("q-card-actions"),f=(0,a.up)("q-card"),w=(0,a.up)("q-dialog"),b=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(r,{label:l.label,modelValue:s.search,"onUpdate:modelValue":t[0]||(t[0]=e=>s.search=e),outlined:"",debounce:"500"},{append:(0,a.w5)((()=>[(0,a.Wm)(n,{name:"search"})])),_:1},8,["label","modelValue"]),s.resultList.length>0?((0,a.wg)(),(0,a.j4)(p,{key:0,bordered:"",separator:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.resultList,((t,l)=>((0,a.wg)(),(0,a.j4)(m,{key:t.data.hid},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{side:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(l+1)+" ",1),(0,a.Wm)(d,{flat:"",round:"",size:"sm",icon:"add",onClick:l=>e.$emit("add",t)},null,8,["onClick"]),(0,a.Wm)(d,{flat:"",round:"",size:"sm",icon:"help_outline",onClick:e=>o.openDialogWithDetails(t)},null,8,["onClick"])])),_:2},1024)])),_:2},1024),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(t.value),1)])),_:2},1024),(0,a.Wm)(c,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(t.data.inn)+" "+(0,a.zw)(t.data.address.value),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(0,a.kq)("",!0),s.notFound?((0,a.wg)(),(0,a.iD)("p",vl,"не найдено")):(0,a.kq)("",!0),s.selectedItem?((0,a.wg)(),(0,a.j4)(w,{key:2,modelValue:s.isShowDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>s.isShowDialog=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{style:{width:"700px","max-width":"80vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a._)("div",ql,(0,a.zw)(s.selectedItem.value),1)])),_:1}),(0,a.Wm)(h),(0,a.Wm)(_,{style:{"max-height":"50vh"},class:"scroll"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.flds,(e=>((0,a.wg)(),(0,a.iD)("div",xl,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e,(e=>((0,a.wg)(),(0,a.j4)(r,{outlined:"",key:e.name,label:e.label,value:e.value(s.selectedItem.data),readonly:"",class:(0,a.C_)(e.class)},null,8,["label","value","class"])))),128))])))),256))])),_:1}),(0,a.Wm)(h),(0,a.Wm)(g,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(d,{flat:"",label:"ok",color:"primary"},null,512),[[b]])])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,a.kq)("",!0)])}const Sl={props:{label:{type:String}},data(){return{search:"",resultList:[],selectedItem:null,isShowDialog:!1,notFound:!1,flds:[[{value:e=>e.inn,label:"ИНН",class:"col-xs-12 col-sm-6"},{value:e=>e.kpp,label:"КПП",class:"col-xs-12 col-sm-6"}],[{value:e=>e.opf.full,label:"ОПФ",class:"col-xs-12 col-sm-6"},{value:e=>$l(e.state.status),label:"Статус",class:"col-xs-12 col-sm-6"}]]}},watch:{search(e){e&&e.length>0&&this.getList()}},methods:{getList(){Dl({query:this.search}).subscribe((e=>{e&&(e||(e=[]),this.resultList=e,this.notFound=0===e.length)}))},openDialogWithDetails(e){this.selectedItem=e,this.isShowDialog=!0}}},Dl=({query:e})=>(0,Yt.h)({url:"https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/party",method:"POST",headers:Ql(),body:{query:e}}).pipe((0,Ht.q)(1),(0,Kt.U)(jl()),(0,Gt.K)(Wl())),Ql=()=>{let e={"Content-Type":"application/json",Accept:"application/json",Authorization:`Token ${Bt.Z.dadataToken}`};return e},jl=({successMsg:e}={})=>e=>{if(!e.response)throw new Error(e.response.message);return e.response.suggestions},Wl=e=>t=>{const l=t.response?t.response.message:t.message;return e&&Jt.Z.create({color:"negative",position:"top-right",message:l}),(0,Xt.of)({ok:!1,message:l})},$l=e=>{switch(e){case"ACTIVE":return"действующая";case"LIQUIDATING":return"ликвидируется";case"LIQUIDATED":return"ликвидирована";case"REORGANIZING":return"в процессе присоединения к другому юрлицу";default:return e}},Cl=(0,p.Z)(Sl,[["render",Zl]]),Ul=Cl;S()(Sl,"components",{QInput:y.Z,QIcon:v.Z,QList:h.Z,QItem:g.Z,QItemSection:f.Z,QItemLabel:w.Z,QBtn:b.Z,QDialog:ce.Z,QCard:ue.Z,QCardSection:me.Z,QSeparator:le.Z,QCardActions:_e.Z}),S()(Sl,"directives",{ClosePopup:U.Z});const Il=(0,a.Uk)(" Ничего не найдено ");function Fl(e,t,l,i,s,o){const n=(0,a.up)("q-item-section"),r=(0,a.up)("q-item"),d=(0,a.up)("q-select");return(0,a.wg)(),(0,a.j4)(d,{outlined:"",modelValue:s.item,"onUpdate:modelValue":t[0]||(t[0]=e=>s.item=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"300",label:l.label,options:s.options,onFilter:o.filterFn},{"no-option":(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,{class:"text-grey"},{default:(0,a.w5)((()=>[Il])),_:1})])),_:1})])),_:1},8,["modelValue","label","options","onFilter"])}const Pl={props:{label:{},pgMethod:{},title:{},ext:{},existIds:{}},data(){return{item:null,options:[]}},watch:{item(e){e&&this.$emit("update",e.value)}},methods:{filterFn(e,t,l){t((()=>{this.loadData(e)}))},loadData(e=""){let t={search_text:e,per_page:20};this.ext&&(t=Object.assign({search_text:e,per_page:20},this.ext)),this.$utils.postCallPgMethod({method:this.pgMethod,params:t}).subscribe((e=>{e.ok&&(e.result||(e.result=[]),this.existIds&&Array.isArray(this.existIds)&&(e.result=e.result.filter((e=>!this.existIds.includes(e.id)))),this.options=e.result.map((e=>{let t=e[this.title?this.title:"title"];return u().isFunction(this.title)&&(t=this.title(e)),t||(t="неверно указан параметр для label"),{label:t,value:e}})))}))}},mounted(){this.loadData()}},Vl=(0,p.Z)(Pl,[["render",Fl]]),Tl=Vl;S()(Pl,"components",{QSelect:A.Z,QItem:g.Z,QItemSection:f.Z});const Nl={key:0},Ll={class:"text-grey-8 q-gutter-xs"},zl=(0,a._)("span",{class:"q-ml-sm"},"Добавление",-1),Ml={class:"row q-col-gutter-md q-mt-sm"},Al={class:"row q-col-gutter-md q-mt-sm"},Ol={class:"q-ml-sm"};function Rl(e,t,l,i,s,o){const n=(0,a.up)("q-space"),r=(0,a.up)("q-btn"),d=(0,a.up)("q-bar"),c=(0,a.up)("comp-stat-img-src"),u=(0,a.up)("q-avatar"),m=(0,a.up)("q-item-section"),p=(0,a.up)("q-item-label"),_=(0,a.up)("q-tooltip"),h=(0,a.up)("q-item"),g=(0,a.up)("q-list"),f=(0,a.up)("q-card-section"),w=(0,a.up)("comp-search-ref-in-list-widget"),b=(0,a.up)("comp-fld"),k=(0,a.up)("q-card-actions"),y=(0,a.up)("q-card"),v=(0,a.up)("q-dialog"),q=(0,a.Q2)("close-popup");return"new"!=l.id?((0,a.wg)(),(0,a.iD)("div",Nl,[(0,a.Wm)(d,{class:"bg-secondary text-white shadow-2"},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,a.zw)(l.label),1),(0,a.Wm)(n),s.isShowList&&s.list.length>0?((0,a.wg)(),(0,a.j4)(r,{key:0,dense:"",flat:"",icon:"expand_less",onClick:t[0]||(t[0]=e=>s.isShowList=!1)})):(0,a.kq)("",!0),!s.isShowList&&s.list.length>0?((0,a.wg)(),(0,a.j4)(r,{key:1,dense:"",flat:"",icon:"expand_more",onClick:t[1]||(t[1]=e=>s.isShowList=!0)})):(0,a.kq)("",!0),l.readonly?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(r,{key:2,dense:"",flat:"",icon:"add",onClick:t[2]||(t[2]=e=>s.isShowAddDialog=!0)}))])),_:1}),s.isShowList?((0,a.wg)(),(0,a.j4)(g,{key:0,bordered:"",separator:"",dense:l.dense},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.filteredList,(t=>((0,a.wg)(),(0,a.j4)(h,{key:t.id},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{avatar:"",onClick:a=>e.$router.push(`${l.tableDependRoute}/${t[l.tableDependFldName]}`)},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{rounded:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{src:o.avatar(t)},null,8,["src"])])),_:2},1024)])),_:2},1032,["onClick"]),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(t.options.title[o.tableDependFldTitle]),1)])),_:2},1024),(0,a.WI)(e.$slots,"otherFlds",{item:t})])),_:2},1024),l.readonly?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(m,{key:0,side:""},{default:(0,a.w5)((()=>[(0,a._)("div",Ll,[l.flds?((0,a.wg)(),(0,a.j4)(r,{key:0,flat:"",round:"",icon:"edit",size:"sm",onClick:e=>o.showEditDialog(t)},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("message.edit")),1)])),_:1})])),_:2},1032,["onClick"])):(0,a.kq)("",!0),(0,a.Wm)(r,{flat:"",round:"",icon:"delete",size:"sm",onClick:e=>o.showDeleteDialog(t.id)},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("message.delete")),1)])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024))])),_:2},1024)))),128))])),_:3},8,["dense"])):(0,a.kq)("",!0),(0,a.Wm)(v,{modelValue:s.isShowAddDialog,"onUpdate:modelValue":t[4]||(t[4]=e=>s.isShowAddDialog=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{style:{width:"700px","max-width":"80vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{class:"row items-center"},{default:(0,a.w5)((()=>[zl])),_:1}),(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w,{label:"Поиск","pg-method":l.tableDependName+"_list",onUpdate:t[3]||(t[3]=e=>s.selectedForAdd=e),ext:l.searchExt},null,8,["pg-method","ext"]),l.flds?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(l.flds,(e=>((0,a.wg)(),(0,a.iD)("div",Ml,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e,(e=>((0,a.wg)(),(0,a.j4)(b,{key:e.name,fld:s.localItem[e.name],type:e.type,onUpdate:t=>s.localItem[e.name]=t,label:e.label,selectOptions:e.selectOptions?e.selectOptions():[],columnClass:e.columnClass},null,8,["fld","type","onUpdate","label","selectOptions","columnClass"])))),128))])))),256)):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(k,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(r,{flat:"",label:e.$t("message.cancel")},null,8,["label"]),[[q]]),(0,a.wy)((0,a.Wm)(r,{flat:"",label:"Добавить",onClick:o.add},null,8,["onClick"]),[[q]]),l.hideCreateNew?(0,a.kq)("",!0):(0,a.wy)(((0,a.wg)(),(0,a.j4)(r,{key:0,flat:"",label:"Создать",onClick:o.openNew,class:"q-ml-md"},null,8,["onClick"])),[[q]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(v,{modelValue:s.isShowEditDialog,"onUpdate:modelValue":t[5]||(t[5]=e=>s.isShowEditDialog=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{style:{width:"700px","max-width":"80vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[l.flds&&s.selectedForEdit?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(l.flds,(e=>((0,a.wg)(),(0,a.iD)("div",Al,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e,(e=>((0,a.wg)(),(0,a.j4)(b,{key:e.name,fld:s.selectedForEdit[e.name],type:e.type,onUpdate:t=>s.selectedForEdit[e.name]=t,label:e.label,selectOptions:e.selectOptions?e.selectOptions():[],columnClass:e.columnClass},null,8,["fld","type","onUpdate","label","selectOptions","columnClass"])))),128))])))),256)):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(k,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(r,{flat:"",label:e.$t("message.cancel")},null,8,["label"]),[[q]]),(0,a.wy)((0,a.Wm)(r,{flat:"",label:"Ok",onClick:o.save},null,8,["onClick"]),[[q]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(v,{modelValue:s.isShowDeleteDialog,"onUpdate:modelValue":t[6]||(t[6]=e=>s.isShowDeleteDialog=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(f,{class:"row items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{rounded:"",icon:"warning",color:"warning","text-color":"white"}),(0,a._)("span",Ol,(0,a.zw)(e.$t("message.delete"))+"?",1)])),_:1}),(0,a.Wm)(k,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(r,{flat:"",label:e.$t("message.cancel")},null,8,["label"]),[[q]]),(0,a.wy)((0,a.Wm)(r,{flat:"",label:e.$t("message.delete"),onClick:o.remove},null,8,["label","onClick"]),[[q]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])):(0,a.kq)("",!0)}const El={props:["id","tableIdName","tableIdFldName","tableDependName","tableDependFldName","tableDependRoute","linkTableName","label","avatarSrc","hideCreateNew","flds","readonly","searchExt","filterListFn","dense"],computed:{tableDependFldTitle(){return this.tableDependFldName.split("_id")[0]+"_title"},filteredList(){return this.filterListFn?this.list.filter(this.filterListFn):this.list}},data(){return{isShowList:!0,list:[],localItem:{},isShowAddDialog:!1,isShowDeleteDialog:!1,selectedForDeleteId:null,selectedForAdd:null,isShowEditDialog:!1,selectedForEdit:null}},methods:{avatar(e){let t=this.tableDependFldName.split("_id")[0];return e.options.title[t+"_avatar"]||this.avatarSrc||"https://www.svgrepo.com/show/95333/avatar.svg"},showDeleteDialog(e){this.selectedForDeleteId=e,this.isShowDeleteDialog=!0},showEditDialog(e){this.isShowEditDialog=!0,this.selectedForEdit=e},add(){if(!this.selectedForAdd)return;let e={id:-1};e[this.tableIdFldName]=+this.id,e[this.tableDependFldName]=this.selectedForAdd.id,this.$utils.postCallPgMethod({method:`${this.linkTableName}_update`,params:Object.assign(e,this.localItem)}).subscribe((e=>{e.ok&&(this.reload(),this.$emit("reload"))}))},remove(){this.$utils.postCallPgMethod({method:`${this.linkTableName}_update`,params:{id:this.selectedForDeleteId,deleted:!0}}).subscribe((e=>{e.ok&&(this.reload(),this.$emit("reload"))}))},reload(){let e={};e[this.tableIdFldName]=+this.id,e.order_by="id",this.$utils.postCallPgMethod({method:`${this.linkTableName}_list`,params:e}).subscribe((e=>{e.ok&&(this.list=e.result)}))},save(){this.$utils.postCallPgMethod({method:`${this.linkTableName}_update`,params:this.selectedForEdit}).subscribe((e=>{e.ok&&(this.isShowEditDialog=!1,this.selectedForEdit=null,this.reload(),this.$emit("reload"))}))},openNew(){window.open(`${this.tableDependRoute}/new`,"_blank")}},mounted(){this.reload(),this.flds&&u().flattenDeep(this.flds).map((e=>{this.localItem[e.name]="checkbox"!==e.type&&null}))}},Bl=(0,p.Z)(El,[["render",Rl]]),Yl=Bl;function Hl(e,t,l,i,s,o){const n=(0,a.up)("q-tooltip"),r=(0,a.up)("q-btn"),d=(0,a.up)("q-uploader"),c=(0,a.up)("q-card-section"),u=(0,a.up)("q-card"),m=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.iD)("div",null,[l.is_btn_with_label?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(r,{key:0,icon:s.iconName,flat:"",round:"",size:o.btnSize,onClick:t[0]||(t[0]=e=>s.isOpenUpload=!0)},{default:(0,a.w5)((()=>[l.tooltip?((0,a.wg)(),(0,a.j4)(n,{key:0},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(l.tooltip),1)])),_:1})):(0,a.kq)("",!0)])),_:1},8,["icon","size"])),l.is_btn_with_label?((0,a.wg)(),(0,a.j4)(r,{key:1,icon:s.iconName,outline:"",label:l.label,color:o.btnColor,size:o.btnSize,onClick:t[1]||(t[1]=e=>s.isOpenUpload=!0)},{default:(0,a.w5)((()=>[l.tooltip?((0,a.wg)(),(0,a.j4)(n,{key:0},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(l.tooltip),1)])),_:1})):(0,a.kq)("",!0)])),_:1},8,["icon","label","color","size"])):(0,a.kq)("",!0),(0,a.Wm)(m,{modelValue:s.isOpenUpload,"onUpdate:modelValue":t[2]||(t[2]=e=>s.isOpenUpload=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{ref:"uploader",label:s.labelName,"auto-upload":"",filter:o.checkFileType,url:o.uploadUrl,headers:o.headers,onUploaded:o.uploaded,onFailed:o.failed},null,8,["label","filter","url","headers","onUploaded","onFailed"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}S()(El,"components",{QBar:ct.Z,QSpace:ut.Z,QBtn:b.Z,QList:h.Z,QItem:g.Z,QItemSection:f.Z,QAvatar:pe.Z,QItemLabel:w.Z,QTooltip:de.Z,QDialog:ce.Z,QCard:ue.Z,QCardSection:me.Z,QCardActions:_e.Z}),S()(El,"directives",{ClosePopup:U.Z});const Kl={props:["url","fileExt","icon","tooltip","label","is_btn_with_label","size","color","notifyResultFunc"],computed:{uploadUrl(){return`${this.$config.apiUrl()}/api/${this.url}`},headers:function(){const e=localStorage.getItem(this.$config.appName);return[{name:"Auth-token",value:e}]},btnSize(){return this.size||"sm"},btnColor(){return this.color||"primary"}},data(){return{isOpenUpload:!1,iconName:"cloud_upload",labelName:"Выберите файл для загрузки"}},methods:{checkFileType(e){if(this.fileExt&&this.fileExt.length>0){let t=e.filter((e=>this.fileExt.filter((t=>e.name.includes(`.${t}`))).length>0));return 0===t.length&&this.$q.notify({type:"negative",message:`файл должен иметь расширение ${this.fileExt}`}),t}return e},uploaded({xhr:{response:e}}){const t=JSON.parse(e);t.ok?(this.$refs.uploader.reset(),this.isOpenUpload=!1,this.$emit("result",t.result),this.$emit("reloadList"),this.$q.notify({color:"positive",position:"bottom",message:this.notifyResultFunc?this.notifyResultFunc(t.result):t.result})):this.$q.notify({color:"negative",position:"bottom",message:t.message})},failed(e){let t="ошибка загрузки";if(e.xhr&&e.xhr.responseText){let l=JSON.parse(e.xhr.responseText);l.message&&(t=l.message)}this.$q.notify({color:"negative",position:"bottom",message:t})}},mounted(){this.icon&&(this.iconName=this.icon),this.label&&(this.labelName=this.label)}},Gl=(0,p.Z)(Kl,[["render",Hl]]),Jl=Gl;S()(Kl,"components",{QBtn:b.Z,QTooltip:de.Z,QDialog:ce.Z,QCard:ue.Z,QCardSection:me.Z,QUploader:mt.Z});const Xl={class:"q-ml-sm"};function ea(e,t,l,i,s,o){const n=(0,a.up)("q-avatar"),r=(0,a.up)("q-card-section"),d=(0,a.up)("q-btn"),c=(0,a.up)("q-card-actions"),u=(0,a.up)("q-card"),m=(0,a.up)("q-dialog"),p=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(m,{modelValue:s.isShowDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>s.isShowDialog=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"row items-center"},{default:(0,a.w5)((()=>[l.icon?((0,a.wg)(),(0,a.j4)(n,{key:0,icon:l.icon,color:"primary","text-color":"white"},null,8,["icon"])):(0,a.kq)("",!0),(0,a._)("span",Xl,(0,a.zw)(l.label),1)])),_:1}),(0,a.Wm)(c,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(d,{flat:"",label:e.$t("message.cancel"),color:"primary"},null,8,["label"]),[[p]]),(0,a.wy)((0,a.Wm)(d,{flat:"",label:"Ок",color:"primary",onClick:t[0]||(t[0]=t=>e.$emit("update",s.item))},null,512),[[p]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}const ta={props:["label","icon"],data(){return{isShowDialog:!1,item:null}},methods:{open(e){this.isShowDialog=!0,this.item=e}}},la=(0,p.Z)(ta,[["render",ea]]),aa=la;S()(ta,"components",{QDialog:ce.Z,QCard:ue.Z,QCardSection:me.Z,QAvatar:pe.Z,QCardActions:_e.Z,QBtn:b.Z}),S()(ta,"directives",{ClosePopup:U.Z});const ia={class:"text-h6"},sa={class:"text-h6"},oa={class:"row q-col-gutter-md q-mb-sm"};function na(e,t,l,i,s,o){const n=(0,a.up)("q-card-section"),r=(0,a.up)("q-input"),d=(0,a.up)("q-select"),c=(0,a.up)("comp-fld-ref-search"),u=(0,a.up)("comp-fld-date"),m=(0,a.up)("q-checkbox"),p=(0,a.up)("q-btn"),_=(0,a.up)("q-card-actions"),h=(0,a.up)("q-card"),g=(0,a.up)("q-dialog");return i.item?((0,a.wg)(),(0,a.j4)(g,{key:0,modelValue:i.isShowAddDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>i.isShowAddDialog=e),persistent:-1!==i.item.id},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{style:{width:"700px","max-width":"80vw"}},{default:(0,a.w5)((()=>[-1===i.item.id&&l.labelNew?((0,a.wg)(),(0,a.j4)(n,{key:0},{default:(0,a.w5)((()=>[(0,a._)("div",ia,(0,a.zw)(l.labelNew),1)])),_:1})):(0,a.kq)("",!0),i.item.id>0&&l.labelEdit?((0,a.wg)(),(0,a.j4)(n,{key:1},{default:(0,a.w5)((()=>[(0,a._)("div",sa,(0,a.zw)(l.labelEdit),1)])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(n,{class:"q-pt-none"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.flds,(t=>((0,a.wg)(),(0,a.iD)("div",oa,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t,(t=>((0,a.wg)(),(0,a.iD)("div",{class:(0,a.C_)(t.classCol||"col-12")},["text"!==t.type&&"number"!==t.type||!t.vif(i.item)?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(r,{key:0,label:t.label,modelValue:i.item[t.name],"onUpdate:modelValue":e=>i.item[t.name]=e,type:t.type,outlined:"",readonly:t.readonly},null,8,["label","modelValue","onUpdate:modelValue","type","readonly"])),"select"===t.type&&t.vif(i.item)?((0,a.wg)(),(0,a.j4)(d,{key:1,label:t.label,modelValue:i.item[t.name],"onUpdate:modelValue":e=>i.item[t.name]=e,options:t.options,outlined:"",readonly:t.readonly},null,8,["label","modelValue","onUpdate:modelValue","options","readonly"])):(0,a.kq)("",!0),"ref"===t.type&&t.vif(i.item)?((0,a.wg)(),(0,a.j4)(c,{key:2,outlined:"",pgMethod:t.pgMethod,ext:t.ext||{},label:t.label,item:i.item[t.name+"_title"],itemId:i.item[t.name],onUpdate:e=>t.updateFn?t.updateFn(i.item,e):i.item[t.name]=e.id,onClear:e=>i.item[t.name]=null,readonly:t.readonly},null,8,["pgMethod","ext","label","item","itemId","onUpdate","onClear","readonly"])):(0,a.kq)("",!0),"date"===t.type&&t.vif(i.item)?((0,a.wg)(),(0,a.j4)(u,{key:3,outlined:"","date-string":e.$utils.formatPgDate(i.item[t.name]),onUpdate:e=>i.item[t.name]=e,readonly:t.readonly},null,8,["date-string","onUpdate","readonly"])):(0,a.kq)("",!0),"checkbox"===t.type&&t.vif(i.item)?((0,a.wg)(),(0,a.j4)(m,{key:4,label:t.label,modelValue:i.item[t.name],"onUpdate:modelValue":e=>i.item[t.name]=e},null,8,["label","modelValue","onUpdate:modelValue"])):(0,a.kq)("",!0)],2)))),256))])))),256))])),_:1}),(0,a.Wm)(_,{align:"right",class:"bg-white text-teal"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{flat:"",label:"Отмена",onClick:t[0]||(t[0]=e=>i.isShowAddDialog=!1)}),(0,a.Wm)(p,{flat:"",label:"Сохранить",onClick:i.save},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","persistent"])):(0,a.kq)("",!0)}var ra=l(91589),da=l(48825);const ca={props:["pgMethod","labelNew","labelEdit"],emits:["update"],setup(e,{emit:t}){const l=(0,da.Z)(),i=(0,a.iH)(null),s=(0,a.iH)(!1),o=(0,a.iH)([]);let n;const r=e=>{s.value=!0,i.value=e.item,o.value=e.flds.map((e=>e.map((e=>(e.vif||(e.vif=()=>!0),e))))),n=e.beforeSaveCb},d=()=>{const a=Object.assign({},i.value);let r=!1;u().flattenDeep(o.value).filter((e=>e.required)).map((e=>{a[e.name]||(r=!0,l.notify({type:"negative",message:`не заполнено поле: ${e.label}`}))})),r||(u().flattenDeep(o.value).filter((e=>"select"===e.type)).map((e=>a[e.name]=a[e.name].value)),n&&n(a),e.pgMethod?ra.Z.callPgMethod(e.pgMethod,a,(e=>{s.value=!1,t("update",e)})):(s.value=!1,t("update",a)))};return{item:i,isShowAddDialog:s,show:r,flds:o,save:d}}},ua=(0,p.Z)(ca,[["render",na]]),ma=ua;function pa(e,t,l,i,s,o){const n=(0,a.up)("q-img");return(0,a.wg)(),(0,a.j4)(n,{src:o.imgUrl,onError:t[0]||(t[0]=t=>e.$emit("error",t))},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},8,["src"])}S()(ca,"components",{QDialog:ce.Z,QCard:ue.Z,QCardSection:me.Z,QInput:y.Z,QSelect:A.Z,QCheckbox:O.Z,QCardActions:_e.Z,QBtn:b.Z});const _a={props:["src"],computed:{imgUrl:function(){return this.src?this.src.includes("http")||this.src.startsWith("image")?this.src:`${this.$config.apiUrl()}${this.src}`:"https://www.foot.com/wp-content/uploads/2017/03/placeholder.gif"}}},ha=(0,p.Z)(_a,[["render",pa]]),ga=ha;S()(_a,"components",{QImg:Ct.Z});const fa=(0,a._)("div",{class:"text-h6"},"Создать задачу",-1),wa={class:"row q-col-gutter-md q-mb-sm"},ba={class:"col-12"},ka={class:"row q-col-gutter-md q-mb-sm"},ya={class:"col-xs-12 col-sm-6 col-md-6"},va={class:"col-xs-12 col-sm-6 col-md-6"},qa={class:"row q-col-gutter-md q-mb-sm"},xa={class:"col-12"};function Za(e,t,l,i,s,o){const n=(0,a.up)("comp-fld-ref-search"),r=(0,a.up)("comp-fld-user-search"),d=(0,a.up)("comp-fld-date-time"),c=(0,a.up)("q-input"),u=(0,a.up)("q-card-section"),m=(0,a.up)("q-btn"),p=(0,a.up)("q-card-actions"),_=(0,a.up)("q-card"),h=(0,a.up)("q-dialog"),g=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(h,{modelValue:s.isShowDialog,"onUpdate:modelValue":t[3]||(t[3]=e=>s.isShowDialog=e),onHide:o.hide},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{style:{width:"700px","max-width":"80vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[fa,(0,a._)("div",wa,[(0,a._)("div",ba,[(0,a.Wm)(n,{label:"Тип задачи",item:"",pgMethod:"task_type_list",onUpdate:o.updateTaskType,ext:{table_name:l.table_name}},null,8,["onUpdate","ext"])])]),(0,a._)("div",ka,[(0,a._)("div",ya,[(0,a.Wm)(r,{label:"Ответственный",user:"",onUpdate:t[0]||(t[0]=e=>s.task.executor_id=e.id)})]),(0,a._)("div",va,[(0,a.Wm)(d,{label:"Deadline",onUpdate:t[1]||(t[1]=e=>s.task.deadline=e)})])]),(0,a._)("div",qa,[(0,a._)("div",xa,[(0,a.Wm)(c,{outlined:"",label:"Текст",modelValue:s.task.content,"onUpdate:modelValue":t[2]||(t[2]=e=>s.task.content=e),autogrow:""},null,8,["modelValue"])])])])),_:1}),(0,a.Wm)(p,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(m,{flat:"",label:e.$t("message.cancel")},null,8,["label"]),[[g]]),(0,a.Wm)(m,{flat:"",label:"OK",color:"primary",onClick:o.done},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onHide"])}const Sa={props:["table_id","table_name"],data(){return{isShowDialog:!1,task:{}}},methods:{open(){this.isShowDialog=!0},hide(){},updateTaskType({id:e,item:t}){this.task.task_type_id=e;const l=t.item.table_name;l?(this.task.table_name=l,this.task.table_id=+this.table_id):(this.task.table_name=null,this.task.table_id=null)},done(){let e=!1;const t=[{fld:"task_type_id",title:"Тип задачи"},{fld:"deadline",title:"Deadline"},{fld:"executor_id",title:"Ответственный"}];if(t.map((t=>{this.task[t.fld]||(e=!0,this.$q.notify({message:`Поле "${t.title}" не заполнено`,type:"negative"}))})),e)return;let l=Object.assign({id:-1},this.task);this.$utils.postCallPgMethod({method:"task_update",params:l}).subscribe((e=>{e.ok&&(this.isShowDialog=!1,this.task={},this.$emit("updated"))}))}}},Da=(0,p.Z)(Sa,[["render",Za]]),Qa=Da;S()(Sa,"components",{QDialog:ce.Z,QCard:ue.Z,QCardSection:me.Z,QInput:y.Z,QCardActions:_e.Z,QBtn:b.Z}),S()(Sa,"directives",{ClosePopup:U.Z});const ja={class:"text-h6"};function Wa(e,t,l,i,s,o){const n=(0,a.up)("q-card-section"),r=(0,a.up)("q-slider"),d=(0,a.up)("q-input"),c=(0,a.up)("q-btn"),u=(0,a.up)("q-card-actions"),m=(0,a.up)("q-card"),p=(0,a.up)("q-dialog"),_=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(p,{modelValue:s.isShowDialog,"onUpdate:modelValue":t[2]||(t[2]=e=>s.isShowDialog=e),onHide:o.hide},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{style:{width:"700px","max-width":"80vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a._)("div",ja,(0,a.zw)(s.task.task_type_title),1)])),_:1}),(0,a.Wm)(n,{class:"q-mt-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:s.success_rate,"onUpdate:modelValue":t[0]||(t[0]=e=>s.success_rate=e),min:0,max:10,step:1,snap:"","label-always":"","label-value":`Оценка успешности: ${s.success_rate}`,markers:"",color:"primary"},null,8,["modelValue","label-value"])])),_:1}),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{outlined:"",label:"Результат",modelValue:s.taskResult,"onUpdate:modelValue":t[1]||(t[1]=e=>s.taskResult=e),autogrow:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(c,{flat:"",label:e.$t("message.cancel")},null,8,["label"]),[[_]]),(0,a.Wm)(c,{flat:"",label:"OK",color:"primary",onClick:o.done},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onHide"])}const $a={data(){return{isShowDialog:!1,task:{},success_rate:0,taskResult:null}},methods:{open(e){this.task=e,this.isShowDialog=!0},hide(){this.success_rate=0,this.taskResult=null},done(){this.$utils.postCallPgMethod({method:"task_action_to_finished",params:{id:this.task.id,result:this.taskResult,success_rate:this.success_rate}}).subscribe((e=>{e.ok&&(this.$emit("taskFinished",this.task.id),this.isShowDialog=!1)}))}}};var Ca=l(62064);const Ua=(0,p.Z)($a,[["render",Wa]]),Ia=Ua;S()($a,"components",{QDialog:ce.Z,QCard:ue.Z,QCardSection:me.Z,QSlider:Ca.Z,QInput:y.Z,QCardActions:_e.Z,QBtn:b.Z}),S()($a,"directives",{ClosePopup:U.Z});const Fa={class:"row justify-center"},Pa=(0,a._)("img",{src:"https://image.flaticon.com/icons/svg/3081/3081489.svg"},null,-1),Va=(0,a.Uk)("создать чат"),Ta=(0,a._)("div",null,"чат",-1);function Na(e,t,l,i,s,o){const n=(0,a.up)("q-avatar"),r=(0,a.up)("q-tooltip"),d=(0,a.up)("q-btn"),c=(0,a.up)("q-icon"),u=(0,a.up)("q-bar"),m=(0,a.up)("q-chat-message"),p=(0,a.up)("q-card-section"),_=(0,a.up)("q-scroll-area"),h=(0,a.up)("q-input"),g=(0,a.up)("q-card");return(0,a.wg)(),(0,a.iD)("div",Fa,[s.isShowNewChatBtn?((0,a.wg)(),(0,a.j4)(d,{key:0,round:"",color:"secondary",onClick:o.createChat},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{size:"52px"},{default:(0,a.w5)((()=>[Pa])),_:1}),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[Va])),_:1})])),_:1},8,["onClick"])):(0,a.kq)("",!0),s.chat?((0,a.wg)(),(0,a.j4)(g,{key:1,style:{width:"100%","max-width":"400px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{name:"chat"}),Ta])),_:1}),(0,a.Wm)(_,{ref:"chatScroll","thumb-style":s.thumbStyle,"bar-style":s.barStyle,style:{height:"400px","max-width":"400px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.msgList,(t=>((0,a.wg)(),(0,a.j4)(m,{key:t.id,name:t.fullname,avatar:t.avatar,text:[t.title],stamp:e.$utils.formatPgDateTime(t.updated_at),sent:""},null,8,["name","avatar","text","stamp"])))),128))])),_:1})])),_:1},8,["thumb-style","bar-style"]),(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(h,{label:"написать сообщение",outlined:"",modelValue:s.newMsg,"onUpdate:modelValue":t[0]||(t[0]=e=>s.newMsg=e),autogrow:""},{append:(0,a.w5)((()=>[s.newMsg&&""!==s.newMsg?((0,a.wg)(),(0,a.j4)(c,{key:0,name:"send",onClick:o.send,class:"cursor-pointer"},null,8,["onClick"])):(0,a.kq)("",!0)])),_:1},8,["modelValue"])])),_:1})])),_:1})):(0,a.kq)("",!0)])}const La={props:["table_name","table_id"],data(){return{chat:null,isShowNewChatBtn:!1,msgList:[],newMsg:null,thumbStyle:{right:"4px",borderRadius:"5px",backgroundColor:"#027be3",width:"5px",opacity:.75},barStyle:{right:"2px",borderRadius:"9px",backgroundColor:"#027be3",width:"9px",opacity:.2}}},methods:{createChat(){this.isShowNewChatBtn=!1,this.$utils.postCallPgMethod({method:"chat_update",params:{id:-1,table_name:this.table_name,table_id:this.table_id}}).subscribe((e=>{e.ok&&(this.reload(),this.newMsg=null)}))},send(){this.$utils.postCallPgMethod({method:"chat_message_update",params:{id:-1,chat_id:this.chat.id,title:this.newMsg}}).subscribe((e=>{e.ok&&(this.reload(),this.newMsg=null)}))},reload(){this.$utils.postCallPgMethod({method:"chat_for_table_id",params:{table_name:this.table_name,table_id:this.table_id},isShowError:!1}).subscribe((e=>{e.ok&&(this.isShowNewChatBtn=!1,e.result.length>0&&(this.chat=e.result[0],this.msgList=e.result[0].message_list||[],this.msgList=this.msgList.map((e=>(e.avatar?(e.avatar=`${this.$config.apiUrl()}${e.avatar}`,console.log("v.avatar:",e.avatar)):e.avatar="https://www.svgrepo.com/show/95333/avatar.svg",e))),this.$nextTick((()=>{const e=this.$refs.chatScroll,t=e.getScrollTarget(),l=100;e.setScrollPosition(t.scrollHeight,l)}))))}))}},mounted(){this.reload(),setTimeout((()=>{this.chat||(this.isShowNewChatBtn=!0)}),400)}};var za=l(47704),Ma=l(40629);const Aa=(0,p.Z)(La,[["render",Na]]),Oa=Aa;S()(La,"components",{QBtn:b.Z,QAvatar:pe.Z,QTooltip:de.Z,QCard:ue.Z,QBar:ct.Z,QIcon:v.Z,QScrollArea:za.Z,QCardSection:me.Z,QChatMessage:Ma.Z,QInput:y.Z});const Ra=e=>{e.component("comp-doc-list",Q),e.component("comp-item-dropdown-btn",F),e.component("comp-fld",E),e.component("comp-fld-user-search",G),e.component("comp-fld-user-multiple-search",ze),e.component("comp-breadcrumb",ie),e.component("comp-delete-btn-in-list",ge),e.component("comp-fld-date",xe),e.component("comp-fld-date-time",$e),e.component("comp-item-btn-save",Pe),e.component("comp-fld-ref-search",Ye),e.component("comp-fld-select-city",Xe),e.component("comp-fld-contact",at),e.component("comp-fld-files",_t),e.component("comp-fld-img",vt),e.component("comp-fld-address",Mt),e.component("comp-fld-img-list",It),e.component("comp-dadata-suggestion",ol),e.component("comp-dadata-address",fl),e.component("comp-dadata-address-dialog",yl),e.component("comp-dadata-company",Ul),e.component("comp-search-ref-in-list-widget",Tl),e.component("comp-link-list-widget",Yl),e.component("comp-stat-img-src",ga),e.component("comp-edit-dialog",ma),e.component("comp-dialog-confirm",aa),e.component("comp-dialog-task-add",Qa),e.component("comp-dialog-task-done",Ia),e.component("comp-chat",Oa),e.component("comp-file-upload",Jl)},Ea=({app:e})=>{Ra(e)}},44926:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>i});var a=l(91589);const i=async({app:e})=>{e.config.globalProperties.$utils=a.Z}},46700:(e,t,l)=>{var a={"./af":5809,"./af.js":5809,"./ar":46069,"./ar-dz":70481,"./ar-dz.js":70481,"./ar-kw":93994,"./ar-kw.js":93994,"./ar-ly":33312,"./ar-ly.js":33312,"./ar-ma":90239,"./ar-ma.js":90239,"./ar-sa":31863,"./ar-sa.js":31863,"./ar-tn":19607,"./ar-tn.js":19607,"./ar.js":46069,"./az":69281,"./az.js":69281,"./be":29945,"./be.js":29945,"./bg":59384,"./bg.js":59384,"./bm":21476,"./bm.js":21476,"./bn":43345,"./bn-bd":70216,"./bn-bd.js":70216,"./bn.js":43345,"./bo":81713,"./bo.js":81713,"./br":19655,"./br.js":19655,"./bs":87296,"./bs.js":87296,"./ca":43049,"./ca.js":43049,"./cs":62722,"./cs.js":62722,"./cv":98039,"./cv.js":98039,"./cy":95563,"./cy.js":95563,"./da":31960,"./da.js":31960,"./de":67533,"./de-at":76674,"./de-at.js":76674,"./de-ch":17732,"./de-ch.js":17732,"./de.js":67533,"./dv":78343,"./dv.js":78343,"./el":37004,"./el.js":37004,"./en-au":32517,"./en-au.js":32517,"./en-ca":84929,"./en-ca.js":84929,"./en-gb":99722,"./en-gb.js":99722,"./en-ie":96923,"./en-ie.js":96923,"./en-il":68050,"./en-il.js":68050,"./en-in":99624,"./en-in.js":99624,"./en-nz":70540,"./en-nz.js":70540,"./en-sg":14375,"./en-sg.js":14375,"./eo":10040,"./eo.js":10040,"./es":99720,"./es-do":25595,"./es-do.js":25595,"./es-mx":10180,"./es-mx.js":10180,"./es-us":61563,"./es-us.js":61563,"./es.js":99720,"./et":9217,"./et.js":9217,"./eu":39474,"./eu.js":39474,"./fa":85243,"./fa.js":85243,"./fi":57645,"./fi.js":57645,"./fil":55350,"./fil.js":55350,"./fo":75622,"./fo.js":75622,"./fr":91467,"./fr-ca":53439,"./fr-ca.js":53439,"./fr-ch":14335,"./fr-ch.js":14335,"./fr.js":91467,"./fy":86026,"./fy.js":86026,"./ga":32969,"./ga.js":32969,"./gd":21347,"./gd.js":21347,"./gl":11085,"./gl.js":11085,"./gom-deva":904,"./gom-deva.js":904,"./gom-latn":69597,"./gom-latn.js":69597,"./gu":28705,"./gu.js":28705,"./he":69128,"./he.js":69128,"./hi":92821,"./hi.js":92821,"./hr":9002,"./hr.js":9002,"./hu":94814,"./hu.js":94814,"./hy-am":30658,"./hy-am.js":30658,"./id":29344,"./id.js":29344,"./is":28204,"./is.js":28204,"./it":70376,"./it-ch":81549,"./it-ch.js":81549,"./it.js":70376,"./ja":69293,"./ja.js":69293,"./jv":96401,"./jv.js":96401,"./ka":60482,"./ka.js":60482,"./kk":87329,"./kk.js":87329,"./km":44241,"./km.js":44241,"./kn":23566,"./kn.js":23566,"./ko":52742,"./ko.js":52742,"./ku":92915,"./ku.js":92915,"./ky":86846,"./ky.js":86846,"./lb":44959,"./lb.js":44959,"./lo":82188,"./lo.js":82188,"./lt":58967,"./lt.js":58967,"./lv":41245,"./lv.js":41245,"./me":90751,"./me.js":90751,"./mi":57501,"./mi.js":57501,"./mk":11643,"./mk.js":11643,"./ml":15597,"./ml.js":15597,"./mn":67612,"./mn.js":67612,"./mr":19065,"./mr.js":19065,"./ms":84703,"./ms-my":84645,"./ms-my.js":84645,"./ms.js":84703,"./mt":64365,"./mt.js":64365,"./my":83788,"./my.js":83788,"./nb":57357,"./nb.js":57357,"./ne":99109,"./ne.js":99109,"./nl":63746,"./nl-be":31985,"./nl-be.js":31985,"./nl.js":63746,"./nn":27175,"./nn.js":27175,"./oc-lnc":70566,"./oc-lnc.js":70566,"./pa-in":32733,"./pa-in.js":32733,"./pl":182,"./pl.js":182,"./pt":505,"./pt-br":17839,"./pt-br.js":17839,"./pt.js":505,"./ro":39578,"./ro.js":39578,"./ru":32328,"./ru.js":32328,"./sd":641,"./sd.js":641,"./se":51758,"./se.js":51758,"./si":36680,"./si.js":36680,"./sk":25016,"./sk.js":25016,"./sl":7424,"./sl.js":7424,"./sq":88635,"./sq.js":88635,"./sr":49038,"./sr-cyrl":73716,"./sr-cyrl.js":73716,"./sr.js":49038,"./ss":64771,"./ss.js":64771,"./sv":3517,"./sv.js":3517,"./sw":39419,"./sw.js":39419,"./ta":55959,"./ta.js":55959,"./te":21739,"./te.js":21739,"./tet":22264,"./tet.js":22264,"./tg":94792,"./tg.js":94792,"./th":88328,"./th.js":88328,"./tk":60702,"./tk.js":60702,"./tl-ph":57814,"./tl-ph.js":57814,"./tlh":10797,"./tlh.js":10797,"./tr":16691,"./tr.js":16691,"./tzl":76891,"./tzl.js":76891,"./tzm":16362,"./tzm-latn":37855,"./tzm-latn.js":37855,"./tzm.js":16362,"./ug-cn":77606,"./ug-cn.js":77606,"./uk":30513,"./uk.js":30513,"./ur":43803,"./ur.js":43803,"./uz":60344,"./uz-latn":8957,"./uz-latn.js":8957,"./uz.js":60344,"./vi":70003,"./vi.js":70003,"./x-pseudo":8842,"./x-pseudo.js":8842,"./yo":62083,"./yo.js":62083,"./zh-cn":84536,"./zh-cn.js":84536,"./zh-hk":92475,"./zh-hk.js":92475,"./zh-mo":67593,"./zh-mo.js":67593,"./zh-tw":4746,"./zh-tw.js":4746};function i(e){var t=s(e);return l(t)}function s(e){if(!l.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=s,e.exports=i,i.id=46700}},t={};function l(a){var i=t[a];if(void 0!==i)return i.exports;var s=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(s.exports,s,s.exports,l),s.loaded=!0,s.exports}l.m=e,(()=>{var e=[];l.O=(t,a,i,s)=>{if(!a){var o=1/0;for(c=0;c<e.length;c++){for(var[a,i,s]=e[c],n=!0,r=0;r<a.length;r++)(!1&s||o>=s)&&Object.keys(l.O).every((e=>l.O[e](a[r])))?a.splice(r--,1):(n=!1,s<o&&(o=s));if(n){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,i,s]}})(),(()=>{l.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return l.d(t,{a:t}),t}})(),(()=>{l.d=(e,t)=>{for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,a)=>(l.f[a](e,t),t)),[]))})(),(()=>{l.u=e=>"js/"+e+"."+{42:"6ebed0a2",181:"047314fa",421:"4acb9be9",579:"7b8d38a7",714:"dda1424f",822:"423ee662",1e3:"7d7966ce",1006:"4b1d10b5",1168:"af5b3183",1171:"042fa0b3",1243:"018cb7cf",1447:"cf9be65d",1801:"61bc2dc3",1843:"3f4f161b",2003:"0a3f3ef7",2070:"8b81d968",2091:"05247fe2",2097:"ce1b6026",2230:"d3e6a3b9",2235:"2821de7c",2277:"391a4742",2352:"60979abb",2447:"38563bc9",2476:"9db37b04",2680:"26f6b7b9",2706:"0555b114",2761:"8f1e3756",2877:"84b908fe",2940:"32cf1a12",3031:"e0b2e14c",3292:"6c700f93",3366:"08cdbd5a",3473:"d5099fd4",3583:"9e0e0d28",3670:"e5b1aa8c",3682:"316eca0a",3812:"d3303bda",3827:"460cdfbc",3853:"dd0f2ff5",3854:"c8847881",3919:"2d50f5ef",3959:"6c54c56d",4196:"41d4308c",4220:"b3af9493",4345:"906ffd52",4405:"62053f6d",4477:"e3ff960e",4540:"c9d3f25f",4618:"14b219c2",4619:"9b5eeb8b",4687:"c8d97e33",4764:"5c6923cb",4848:"70630c64",4869:"edd0b8d7",4917:"e45caeb7",5166:"a3118ec5",5260:"8bdff26f",5302:"7a22941d",5371:"8ac5c32f",5471:"1e325ee8",5538:"1f7dad08",5584:"82f53ef6",5761:"ddbef2be",5762:"accaca2e",5827:"7301587d",6003:"55ee4594",6030:"b6b27615",6035:"853bca24",6095:"d3b2152e",6659:"598198e3",6676:"ba83a3fb",6844:"f2693bd4",6870:"be254031",6956:"90f87f13",7025:"f917860c",7187:"51b57c2a",7207:"60ede7c2",7250:"20a0bbd8",7334:"27e10db1",7354:"ab74afad",7363:"ab90ed9d",7371:"7863b617",7463:"673241a5",7490:"2797e0a4",7661:"7868d80d",7691:"329d1cf2",7692:"6576437f",7763:"77f82845",7775:"f4183302",7936:"6ca7998b",8083:"ee9f887e",8144:"36ffb055",8315:"16a21ff0",8335:"c49c5ef4",8353:"020b1ff8",8620:"79cf60c4",8731:"1283ca0d",8747:"364ae2e5",8829:"42c61454",8908:"98a4343f",8994:"fed5508e",9070:"69790866",9139:"d5e3196c",9191:"6819c9da",9208:"dba7334f",9248:"d1f9c1e7",9288:"8e84ddc0",9365:"6b91bd03",9383:"98312ec6",9586:"6efc2f3a",9631:"1417f616",9776:"3ba545ef",9813:"a173c748",9815:"745a85d9",9878:"25e96661",9889:"a7da183f",9897:"a1d97f35"}[e]+".js"})(),(()=>{l.miniCssF=e=>"css/"+({2143:"app",4736:"vendor"}[e]||e)+"."+{2143:"614bd5d9",3919:"7ba91948",4736:"4264a0b9",8908:"d3a8a517",9288:"41578a93"}[e]+".css"})(),(()=>{l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="Electron:";l.l=(a,i,s,o)=>{if(e[a])e[a].push(i);else{var n,r;if(void 0!==s)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==t+s){n=u;break}}n||(r=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,l.nc&&n.setAttribute("nonce",l.nc),n.setAttribute("data-webpack",t+s),n.src=a),e[a]=[i];var m=(t,l)=>{n.onerror=n.onload=null,clearTimeout(p);var i=e[a];if(delete e[a],n.parentNode&&n.parentNode.removeChild(n),i&&i.forEach((e=>e(l))),t)return t(l)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=m.bind(null,n.onerror),n.onload=m.bind(null,n.onload),r&&document.head.appendChild(n)}}})(),(()=>{l.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{l.p="/static/"})(),(()=>{var e=(e,t,l,a)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css";var s=s=>{if(i.onerror=i.onload=null,"load"===s.type)l();else{var o=s&&("load"===s.type?"missing":s.type),n=s&&s.target&&s.target.href||t,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.type=o,r.request=n,i.parentNode.removeChild(i),a(r)}};return i.onerror=i.onload=s,i.href=t,document.head.appendChild(i),i},t=(e,t)=>{for(var l=document.getElementsByTagName("link"),a=0;a<l.length;a++){var i=l[a],s=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(s===e||s===t))return i}var o=document.getElementsByTagName("style");for(a=0;a<o.length;a++){i=o[a],s=i.getAttribute("data-href");if(s===e||s===t)return i}},a=a=>new Promise(((i,s)=>{var o=l.miniCssF(a),n=l.p+o;if(t(o,n))return i();e(a,n,i,s)})),i={2143:0};l.f.miniCss=(e,t)=>{var l={3919:1,8908:1,9288:1};i[e]?t.push(i[e]):0!==i[e]&&l[e]&&t.push(i[e]=a(e).then((()=>{i[e]=0}),(t=>{throw delete i[e],t})))}})(),(()=>{var e={2143:0};l.f.j=(t,a)=>{var i=l.o(e,t)?e[t]:void 0;if(0!==i)if(i)a.push(i[2]);else{var s=new Promise(((l,a)=>i=e[t]=[l,a]));a.push(i[2]=s);var o=l.p+l.u(t),n=new Error,r=a=>{if(l.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var s=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;n.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",n.name="ChunkLoadError",n.type=s,n.request=o,i[1](n)}};l.l(o,r,"chunk-"+t,t)}},l.O.j=t=>0===e[t];var t=(t,a)=>{var i,s,[o,n,r]=a,d=0;if(o.some((t=>0!==e[t]))){for(i in n)l.o(n,i)&&(l.m[i]=n[i]);if(r)var c=r(l)}for(t&&t(a);d<o.length;d++)s=o[d],l.o(e,s)&&e[s]&&e[s][0](),e[o[d]]=0;return l.O(c)},a=self["webpackChunkElectron"]=self["webpackChunkElectron"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=l.O(void 0,[4736],(()=>l(16497)));a=l.O(a)})();