"use strict";(self["webpackChunkElectron"]=self["webpackChunkElectron"]||[]).push([[3419],{43419:(e,t,i)=>{i.r(t),i.d(t,{default:()=>j});var l=i(34182);const s={key:1,class:"q-mt-sm"},a=(0,l._)("pre",null,"hi there",-1),d=(0,l.Uk)("Сохранить");function o(e,t,i,o,n,r){const m=(0,l.up)("comp-breadcrumb"),c=(0,l.up)("comp-item-btn-save"),h=(0,l.up)("q-btn"),u=(0,l.up)("q-tooltip"),p=(0,l.up)("q-page-sticky"),_=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(_,{padding:""},{default:(0,l.w5)((()=>[i.isOpenInDialog?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(m,{key:0,list:[{label:"Задачи",to:"/task",docType:"task"},{label:n.item?n.item.title?n.item.title:"Редактирование":"",docType:"edit"}]},null,8,["list"])),n.item?((0,l.wg)(),(0,l.iD)("div",s,[a,i.isOpenInDialog?((0,l.wg)(),(0,l.j4)(h,{key:1,color:"secondary",label:e.$t("message.save"),class:"q-mr-sm",onClick:r.save},null,8,["label","onClick"])):((0,l.wg)(),(0,l.j4)(c,{key:0,onSave:r.save,readonly:!1,onCancel:t[0]||(t[0]=t=>e.$router.push(r.docUrl))},null,8,["onSave"])),(0,l.Wm)(p,{position:"bottom-right",offset:[18,18]},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{size:"sm",fab:"",icon:"save",color:"primary",onClick:r.save},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[d])),_:1})])),_:1},8,["onClick"])])),_:1})])):(0,l.kq)("",!0)])),_:1})}const n={props:["id","readonly"],mixins:[],data(){return{list:[],isShowAddDialog:!1,deleted:!1,item:{title:null}}},methods:{add(){this.isShowAddDialog=!0},reload(e){this.deleted=!!e,this.$utils.callPgMethod("work_list",{task_id:this.id,deleted:this.deleted,order_by:"created_at desc"},(e=>this.list=e))},saveNew(){if(!this.item.title)return void this.$q.notify({type:"negative",message:'не заполнено поле: "название"'});let e=Object.assign({id:-1,task_id:this.id},this.item);this.$utils.callPgMethod("work_update",e,(()=>{this.isShowAddDialog=!1,this.item.title=null,this.reload()}))},removeRecover({id:e}){this.$utils.callPgMethod("work_update",{id:e,deleted:!this.deleted},(()=>this.reload(this.deleted)))}},mounted(){this.reload()}};var r=i(74260),m=i(10846),c=i(62025),h=i(2165),u=i(5363),p=i(27011),_=i(83414),g=i(52035),b=i(75096),Z=i(2350),Q=i(69721),k=i(24554),v=i(46778),y=i(10151),f=i(25589),w=i(34842),I=i(99367),S=i(60677),C=i(7518),D=i.n(C);D()(n,"components",{QBar:m.Z,QSpace:c.Z,QBtn:h.Z,QTooltip:u.Z,QList:p.Z,QItem:_.Z,QItemSection:g.Z,QAvatar:b.Z,QItemLabel:Z.Z,QBadge:Q.Z,QIcon:k.Z,QDialog:v.Z,QCard:y.Z,QCardSection:f.Z,QInput:w.Z,QCardActions:I.Z}),D()(n,"directives",{ClosePopup:S.Z});const $={props:["id","readonly"],mixins:[],data(){return{list:[],isShowAddDialog:!1,deleted:!1,item:{title:null}}},methods:{add(){this.isShowAddDialog=!0},reload(e){this.deleted=!!e,this.$utils.callPgMethod("customer_task_list",{task_id:this.id,deleted:this.deleted,order_by:"created_at desc"},(e=>this.list=e))},saveNew(){if(!this.item.title)return void this.$q.notify({type:"negative",message:'не заполнено поле: "название"'});let e=Object.assign({id:-1,task_id:this.id},this.item);this.$utils.callPgMethod("customer_task_update",e,(()=>{this.isShowAddDialog=!1,this.item.title=null,this.reload()}))},removeRecover({id:e}){this.$utils.callPgMethod("customer_task_update",{id:e,deleted:!this.deleted},(()=>this.reload(this.deleted)))}},mounted(){this.reload()}};D()($,"components",{QBar:m.Z,QSpace:c.Z,QBtn:h.Z,QTooltip:u.Z,QList:p.Z,QItem:_.Z,QItemSection:g.Z,QAvatar:b.Z,QItemLabel:Z.Z,QBadge:Q.Z,QIcon:k.Z,QDialog:v.Z,QCard:y.Z,QCardSection:f.Z,QInput:w.Z,QCardActions:I.Z}),D()($,"directives",{ClosePopup:S.Z});var q=i(43015);const M={props:["id","isOpenInDialog"],mixins:[q.Z],computed:{docUrl:function(){return"/task"}},data(){return{item:null,flds:[{name:"title",label:"название",required:!0},{name:"type_id",label:"тип задачи"},{name:"state_id",label:"статус"},{name:"system_id",label:"система"},{name:"work_time_sheet_id",label:"лурв"},{name:"technical_task_id",label:"тз"},{name:"plan_end_date",label:"плановая дата завершения"},{name:"fact_end_date",label:"фактическая дата завершения"},{name:"specialist_priority",label:"приоритет"},{name:"estimate",label:"оценка"},{name:"worked_time",label:"затрачено"},{name:"today",label:"в работе сегодня"},{name:"description",label:"описание"},{name:"files",label:"файлы"},{name:"images",label:"изображения"},{name:"process",label:"процесс"},{name:"process_files",label:"файлы процесса"},{name:"process_images",label:"изображения процесса"},{name:"result",label:"результатос"},{name:"result_files",label:"файлы результата"},{name:"result_images",label:"изображения результата"}],optionsFlds:[]}},watch:{},methods:{resultModify(e){return e},save(){this.$utils.saveItem.call(this,{method:"task_update",itemForSaveMod:{},resultModify:this.resultModify})},reload(){let e=e=>{this.item=this.resultModify(e)};this.$utils.getDocItemById.call(this,{method:"task_get_by_id",cb:e})}},mounted(){this.reload()}};var A=i(24379),P=i(21007);const B=(0,r.Z)(M,[["render",o]]),j=B;D()(M,"components",{QPage:A.Z,QBtn:h.Z,QPageSticky:P.Z,QTooltip:u.Z})}}]);