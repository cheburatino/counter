"use strict";(self["webpackChunkCounter"]=self["webpackChunkCounter"]||[]).push([[9173],{79173:(e,l,t)=>{t.r(l),t.d(l,{default:()=>te});var a=t(75305);const i=(0,a._)("img",{src:"image/work.png",alt:""},null,-1),d=(0,a.Uk)("На сегодня");function r(e,l,t,r,o,u){const n=(0,a.up)("comp-breadcrumb"),s=(0,a.up)("filter-component"),m=(0,a.up)("q-avatar"),c=(0,a.up)("q-item-section"),p=(0,a.up)("router-link"),_=(0,a.up)("q-item-label"),w=(0,a.up)("q-badge"),f=(0,a.up)("comp-item-dropdown-btn"),g=(0,a.up)("comp-doc-list"),v=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(v,{padding:!t.isOpenInDialog},{default:(0,a.w5)((()=>[t.isOpenInDialog?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(n,{key:0,class:"text-capitalize",list:[{label:e.$t("work.name_plural"),docType:"work"}]},null,8,["list"])),(0,a.Wm)(g,{ref:"docList",listTitle:e.$t("work.name_plural"),listDeletedTitle:e.$t("work.name_plural_deleted"),"pg-method":"work_list","list-sort-data":o.listSortData,"list-filter-data":o.listFilterData,newDocUrl:u.currentUrl+"new",ext:t.ext,"search-fld-name":"search_text",readonly:!1},{addFilterSlot:(0,a.w5)((()=>[(0,a.Wm)(s,{currentUser:e.currentUser,onSqlRestBtnClickHandler:u.sqlRestBtnClickHandler,onUpdateFilterCtlgTaskState:u.updateFilterCtlgTaskState,onUpdateFilterSystem:u.updateFilterSystem,onUpdateFilterDigitalSolution:u.updateFilterDigitalSolution},null,8,["currentUser","onSqlRestBtnClickHandler","onUpdateFilterCtlgTaskState","onUpdateFilterSystem","onUpdateFilterDigitalSolution"])])),listItem:(0,a.w5)((({item:t})=>[(0,a.Wm)(p,{to:u.currentUrl+t.id,style:{cursor:"pointer"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{rounded:""},{default:(0,a.w5)((()=>[i])),_:1})])),_:1})])),_:2},1032,["to"]),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(_,{lines:"1"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(t.title),1)])),_:2},1024),(0,a.Wm)(_,{caption:""},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{color:"orange"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(t.options.title.state_title),1)])),_:2},1024),t.today?((0,a.wg)(),(0,a.j4)(w,{key:0,class:"q-ma-xs",color:"primary"},{default:(0,a.w5)((()=>[d])),_:1})):(0,a.kq)("",!0),t.system_id?((0,a.wg)(),(0,a.j4)(w,{key:1,class:"q-ma-xs",color:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(t.options.title.system_title),1)])),_:2},1024)):(0,a.kq)("",!0),t.task_id?((0,a.wg)(),(0,a.j4)(w,{key:2,class:"q-ma-xs",color:"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(t.options.title.task_title),1)])),_:2},1024)):(0,a.kq)("",!0)])),_:2},1024),t.plan_end_date?((0,a.wg)(),(0,a.j4)(_,{key:0,caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)("Плановая дата завершения: "+(0,a.zw)(e.$utils.formatPgDate(t.plan_end_date)),1)])),_:2},1024)):(0,a.kq)("",!0),t.fact_end_date?((0,a.wg)(),(0,a.j4)(_,{key:1,caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)("Фактическая дата завершения: "+(0,a.zw)(e.$utils.formatPgDate(t.fact_end_date)),1)])),_:2},1024)):(0,a.kq)("",!0)])),_:2},1024),(0,a.Wm)(c,{top:"",side:""},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{item:t,itemProp:"title","is-edit":!0,"is-delete":!0,fkProp:"","pg-method":"work_update",onEdit:l=>e.$router.push(`${u.currentUrl}${t.id}`),onReloadList:l[0]||(l[0]=l=>e.$refs.docList.reloadList())},null,8,["item","is-delete","onEdit"])])),_:2},1024)])),_:1},8,["listTitle","listDeletedTitle","list-sort-data","list-filter-data","newDocUrl","ext"])])),_:1},8,["padding"])}var o=t(43015);const u={style:{"flex-wrap":"wrap",display:"flex"}},n={style:{display:"flex",width:"50%","justify-content":"space-between","flex-wrap":"wrap","padding-right":"5px"}},s={style:{display:"flex","justify-content":"space-between",width:"100%",padding:"5px"}},m={style:{display:"flex",width:"50%","justify-content":"space-between","flex-wrap":"wrap"}},c={style:{display:"flex","justify-content":"space-between",width:"100%",padding:"5px"}},p=(0,a._)("div",{class:"text-h6"},"Добавление нового фильтра",-1),_=(0,a._)("div",null,"Название фильтра:",-1),w=(0,a._)("div",null,"Условия фильтра:",-1),f=(0,a._)("span",null,"сделать фильтром по умолчанию",-1),g=(0,a._)("div",{class:"text-h6"},"Редактирование фильтра",-1),v=(0,a._)("div",null,"Название фильтра:",-1),b=(0,a._)("div",null,"Условия фильтра:",-1),y=(0,a._)("span",null,"сделать фильтром по умолчанию",-1),k={class:"q-ml-sm"},C=(0,a._)("div",{class:"text-h6 text-center"},"Варианты фильтров",-1),h=(0,a._)("div",{class:"text-h6 text-center"},"Варианты сортировки",-1),W=(0,a._)("div",{class:"text-h6"},"Добавление новой сортировки",-1),O=(0,a._)("div",null,"Название сортировки:",-1),F=(0,a._)("div",null,"Условия сортировки:",-1),x=(0,a._)("span",null,"сделать сортировкой по умолчанию",-1),V=(0,a._)("div",{class:"text-h6"},"Редактирование сортировки",-1),M=(0,a._)("div",null,"Название сортировки:",-1),H=(0,a._)("div",null,"Условия сортировки:",-1),U=(0,a._)("span",null,"сделать сортировкой по умолчанию",-1),D={class:"q-ml-sm"};function q(e,l,t,i,d,r){const o=(0,a.up)("q-input"),q=(0,a.up)("q-btn"),S=(0,a.up)("q-card-section"),T=(0,a.up)("q-checkbox"),Z=(0,a.up)("q-card-actions"),L=(0,a.up)("q-card"),P=(0,a.up)("q-dialog"),K=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",u,[(0,a._)("div",n,[(0,a.Wm)(o,{id:"sqlInput",onKeydown:i.keydownHandler,style:{width:"100%"},filled:"",modelValue:i.sqlRest,"onUpdate:modelValue":l[0]||(l[0]=e=>i.sqlRest=e),label:"Условия фильтра"},null,8,["onKeydown","modelValue"]),(0,a._)("div",s,[(0,a._)("div",null,[(0,a.Wm)(q,{push:"",style:{"margin-right":"5px","margin-bottom":"5px","background-color":"rgba(255,255,255,0.2)"},"text-color":"primary",label:i.activeFilterTitle,onClick:l[1]||(l[1]=()=>i.isFiltersModal=!0)},null,8,["label"])]),(0,a._)("div",null,[(0,a.Wm)(q,{push:"",style:{"background-color":"rgba(255,255,255,0.2)"},"text-color":"primary",label:"+",onClick:i.openCreateFilterModal},null,8,["onClick"])])])]),(0,a._)("div",m,[(0,a.Wm)(o,{id:"sqlInput",onKeydown:i.keydownHandlerOrder,style:{width:"100%"},filled:"",modelValue:i.orderRest,"onUpdate:modelValue":l[2]||(l[2]=e=>i.orderRest=e),label:"Условия сортировки"},null,8,["onKeydown","modelValue"]),(0,a._)("div",c,[(0,a._)("div",null,[(0,a.Wm)(q,{push:"",style:{"margin-right":"5px","margin-bottom":"5px","background-color":"rgba(255,255,255,0.2)"},"text-color":"primary",label:i.activeOrderByTitle,onClick:l[3]||(l[3]=()=>i.isOrderModal=!0)},null,8,["label"])]),(0,a._)("div",null,[(0,a.Wm)(q,{push:"",style:{"background-color":"rgba(255,255,255,0.2)"},"text-color":"primary",label:"+",onClick:i.openCreateOrderModal},null,8,["onClick"])])])])]),(0,a.Wm)(P,{modelValue:i.isCreateFilterModal,"onUpdate:modelValue":l[7]||(l[7]=e=>i.isCreateFilterModal=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(L,{style:{"min-width":"350px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[p])),_:1}),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[_])),_:1}),(0,a.Wm)(S,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{dense:"",modelValue:i.newFilterTitle,"onUpdate:modelValue":l[4]||(l[4]=e=>i.newFilterTitle=e),autofocus:"",onKeyup:(0,a.D2)(i.closeCreateFilterModal,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[w])),_:1}),(0,a.Wm)(S,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{dense:"",modelValue:i.newFilterCondition,"onUpdate:modelValue":l[5]||(l[5]=e=>i.newFilterCondition=e),autofocus:"",onKeyup:(0,a.D2)(i.closeCreateFilterModal,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),(0,a.Wm)(T,{modelValue:i.defCheckbox,"onUpdate:modelValue":l[6]||(l[6]=e=>i.defCheckbox=e)},null,8,["modelValue"]),f,(0,a.Wm)(Z,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(q,{flat:"",label:"Cancel"},null,512),[[K]]),(0,a.Wm)(q,{flat:"",label:"Add filter",style:{"background-color":"rgba(33, 186, 69, 0.2)"},onClick:i.createFilter},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(P,{modelValue:i.isEditFilterModal,"onUpdate:modelValue":l[13]||(l[13]=e=>i.isEditFilterModal=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(L,{style:{"min-width":"350px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[g])),_:1}),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[v])),_:1}),(0,a.Wm)(S,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{dense:"",modelValue:i.editFilterTitle,"onUpdate:modelValue":l[8]||(l[8]=e=>i.editFilterTitle=e),autofocus:"",onKeyup:l[9]||(l[9]=(0,a.D2)((()=>i.isEditFilterModal=!1),["enter"]))},null,8,["modelValue"])])),_:1}),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[b])),_:1}),(0,a.Wm)(S,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{dense:"",modelValue:i.editFilterCondition,"onUpdate:modelValue":l[10]||(l[10]=e=>i.editFilterCondition=e),autofocus:"",onKeyup:l[11]||(l[11]=(0,a.D2)((()=>i.isEditFilterModal=!1),["enter"]))},null,8,["modelValue"])])),_:1}),(0,a.Wm)(T,{modelValue:i.defCheckbox,"onUpdate:modelValue":l[12]||(l[12]=e=>i.defCheckbox=e)},null,8,["modelValue"]),y,(0,a.Wm)(Z,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(q,{flat:"",label:"Cancel"},null,512),[[K]]),(0,a.Wm)(q,{flat:"",label:"Edit filter",style:{"background-color":"rgba(33, 186, 69, 0.2)"},onClick:i.editFilter},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(P,{modelValue:i.isDeleteFilterModal,"onUpdate:modelValue":l[14]||(l[14]=e=>i.isDeleteFilterModal=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(L,null,{default:(0,a.w5)((()=>[(0,a.Wm)(S,{class:"row items-center"},{default:(0,a.w5)((()=>[(0,a._)("span",k,'Хотите удалить фильтр "'+(0,a.zw)(i.curFilter.title)+'"?',1)])),_:1}),(0,a.Wm)(Z,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(q,{flat:"",label:"Cancel"},null,512),[[K]]),(0,a.Wm)(q,{flat:"",label:"Delete",style:{"background-color":"rgba(193, 0, 21, 0.2)"},onClick:i.deleteFilter},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(P,{modelValue:i.isFiltersModal,"onUpdate:modelValue":l[15]||(l[15]=e=>i.isFiltersModal=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(L,null,{default:(0,a.w5)((()=>[(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[C])),_:1}),(0,a.Wm)(S,{align:"center"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.filterList,(e=>((0,a.wg)(),(0,a.j4)(q,{key:e.id,push:"",style:{"margin-right":"5px","margin-bottom":"5px","background-color":"rgba(255,255,255,0.2)"},"text-color":"primary",label:e.title,onClick:l=>i.filterStringAssembly(e),onMousedown:i.mousedownOnFilter,onMouseup:l=>i.mouseupOnFilter(e),onDblclick:l=>i.dblClickOnFilter(e)},null,8,["label","onClick","onMousedown","onMouseup","onDblclick"])))),128))])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(P,{modelValue:i.isOrderModal,"onUpdate:modelValue":l[16]||(l[16]=e=>i.isOrderModal=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(L,null,{default:(0,a.w5)((()=>[(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[h])),_:1}),(0,a.Wm)(S,{align:"center"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.orderByList,(e=>((0,a.wg)(),(0,a.j4)(q,{key:e.id,push:"",style:{"margin-right":"5px","margin-bottom":"5px","background-color":"rgba(255,255,255,0.2)"},"text-color":"primary",label:e.title,onClick:l=>i.filterStringAssemblyOrder(e),onMousedown:i.mousedownOnOrder,onMouseup:l=>i.mouseupOnOrder(e),onDblclick:l=>i.dblClickOnOrder(e)},null,8,["label","onClick","onMousedown","onMouseup","onDblclick"])))),128))])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(P,{modelValue:i.isCreateOrderModal,"onUpdate:modelValue":l[20]||(l[20]=e=>i.isCreateOrderModal=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(L,{style:{"min-width":"350px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[W])),_:1}),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[O])),_:1}),(0,a.Wm)(S,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{dense:"",modelValue:i.newOrderTitle,"onUpdate:modelValue":l[17]||(l[17]=e=>i.newOrderTitle=e),autofocus:"",onKeyup:(0,a.D2)(i.closeCreateOrderModal,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[F])),_:1}),(0,a.Wm)(S,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{dense:"",modelValue:i.newOrderCondition,"onUpdate:modelValue":l[18]||(l[18]=e=>i.newOrderCondition=e),autofocus:"",onKeyup:(0,a.D2)(i.closeCreateOrderModal,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),(0,a.Wm)(T,{modelValue:i.defCheckboxOrder,"onUpdate:modelValue":l[19]||(l[19]=e=>i.defCheckboxOrder=e)},null,8,["modelValue"]),x,(0,a.Wm)(Z,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(q,{flat:"",label:"Cancel"},null,512),[[K]]),(0,a.Wm)(q,{flat:"",label:"Add order_by",style:{"background-color":"rgba(33, 186, 69, 0.2)"},onClick:i.createOrder},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(P,{modelValue:i.isEditOrderModal,"onUpdate:modelValue":l[26]||(l[26]=e=>i.isEditOrderModal=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(L,{style:{"min-width":"350px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[V])),_:1}),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[M])),_:1}),(0,a.Wm)(S,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{dense:"",modelValue:i.editOrderTitle,"onUpdate:modelValue":l[21]||(l[21]=e=>i.editOrderTitle=e),autofocus:"",onKeyup:l[22]||(l[22]=(0,a.D2)((()=>i.isEditOrderModal=!1),["enter"]))},null,8,["modelValue"])])),_:1}),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[H])),_:1}),(0,a.Wm)(S,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{dense:"",modelValue:i.editOrderCondition,"onUpdate:modelValue":l[23]||(l[23]=e=>i.editOrderCondition=e),autofocus:"",onKeyup:l[24]||(l[24]=(0,a.D2)((()=>i.isEditOrderModal=!1),["enter"]))},null,8,["modelValue"])])),_:1}),(0,a.Wm)(T,{modelValue:i.defCheckboxOrder,"onUpdate:modelValue":l[25]||(l[25]=e=>i.defCheckboxOrder=e)},null,8,["modelValue"]),U,(0,a.Wm)(Z,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(q,{flat:"",label:"Cancel"},null,512),[[K]]),(0,a.Wm)(q,{flat:"",label:"Edit order_by",style:{"background-color":"rgba(33, 186, 69, 0.2)"},onClick:i.editOrder},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(P,{modelValue:i.isDeleteOrderModal,"onUpdate:modelValue":l[27]||(l[27]=e=>i.isDeleteOrderModal=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(L,null,{default:(0,a.w5)((()=>[(0,a.Wm)(S,{class:"row items-center"},{default:(0,a.w5)((()=>[(0,a._)("span",D,'Хотите удалить сортировку "'+(0,a.zw)(i.curOrder.title)+'"?',1)])),_:1}),(0,a.Wm)(Z,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(q,{flat:"",label:"Cancel"},null,512),[[K]]),(0,a.Wm)(q,{flat:"",label:"Delete",style:{"background-color":"rgba(193, 0, 21, 0.2)"},onClick:i.deleteOrder},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}t(10071),t(66016);var S=t(91589);const T={props:["currentUser"],setup(e,{emit:l}){const t=(0,a.iH)(null),i=(0,a.iH)(null),d=(0,a.iH)(null),r=(0,a.iH)(null),o=(0,a.iH)(null),u=(0,a.iH)(null),n=(0,a.iH)([]),s=(0,a.iH)(!0),m=(0,a.iH)(!1),c=(0,a.iH)(""),p=(0,a.iH)(""),_=(0,a.iH)([]),w=(0,a.iH)(!1),f=(0,a.iH)(!1),g=(0,a.iH)(!1),v=(0,a.iH)(""),b=(0,a.iH)(!1),y=(0,a.iH)(!1),k=(0,a.iH)(""),C=(0,a.iH)(""),h=(0,a.iH)(!1),W=(0,a.iH)(""),O=(0,a.iH)(""),F=(0,a.iH)(""),x=(0,a.iH)(""),V=(0,a.iH)(""),M=(0,a.iH)(!1),H=(0,a.iH)([]),U=(0,a.iH)({}),D=(0,a.iH)(""),q=(0,a.iH)(!1),T=(0,a.iH)(!1),Z=(0,a.iH)(""),L=(0,a.iH)(""),P=(0,a.iH)(!1),K=(0,a.iH)({}),E=(0,a.iH)(!1),I=(0,a.iH)(""),R=(0,a.iH)(""),$=(0,a.iH)(!1),B=(0,a.iH)(!1),j=(0,a.iH)(""),Q=e=>{v.value=e,y.value=!0,k.value=e.title,C.value=e.where_str,M.value=e.is_default},z=()=>{b.value||(b.value=!0,f.value=!1,setTimeout((()=>{f.value=!0,b.value=!1}),1500))},A=e=>{f.value&&(g.value=!0,v.value=e)},Y=e=>{f.value||(x.value=e.where_str,W.value=e,F.value=e.title,O.value="",ce())},N=e=>{K.value=e,E.value=!0,I.value=e.title,R.value=e.order_by_str,T.value=e.is_default},G=()=>{$.value||($.value=!0,f.value=!1,setTimeout((()=>{f.value=!0,$.value=!1}),1500))},J=e=>{f.value&&(B.value=!0,K.value=e)},X=e=>{f.value||(V.value=e.order_by_str,U.value=e,D.value=e.title,j.value="",ce())},ee=()=>{S.Z.postCallPgMethod({method:"ctlg_filter_update",params:{id:-1,title:c.value,index:"meeting",where_str:p.value,user_table_id:e.currentUser.id,is_default:M.value}}).subscribe((e=>{e.ok&&(re(),se())}))},le=()=>{S.Z.postCallPgMethod({method:"ctlg_order_by_update",params:{id:-1,title:L.value,index:"meeting",order_by_str:Z.value,user_table_id:e.currentUser.id,is_default:T.value}}).subscribe((e=>{e.ok&&(oe(),me())}))},te=()=>{S.Z.postCallPgMethod({method:"ctlg_filter_update",params:{id:v.value.id,deleted:!0}}).subscribe((e=>{e.ok&&(re(),g.value=!1)}))},ae=()=>{S.Z.postCallPgMethod({method:"ctlg_order_by_update",params:{id:K.value.id,deleted:!0}}).subscribe((e=>{e.ok&&(oe(),B.value=!1)}))},ie=()=>{S.Z.postCallPgMethod({method:"ctlg_filter_update",params:{id:v.value.id,title:k,index:"meeting",where_str:C,user_table_id:e.currentUser.id,is_default:M}}).subscribe((e=>{e.ok&&(re(),y.value=!1)}))},de=()=>{S.Z.postCallPgMethod({method:"ctlg_order_by_update",params:{id:K.value.id,title:I,index:"meeting",order_by_str:R,user_table_id:e.currentUser.id,is_default:T}}).subscribe((e=>{e.ok&&(oe(),E.value=!1)}))},re=()=>{S.Z.postCallPgMethod({method:"ctlg_filter_list",params:{user_table_id:e.currentUser.id,index:"meeting"}}).subscribe((e=>{e.ok&&(_.value=e.result,_.value.forEach((e=>{e.is_default&&(W.value=e,F.value=e.title,x.value=e.where_str,ce())})))}))},oe=()=>{S.Z.postCallPgMethod({method:"ctlg_order_by_list",params:{user_table_id:e.currentUser.id,index:"meeting"}}).subscribe((e=>{e.ok&&(H.value=e.result,H.value.forEach((e=>{e.is_default&&(U.value=e,D.value=e.title,V.value=e.order_by_str,ce())})))}))},ue=()=>{m.value=!0,M.value=!1},ne=()=>{P.value=!0,T.value=!1},se=()=>{m.value=!1,c.value="",p.value=""},me=()=>{P.value=!1,L.value="",Z.value=""},ce=()=>{l("sqlRestBtnClickHandler",{where_param:x.value?x.value:null,order_by:V.value?V.value:"created_at desc"})},pe=e=>{13===e.keyCode&&ce()},_e=e=>{13===e.keyCode&&ce()},we=e=>{console.log(window.location),console.log(e),window.location.href=`${window.location.origin}${window.location.pathname}/${e}`},fe=e=>{l("updateFilterCtlgTaskState",{state:e?e.id:null}),e&&S.Z.callPgMethod("ctlg_task_state_get_by_id",{id:e.id},(e=>{t.value=e.title}))},ge=e=>{l("updateFilterSystem",{system_id:e?e.id:null}),e&&S.Z.callPgMethod("system_get_by_id",{id:e.id},(e=>{d.value=e.title}))},ve=e=>{l("updateFilterDigitalSolution",{digital_solution_id:e?e.id:null}),e&&S.Z.callPgMethod("digital_solution_get_by_id",{id:e.id},(e=>{o.value=e.title}))};(0,a.YP)(x,(e=>(W.value.where_str!==e?(O.value=W.value.title,F.value="CUSTOM"):O.value&&(F.value=W.value.title),0)));const be=(0,a.Fl)((e=>(U.value.order_by_str!==e?(j.value=U.value.title,D.value="CUSTOM"):j.value&&(D.value=U.value.title),0))),ye=new URLSearchParams(window.location.search);if(ye.has("state")){let e=+ye.get("state");e&&fe({id:e})}if(ye.has("system_id")){let e=+ye.get("system_id");e&&ge({id:e})}if(ye.has("digital_solution_id")){let e=+ye.get("digital_solution_id");e&&ve({id:e})}return re(),oe(),{filterCtlgTaskStateTitle:t,filterCtlgTaskStateId:i,filterSystemTitle:d,filterSystemId:r,filterDigitalSolutionTitle:o,filterDigitalSolutionId:u,sqlRestList:n,active:s,isCreateFilterModal:m,newFilterTitle:c,newFilterCondition:p,filterList:_,isMousedownOnFilter:w,mouseFlag:f,isDeleteFilterModal:g,curFilter:v,filterLoading:b,isEditFilterModal:y,editFilterTitle:k,editFilterCondition:C,isFiltersModal:h,activeFilter:W,storeFilterName:O,activeFilterTitle:F,sqlRest:x,orderRest:V,orderRestComputed:be,defCheckbox:M,orderByList:H,activeOrderBy:U,activeOrderByTitle:D,isOrderModal:q,defCheckboxOrder:T,newOrderCondition:Z,newOrderTitle:L,isCreateOrderModal:P,curOrder:K,isEditOrderModal:E,editOrderTitle:I,editOrderCondition:R,orderLoading:$,isDeleteOrderModal:B,storeOrderByName:j,dblClickOnFilter:Q,mousedownOnFilter:z,mouseupOnFilter:A,filterStringAssembly:Y,dblClickOnOrder:N,mousedownOnOrder:G,mouseupOnOrder:J,filterStringAssemblyOrder:X,createFilter:ee,createOrder:le,deleteFilter:te,deleteOrder:ae,editFilter:ie,editOrder:de,loadFilterList:re,loadOrderList:oe,openCreateFilterModal:ue,openCreateOrderModal:ne,closeCreateFilterModal:se,closeCreateOrderModal:me,sqlRestBtnClickHandler:ce,keydownHandler:pe,keydownHandlerOrder:_e,routOnTask:we,updateFilterCtlgTaskState:fe,updateFilterSystem:ge,updateFilterDigitalSolution:ve}}};var Z=t(74260),L=t(34842),P=t(2165),K=t(46778),E=t(10151),I=t(25589),R=t(65735),$=t(99367),B=t(60677),j=t(7518),Q=t.n(j);const z=(0,Z.Z)(T,[["render",q]]),A=z;Q()(T,"components",{QInput:L.Z,QBtn:P.Z,QDialog:K.Z,QCard:E.Z,QCardSection:I.Z,QCheckbox:R.Z,QCardActions:$.Z}),Q()(T,"directives",{ClosePopup:B.Z});const Y={components:{FilterComponent:A},props:["isOpenInDialog","ext"],mixins:[o.Z],computed:{currentUrl:()=>"/work/"},data(){return{listSortData:[{value:"created_at",title:"Дата"},{value:"title",title:"Название"}],listFilterData:[{value:{deleted:!1},title:"Активные"},{value:{deleted:!0},title:"Удаленные"}]}},methods:{sqlRestBtnClickHandler(e){this.$refs.docList.changeItemList(e)},updateFilterCtlgTaskState(e){this.$refs.docList.changeItemList(e)},updateFilterSystem(e){this.$refs.docList.changeItemList(e)},updateFilterDigitalSolution(e){this.$refs.docList.changeItemList(e)}},watch:{},mounted(){}};var N=t(24379),G=t(52035),J=t(75096),X=t(2350),ee=t(69721);const le=(0,Z.Z)(Y,[["render",r]]),te=le;Q()(Y,"components",{QPage:N.Z,QItemSection:G.Z,QAvatar:J.Z,QItemLabel:X.Z,QBadge:ee.Z})}}]);