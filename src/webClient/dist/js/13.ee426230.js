(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"63d0":function(t,e,l){"use strict";l.r(e);var a=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("q-page",{attrs:{padding:""}},[t.isOpenInDialog?t._e():l("comp-breadcrumb",{attrs:{list:[{label:"Внутренние задачи",to:"/internal_task",docType:"internal_task"},{label:t.item?t.item.title?t.item.title:"Редактирование":"",docType:"edit"}]}}),t.item?l("div",{staticClass:"q-mt-sm"},[l("div",{staticClass:"row q-col-gutter-md q-mb-sm"},[l("div",{staticClass:"col-md-4 col-xs-6"},[l("q-input",{staticClass:"q-mb-sm col-md-4 col-xs-6",attrs:{outlined:"",type:"text",label:"название",autogrow:"",readonly:!1},model:{value:t.item.title,callback:function(e){t.$set(t.item,"title",e)},expression:"item.title"}})],1),l("div",{staticClass:"col-md-4 col-xs-6"},[l("q-select",{staticClass:"q-mb-sm col-md-4 col-xs-6",attrs:{outlined:"",label:"статус",options:[{label:"в работе",value:"in_work",color:""},{label:"завершена",value:"completed",color:""}],readonly:!1},model:{value:t.item.status,callback:function(e){t.$set(t.item,"status",e)},expression:"item.status"}})],1)]),l("div",{staticClass:"row q-col-gutter-md q-mb-sm"},[l("div",{staticClass:"col-8"},[l("q-input",{staticClass:"q-mb-sm col-8",attrs:{outlined:"",type:"text",label:"описание",autogrow:"",readonly:!1},model:{value:t.item.description,callback:function(e){t.$set(t.item,"description",e)},expression:"item.description"}})],1)]),l("div",{staticClass:"row q-col-gutter-md q-mb-sm"},[l("div",{staticClass:"col-md-4 col-xs-6"},[l("comp-fld-ref-search",{staticClass:"q-mb-sm col-md-4 col-xs-6",attrs:{outlined:"",pgMethod:"user_list",label:"автор",item:t.item.author_title,itemId:t.item.author_id,ext:{},readonly:!1},on:{update:function(e){return t.item.author_id=e.id},clear:function(e){t.item.author_id=null}}})],1),l("div",{staticClass:"col-md-4 col-xs-6"},[l("comp-fld-ref-search",{staticClass:"q-mb-sm col-md-4 col-xs-6",attrs:{outlined:"",pgMethod:"user_list",label:"постановщик",item:t.item.director_title,itemId:t.item.director_id,ext:{},readonly:!1},on:{update:function(e){return t.item.director_id=e.id},clear:function(e){t.item.director_id=null}}})],1)]),l("div",{staticClass:"row q-col-gutter-md q-mb-sm"},[l("div",{staticClass:"col-md-4 col-xs-6"},[l("comp-fld-ref-search",{staticClass:"q-mb-sm col-md-4 col-xs-6",attrs:{outlined:"",pgMethod:"user_list",label:"исполнитель",item:t.item.executor_title,itemId:t.item.executor_id,ext:{},readonly:!1},on:{update:function(e){return t.item.executor_id=e.id},clear:function(e){t.item.executor_id=null}}})],1),l("div",{staticClass:"col-md-4 col-xs-6"},[l("comp-fld-ref-search",{staticClass:"q-mb-sm col-md-4 col-xs-6",attrs:{outlined:"",pgMethod:"user_list",label:"приёмщик",item:t.item.acceptor_title,itemId:t.item.acceptor_id,ext:{},readonly:!1},on:{update:function(e){return t.item.acceptor_id=e.id},clear:function(e){t.item.acceptor_id=null}}})],1)]),l("div",{staticClass:"row q-col-gutter-md q-mb-sm"},[l("div",{staticClass:"col-md-4 col-xs-6"},[l("comp-fld-date",{staticClass:"q-mb-sm col-md-4 col-xs-6",attrs:{outlined:"",label:"плановая дата начала","date-string":t.$utils.formatPgDate(t.item.plan_start_date),readonly:!1},on:{update:function(e){return t.item.plan_start_date=e}}})],1),l("div",{staticClass:"col-md-4 col-xs-6"},[l("comp-fld-date",{staticClass:"q-mb-sm col-md-4 col-xs-6",attrs:{outlined:"",label:"фактическая дата начала","date-string":t.$utils.formatPgDate(t.item.fact_start_date),readonly:!1},on:{update:function(e){return t.item.fact_start_date=e}}})],1)]),l("div",{staticClass:"row q-col-gutter-md q-mb-sm"},[l("div",{staticClass:"col-md-4 col-xs-6"},[l("comp-fld-date",{staticClass:"q-mb-sm col-md-4 col-xs-6",attrs:{outlined:"",label:"плановая дата завершения","date-string":t.$utils.formatPgDate(t.item.plan_end_date),readonly:!1},on:{update:function(e){return t.item.plan_end_date=e}}})],1),l("div",{staticClass:"col-md-4 col-xs-6"},[l("comp-fld-date",{staticClass:"q-mb-sm col-md-4 col-xs-6",attrs:{outlined:"",label:"фактическая дата завершения","date-string":t.$utils.formatPgDate(t.item.fact_end_date),readonly:!1},on:{update:function(e){return t.item.fact_end_date=e}}})],1)]),l("div",{staticClass:"row q-col-gutter-md q-mb-sm"},[l("div",{staticClass:"col-md-4 col-xs-6"},[l("comp-fld-ref-search",{staticClass:"q-mb-sm col-md-4 col-xs-6",attrs:{outlined:"",pgMethod:"client_list",label:"заказчик",item:t.item.client_title,itemId:t.item.client_id,ext:{},readonly:!1},on:{update:function(e){return t.item.client_id=e.id},clear:function(e){t.item.client_id=null}}})],1),l("div",{staticClass:"col-md-4 col-xs-6"},[l("comp-fld-ref-search",{staticClass:"q-mb-sm col-md-4 col-xs-6",attrs:{outlined:"",pgMethod:"project_list",label:"проект",item:t.item.project_title,itemId:t.item.project_id,ext:{},readonly:!1},on:{update:function(e){return t.item.project_id=e.id},clear:function(e){t.item.project_id=null}}})],1)]),l("div",{staticClass:"row q-col-gutter-md q-mb-sm"},[l("div",{staticClass:"col-md-4 col-xs-6"},[l("comp-fld-ref-search",{staticClass:"q-mb-sm col-md-4 col-xs-6",attrs:{outlined:"",pgMethod:"internal_task_list",label:"родительская задача",item:t.item.parent_task_title,itemId:t.item.parent_task_id,ext:{avatar:"https://www.flaticon.com/svg/static/icons/svg/1632/1632670.svg",pathUrl:"/internal_task"},readonly:!1},on:{update:function(e){return t.item.parent_task_id=e.id},clear:function(e){t.item.parent_task_id=null}}})],1)]),t.isOpenInDialog?l("q-btn",{staticClass:"q-mr-sm",attrs:{color:"secondary",label:"сохранить"},on:{click:t.save}}):l("comp-item-btn-save",{attrs:{readonly:!1},on:{save:t.save,cancel:function(e){return t.$router.push(t.docUrl)}}})],1):t._e()],1)},i=[],s=(l("7514"),l("f488")),o={props:["id","isOpenInDialog"],components:{},mixins:[s["a"]],computed:{docUrl:function(){return"/internal_task"}},data:function(){return{item:null,flds:[{name:"title",label:"название",required:!0},{name:"status",label:"статус"},{name:"description",label:"описание"},{name:"author_id",label:"автор"},{name:"director_id",label:"постановщик"},{name:"executor_id",label:"исполнитель"},{name:"acceptor_id",label:"приёмщик"},{name:"plan_start_date",label:"плановая дата начала"},{name:"fact_start_date",label:"фактическая дата начала"},{name:"plan_end_date",label:"плановая дата завершения"},{name:"fact_end_date",label:"фактическая дата завершения"},{name:"client_id",label:"заказчик"},{name:"project_id",label:"проект"},{name:"parent_task_id",label:"родительская задача"}],optionsFlds:[]}},methods:{resultModify:function(t){if(t.status){var e=[{label:"в работе",value:"in_work",color:""},{label:"завершена",value:"completed",color:""}],l=e.find((function(e){return e.value===t.status}));l&&(t.status={value:t.status,label:l.label})}return t},save:function(){this.$utils.saveItem.call(this,{method:"internal_task_update",itemForSaveMod:{status:this.item.status?this.item.status.value:null},resultModify:this.resultModify})},reload:function(){var t=this,e=function(e){t.item=t.resultModify(e)};this.$utils.getDocItemById.call(this,{method:"internal_task_get_by_id",cb:e})}},mounted:function(){this.reload()}},c=o,d=l("2877"),n=Object(d["a"])(c,a,i,!1,null,null,null);e["default"]=n.exports}}]);